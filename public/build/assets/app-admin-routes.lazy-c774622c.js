import{bP as Xs,r as d,bQ as rr,bR as ir,j as e,o as v,bw as lr,bS as or,ay as cr,bT as Zs,bU as Ps,am as Pa,bH as E,u as de,T as n,K as et,$ as A,bV as dr,bW as ur,bX as mr,bY as xr,b1 as gr,m as Ae,n as z,bd as ss,bt as Be,bZ as hr,aS as Ta,b_ as Y,b$ as ge,c0 as pr,bO as jr,w as u,bb as Ts,c1 as Ea,c2 as st,t as L,q as M,c3 as K,v as q,I as J,H as j,z as G,M as he,c4 as fr,R as O,a0 as k,D as X,A as se,B as ee,G as ne,X as tt,x as ve,Y as R,y as I,C as re,b7 as D,E as p,a_ as br,a$ as at,a7 as U,ae as Gs,a2 as De,aH as me,aO as Q,ag as We,c5 as vr,au as ce,bc as ms,c6 as xs,c7 as be,d as yr,c8 as wr,ak as _r,c9 as Sr,br as kr,ba as Me,ca as Nr,O as Es,a9 as nt,bf as ts,cb as as,cc as Dt,Z as Se,cd as ns,ce as ke,aY as Da,aZ as Ma,cf as Qs,av as rs,cg as Cr,aB as ie,ch as N,ci as rt,a6 as g,cj as Ds,aP as Mt,aQ as Lt,bA as La,aq as it,ck as Fr,b3 as Ct,aW as Ke,cl as zr,cm as gs,bC as lt,S as Ms,V as He,aM as us,bo as Z,cn as B,aN as qa,co as Ir,cp as $a,cq as qt,bq as hs,a8 as $t,cr as is,ah as Ar,cs as Ls,ct as ot,cu as Pr,a3 as Le,a5 as qe,cv as Rt,cw as Ra,ar as Tr,as as Er,cx as Dr,_ as Mr,cy as Lr,cz as Vt,cA as es,bK as qr,aG as $r,p as Rr,cB as Vr,cC as Va,cD as Or,cE as Ur,cF as Hr,cG as Br,cH as Wr,cI as Kr,af as Oa,ad as ct,bs as Gr,cJ as Ua,az as Ha,cK as Ot,aX as Ut,b2 as Ba,c as Qr,g as Yr,aR as Jr,bp as Xr,cL as Zr,bl as Ht,cM as ei,cN as si,aT as ti,cO as ai,cP as ni,aa as ri,cQ as ii,cR as li,cS as Wa,cT as oi,cU as ci,cV as Bt,cW as di,cX as ps,cY as ui,cZ as mi,c_ as xi,c$ as gi,d0 as hi,d1 as pi,d2 as ji,d3 as fi,d4 as Ka,aD as bi,at as ca}from"./main-5f5fee1d.js";import{h as Ga,n as vi,q as yi,o as wi,p as _i,A as _e,f as dt,F as Si,k as Ft,d as Oe,a as ki,u as Ni,c as Ci,D as ut,s as Fi,L as Wt,M as mt,i as zi,j as Ii,I as Ai}from"./dashboard-layout-63937ce3.js";import{S as js,B as Pi,a as da}from"./breadcrumb-ce641b60.js";import{$ as Qa,t as Ti,F as Ya,a as Ei}from"./formatted-bytes-5cd051d3.js";import{O as Di,u as Ja,a as Mi}from"./use-resume-subscription-91876a7e.js";import{A as Xa}from"./ArrowBack-4a3abf26.js";function Li(s,t){const a=Xs(t);return qi({filters:{...s,status:"pending"}},a).length}function ua(s,t){return s.findAll(t.filters).map(a=>t.select?t.select(a):a.state)}function qi(s={},t){const a=Xs(t).getMutationCache(),r=d.useRef(s),i=d.useRef();return i.current||(i.current=ua(a,s)),d.useEffect(()=>{r.current=s}),d.useSyncExternalStore(d.useCallback(l=>a.subscribe(()=>{const o=rr(i.current,ua(a,r.current));i.current!==o&&(i.current=o,ir.schedule(l))}),[a]),()=>i.current,()=>i.current)}function $i({className:s,isCompactMode:t=!1,matchDescendants:a,menuName:r,bottomContent:i,isOverlayMode:l,variant:o="withNavbar",customMenuRender:c}){const m=lr();return e.jsxs("div",{className:v(s,t?"px-6 pt-6":"px-12 pt-26","relative flex flex-col gap-20 overflow-y-auto overflow-x-hidden bg-alt pb-16 text-sm font-medium text-muted",l&&"border-r"),children:[o==="withoutNavbar"&&e.jsxs(d.Fragment,{children:[e.jsx(or,{color:m?"light":"dark",logoType:t?"compact":"wide",className:t?"mx-auto mt-12":"mb-12",size:t?"h-34 w-34":"h-36"}),e.jsx(Ri,{})]}),e.jsx(cr,{matchDescendants:a,menu:r,orientation:"vertical",onlyShowIcons:t,iconSize:t?"md":"sm",gap:t?"gap-2":"gap-4",itemClassName:({isActive:x})=>Za({isActive:x,isCompactMode:t}),children:c}),e.jsx("div",{className:v("mt-auto space-y-2",t&&"mx-auto"),children:i})]})}function Ri(){const{leftSidenavStatus:s,setLeftSidenavStatus:t,name:a}=d.useContext(Ga),r=()=>{const i=s==="open"?"compact":"open";t(i),Pa(`${a}.sidenav.compact`,i==="compact")};return e.jsx("button",{className:v("fixed bottom-180 z-10 flex select-none appearance-none items-center justify-center rounded-full border bg align-middle outline-none transition-[left,color,shadow] duration-200 hover:text-primary focus-visible:ring",s==="open"?"left-[212px]":"left-48"),onClick:()=>r(),children:s==="open"?e.jsx(Zs,{size:"sm"}):e.jsx(Ps,{size:"sm"})})}const Vi=d.forwardRef(({elementType:s="button",isCompact:t=!1,children:[a,r,...i],className:l,target:o,to:c,...m},x)=>{const h=s;return e.jsxs(h,{ref:x,...m,target:o,to:c,className:v(l,"flex",t?"gap-2":"gap-8",Za({isActive:!1,isCompactMode:t})),children:[d.cloneElement(a,{size:t?"md":"sm"}),!t&&r,i]})});function Za({isActive:s,isCompactMode:t}){return v("rounded-button",t?"w-48 h-48 items-center justify-center":"w-full py-12 px-16 block justify-start",s?"bg-primary/6 text-primary font-semibold":"hover:bg-hover")}const Oi=E(e.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41z"}),"KeyboardArrowUpOutlined");function Ui(s){const{version:t}=de(),{isMobileMode:a,leftSidenavStatus:r}=d.useContext(Ga),i=a||r==="compact"||!1,l=e.jsxs(d.Fragment,{children:[s.variant==="withoutNavbar"&&e.jsxs(d.Fragment,{children:[e.jsx(Hi,{isCompact:i}),e.jsx(Bi,{isCompact:i})]}),s.isCompactMode?void 0:e.jsx("span",{children:e.jsx("div",{className:"mt-16 overflow-hidden text-ellipsis whitespace-nowrap px-16 text-xs",children:e.jsx(n,{message:"Version: :number",values:{number:t}})})})]});return e.jsx($i,{...s,matchDescendants:o=>o==="/admin",menuName:"admin-sidebar",bottomContent:l})}function Hi({isCompact:s}){const{user:t}=et(),a=!!(t!=null&&t.unread_notifications_count);return e.jsxs(A,{type:"popover",placement:"top",children:[e.jsxs(Vi,{isCompact:s,className:"relative",children:[e.jsx(dr,{}),e.jsx(n,{message:"Notifications"}),a?e.jsx(ur,{children:t==null?void 0:t.unread_notifications_count}):void 0]}),e.jsx(mr,{})]})}function Bi({isCompact:s,avatar:t}){const{user:a}=et();if(!a)return null;const r=t||gr,i=e.jsx(r,{user:a,size:"w-32 h-32"});return e.jsx(xr,{placement:"top",children:s?e.jsx("button",{"aria-label":"toggle authentication menu",className:"flex h-48 w-48 items-center justify-center rounded-button hover:bg-hover",children:i}):e.jsxs("button",{className:"flex w-full items-center rounded-button px-12 py-8 hover:bg-hover",children:[i,e.jsx("span",{className:"ml-8 block min-w-0 overflow-x-hidden overflow-ellipsis whitespace-nowrap text-sm",children:a.name}),e.jsx(Oi,{size:"xs",className:"ml-auto block"})]})})}function Wi(){return Ae({queryKey:["admin-setup-alerts"],queryFn:()=>Ki()})}function Ki(){return z.get("admin/setup-alerts").then(s=>s.data)}function Gi(){const t=ss()?"withNavbar":"withoutNavbar";return e.jsxs(vi,{name:"admin",leftSidenavCanBeCompact:!0,className:"bg-alt",children:[t==="withNavbar"&&e.jsx(yi,{size:"sm",menuPosition:"admin-navbar"}),e.jsx(wi,{position:"left",size:"sm",children:e.jsx(Ui,{variant:"withoutNavbar"})}),e.jsx(_i,{children:e.jsxs("div",{className:v(t==="withoutNavbar"?"relative bg ring-divider dark:bg-alt md:mt-6 md:rounded-tl-md md:shadow-sm md:ring md:ring-1":"border-l bg dark:bg-alt"),children:[e.jsx(Qi,{}),e.jsx(Be,{})]})})]})}function Qi(){const{data:s}=Wi(),[t]=hr("admin-setup-alert-dismissed",null),a=!t||Date.now()-t.timestamp>864e5;return!(s!=null&&s.alerts.length)||!a?null:e.jsx("div",{className:"fixed left-24 right-24 top-24 z-10 mx-auto w-max max-w-[calc(100%-48px)] overflow-hidden rounded-panel bg shadow-md",children:e.jsx(Yi,{alert:s.alerts[0]})})}function Yi({alert:s}){const t=e.jsx("div",{dangerouslySetInnerHTML:{__html:s.description}});return e.jsx(js,{leadingIcon:e.jsx(Ta,{size:"xs",className:"text-danger"}),onClose:()=>{Pa("admin-setup-alert-dismissed",{timestamp:Date.now()})},title:s.title,description:t,color:"neutral"},s.title)}function Kt(s){var t;return{...s,defaultOperator:Y.between,control:{type:ge.DateRangePicker,defaultValue:((t=s.control)==null?void 0:t.defaultValue)||pr(jr[3].getRangeValue())}}}function Ge(s){return Kt({key:"created_at",label:u("Date created"),...s})}function ls(s){return Kt({key:"updated_at",label:u("Last updated"),...s})}const Ji=[{key:"email_verified_at",label:u("Email"),description:u("Email verification status"),defaultOperator:Y.ne,control:{type:ge.Select,defaultValue:"01",options:[{key:"01",label:u("is confirmed"),value:{value:null,operator:Y.ne}},{key:"02",label:u("is not confirmed"),value:{value:null,operator:Y.eq}}]}},Ge({description:u("Date user registered or was created")}),ls({description:u("Date user was last updated")}),{key:"subscriptions",label:u("Subscription"),description:u("Whether user is subscribed or not"),defaultOperator:Y.eq,control:{type:ge.Select,defaultValue:"01",options:[{key:"01",label:u("is subscribed"),value:{value:"*",operator:Y.has}},{key:"02",label:u("is not subscribed"),value:{value:"*",operator:Y.doesntHave}}]}}];function Ne({title:s,headerContent:t,headerItemsAlign:a="items-end",className:r,padding:i,variant:l,...o}){const c=d.useId();return e.jsxs("div",{className:v(i??l==="fullPage"?"p-0":"p-12 md:p-24",r),children:[s&&e.jsxs("div",{className:v(l==="fullPage"?"mb-6 border-b px-24 py-12":"mb-16",t&&`flex ${a} gap-4`),children:[e.jsx(Ts,{children:s}),e.jsx("h1",{className:"text-3xl font-light first:capitalize",id:c,children:s}),t]}),e.jsx("div",{className:v(l==="fullPage"?"p-12 md:p-24":"p-0"),children:e.jsx(Ea,{...o,tableDomProps:{"aria-labelledby":s?c:void 0}})})]})}function Xi(){const{endpoint:s,selectedRows:t,setSelectedRows:a,baseQueryKey:r}=st();return L({mutationFn:()=>Zi(s,t),onSuccess:async()=>{await M.invalidateQueries({queryKey:K(s,void 0,r)}),q(u("Deleted [one 1 record|other :count records]",{values:{count:t.length}})),a([])},onError:i=>J(i,u("Could not delete records"))})}function Zi(s,t){return z.delete(`${s}/${t.join(",")}`).then(a=>a.data)}function os(){return e.jsxs(A,{type:"modal",children:[e.jsx(j,{variant:"flat",color:"danger",className:"ml-auto",children:e.jsx(n,{message:"Delete"})}),e.jsx(el,{})]})}function el(){const s=Xi(),{selectedRows:t,setSelectedRows:a}=st(),{close:r}=G();return e.jsx(he,{isLoading:s.isPending,title:e.jsx(n,{message:"Delete [one 1 item|other :count items]?",values:{count:t.length}}),body:e.jsx(n,{message:"This will permanently remove the items and cannot be undone."}),confirm:e.jsx(n,{message:"Delete"}),isDanger:!0,onConfirm:()=>{s.mutate(void 0,{onSuccess:()=>r(),onError:i=>{fr(i,422)&&(a([]),r())}})}})}const Fs=""+new URL("team-de984127.svg",import.meta.url).href,Pe=O.forwardRef(({children:s,to:t,elementType:a,onClick:r,href:i,download:l,icon:o,disabled:c},m)=>ss()?e.jsx(k,{ref:m,variant:"flat",color:"primary",className:"flex-shrink-0",size:"sm",to:t,href:i,download:l,elementType:a,onClick:r,disabled:c,children:o||e.jsx(_e,{})}):e.jsx(j,{ref:m,startIcon:o||e.jsx(_e,{}),variant:"flat",color:"primary",size:"sm",to:t,href:i,download:l,elementType:a,onClick:r,disabled:c,children:s}));function sl(s){return L({mutationFn:t=>tl(s,t),onError:t=>J(t)})}function tl(s,t){return z.post(s,t).then(a=>a.data)}function al(){const{close:s}=G();return e.jsxs(X,{children:[e.jsx(se,{children:e.jsx(n,{message:"Csv export"})}),e.jsx(ee,{children:e.jsx(n,{message:`Your request is being processed. We'll email you when the report is ready to download. In
            certain cases, it might take a little longer, depending on the number of items beings
            exported and the volume of activity.`})}),e.jsx(ne,{children:e.jsx(j,{variant:"flat",color:"primary",onClick:s,children:e.jsx(n,{message:"Got it"})})})]})}function en({endpoint:s,payload:t}){const[a,r]=d.useState(!1),i=sl(s);return e.jsxs(d.Fragment,{children:[e.jsx(k,{variant:"outline",color:"primary",size:"sm",className:"flex-shrink-0",disabled:i.isPending,onClick:()=>{i.mutate(t,{onSuccess:l=>{l.downloadPath?dt(l.downloadPath):r(!0)}})},children:e.jsx(Si,{})}),e.jsx(A,{type:"modal",isOpen:a,onOpenChange:r,children:e.jsx(al,{})})]})}function Qe({image:s,label:t,description:a,className:r,labelClassName:i,avatarSize:l="md",alwaysShowAvatar:o,avatarLabel:c,avatarCircle:m}){return e.jsxs("div",{className:v("flex items-center gap-12",r),children:[(s||o)&&e.jsx(tt,{size:l,className:"flex-shrink-0",src:s,label:c??t,fallback:"initials",circle:m}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[e.jsx("div",{className:v(i,"overflow-hidden overflow-ellipsis"),children:t}),a&&e.jsx("div",{className:"overflow-hidden overflow-ellipsis text-xs text-muted",children:a})]})]})}const sn=E(e.jsx("path",{d:"m20 17.17-3.37-3.38c.64.22 1.23.48 1.77.76.97.51 1.58 1.52 1.6 2.62zm1.19 4.02-1.41 1.41-2.61-2.6H4v-2.78c0-1.12.61-2.15 1.61-2.66 1.29-.66 2.87-1.22 4.67-1.45L1.39 4.22 2.8 2.81l18.39 18.38zM15.17 18l-3-3H12c-2.37 0-4.29.73-5.48 1.34-.32.16-.52.5-.52.88V18h9.17zM12 6c1.1 0 2 .9 2 2 0 .86-.54 1.59-1.3 1.87l1.48 1.48C15.28 10.64 16 9.4 16 8c0-2.21-1.79-4-4-4-1.4 0-2.64.72-3.35 1.82l1.48 1.48C10.41 6.54 11.14 6 12 6z"}),"PersonOffOutlined");function nl(s,t){return L({mutationFn:a=>rl(t,a),onSuccess:async()=>{q(u("User suspended")),await M.invalidateQueries({queryKey:["users"]})},onError:a=>ve(a,s)})}function rl(s,t){return z.post(`users/ban/${s}`,t).then(a=>a.data)}function tn({user:s}){const{trans:t}=R(),{close:a,formId:r}=G(),i=I({defaultValues:{permanent:!0}}),l=i.watch("permanent"),o=nl(i,s.id);return e.jsxs(X,{children:[e.jsx(se,{children:e.jsx(n,{message:"Suspend “:name“",values:{name:s.name}})}),e.jsx(ee,{children:e.jsxs(re,{id:r,form:i,onSubmit:c=>o.mutate(c,{onSuccess:()=>a(!0)}),children:[e.jsx(Ft,{name:"ban_until",label:e.jsx(n,{message:"Suspend until"}),disabled:l}),e.jsx(D,{name:"permanent",className:"mt-12",children:e.jsx(n,{message:"Permanent"})}),e.jsx(p,{className:"mt-24",name:"comment",inputElementType:"textarea",maxLength:250,label:e.jsx(n,{message:"Reason"}),placeholder:t(u("Optional"))})]})}),e.jsxs(ne,{children:[e.jsx(j,{onClick:()=>a(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{form:r,variant:"flat",color:"primary",type:"submit",disabled:o.isPending,children:e.jsx(n,{message:"Suspend"})})]})]})}function an(s){return L({mutationFn:()=>il(s),onSuccess:()=>{q(u("User unsuspended")),M.invalidateQueries({queryKey:["users"]})},onError:t=>J(t)})}function il(s){return z.delete(`users/unban/${s}`).then(t=>t.data)}function ll(){return L({mutationFn:s=>ol(s),onSuccess:async s=>{q(u(`Impersonating User "${s.user.name}"`)),window.location.href="/"},onError:s=>J(s)})}function ol(s){return z.post(`admin/users/impersonate/${s.userId}`,s).then(t=>t.data)}const ma=[{key:"name",allowsSorting:!0,sortingKey:"email",width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(n,{message:"User"}),body:s=>e.jsx(Qe,{image:s.image,label:s.name,description:s.email,alwaysShowAvatar:!0,avatarCircle:!0})},{key:"roles",header:()=>e.jsx(n,{message:"Roles"}),body:s=>{var t;return e.jsx(br,{radius:"rounded",size:"xs",children:(t=s==null?void 0:s.roles)==null?void 0:t.map(a=>e.jsx(at,{selectable:!0,children:e.jsx(U,{className:v("capitalize"),target:"_blank",to:`/admin/roles/${a.id}/edit`,children:e.jsx(n,{message:a.name})})},a.id))})}},{key:"subscribed",header:()=>e.jsx(n,{message:"Subscribed"}),width:"w-96",body:s=>{var t;return(t=s.subscriptions)!=null&&t.filter(a=>a.valid).length?e.jsx(Gs,{className:"text-positive icon-md"}):e.jsx(De,{className:"text-danger icon-md"})}},{key:"banned_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Suspended"}),width:"w-96",body:s=>s.banned_at?e.jsx(Gs,{className:"text-danger icon-md"}):null},{key:"last_login",width:"w-110",header:()=>e.jsx(n,{message:"Last active"}),body:s=>s.last_login?e.jsx("time",{children:e.jsx(me,{date:s.last_login.created_at})}):"-"},{key:"createdAt",allowsSorting:!0,width:"w-110",header:()=>e.jsx(n,{message:"Created at"}),body:s=>e.jsx("time",{children:e.jsx(me,{date:s.created_at})})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),width:"w-128 flex-shrink-0",hideHeader:!0,align:"end",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(U,{to:`${s.id}/details`,children:e.jsx(Q,{label:e.jsx(n,{message:"Edit user"}),children:e.jsx(k,{size:"md",children:e.jsx(We,{})})})}),s.banned_at?e.jsx(cl,{user:s}):e.jsxs(A,{type:"modal",children:[e.jsx(Q,{label:e.jsx(n,{message:"Suspend user"}),children:e.jsx(k,{size:"md",children:e.jsx(sn,{})})}),e.jsx(tn,{user:s})]}),e.jsx(dl,{user:s})]})}];function cl({user:s}){const t=an(s.id);return e.jsxs(A,{type:"modal",onClose:a=>{a&&t.mutate()},children:[e.jsx(Q,{label:e.jsx(n,{message:"Remove suspension"}),children:e.jsx(k,{size:"md",color:"danger",children:e.jsx(sn,{})})}),e.jsx(he,{isDanger:!0,title:e.jsx(n,{message:"Suspend “:name“",values:{name:s.name}}),body:e.jsx(n,{message:"Are you sure you want to remove suspension from this user?"}),confirm:e.jsx(n,{message:"Unsuspend"})})]})}function dl({user:s}){const t=ll();return e.jsxs(A,{type:"modal",children:[e.jsx(Q,{label:e.jsx(n,{message:"Login as user"}),children:e.jsx(k,{size:"md",children:e.jsx(vr,{})})}),e.jsx(he,{title:e.jsx(n,{message:"Login as “:name“",values:{name:s.name}}),isLoading:t.isPending,body:e.jsx(n,{message:"Are you sure you want to login as this user?"}),confirm:e.jsx(n,{message:"Login"}),onConfirm:()=>{t.mutate({userId:s.id})}})]})}function ul(s){const t=ce();return L({mutationFn:a=>ml(a),onSuccess:()=>{q(u("User created")),M.invalidateQueries({queryKey:K("users")}),t("/admin/users")},onError:a=>ve(a,s)})}function ml(s){return s.roles&&(s.roles=s.roles.map(t=>t.id)),z.post("users",s).then(t=>t.data)}function xl(){const s=I(),t=ul(s),a=ce(),{close:r,formId:i}=G();return e.jsxs(X,{children:[e.jsx(se,{children:e.jsx(n,{message:"Create user"})}),e.jsx(ee,{children:e.jsxs(re,{id:i,form:s,onSubmit:l=>{t.mutate(l,{onSuccess:o=>{r(),a(`${o.user.id}/details`,{replace:!0})}})},children:[e.jsx(ms,{children:e.jsx(xs,{className:"mb-24",name:"image",diskPrefix:"avatars",label:e.jsx(n,{message:"Avatar"}),showRemoveButton:!0})}),e.jsx(p,{required:!0,className:"mb-24",name:"email",type:"email",label:e.jsx(n,{message:"Email"})}),e.jsx(p,{className:"mb-24",name:"first_name",label:e.jsx(n,{message:"First name"})}),e.jsx(p,{className:"mb-24",name:"last_name",label:e.jsx(n,{message:"Last name"})}),e.jsx(p,{required:!0,name:"password",type:"password",label:e.jsx(n,{message:"Password"})})]})}),e.jsxs(ne,{children:[e.jsx(j,{variant:"outline",onClick:()=>r(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",type:"submit",form:i,disabled:t.isPending,children:e.jsx(n,{message:"Create"})})]})]})}function gl(){const{billing:s}=de(),t=s.enable?ma:ma.filter(a=>a.key!=="subscribed");return e.jsx(d.Fragment,{children:e.jsx(Ne,{endpoint:"users",title:e.jsx(n,{message:"Users"}),filters:Ji,columns:t,actions:e.jsx(hl,{}),queryParams:{with:"subscriptions,bans,lastLogin"},selectedActions:e.jsx(os,{}),emptyStateMessage:e.jsx(be,{image:Fs,title:e.jsx(n,{message:"No users have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching users"})})})})}function hl(){return e.jsxs(d.Fragment,{children:[e.jsx(en,{endpoint:"users/csv/export"}),e.jsxs(A,{type:"modal",children:[e.jsx(Pe,{children:e.jsx(n,{message:"Add new user"})}),e.jsx(xl,{})]})]})}const pl=s=>(t,a,r)=>{const i=r.subscribe;return r.subscribe=(o,c,m)=>{let x=o;if(c){const h=(m==null?void 0:m.equalityFn)||Object.is;let f=o(r.getState());x=b=>{const y=o(b);if(!h(f,y)){const w=f;c(f=y,w)}},m!=null&&m.fireImmediately&&c(f,f)}return i(x)},s(t,a,r)},jl=pl,fl={preview:{defaultRoute:"/",navigationRoutes:[]},sections:{general:{label:u("General"),position:1},themes:{label:u("Themes"),position:2},menus:{label:u("Menus"),position:3,config:{availableRoutes:["/","/login","/register","/contact","/pricing","/account-settings","/admin","/admin/appearance","/admin/settings","/admin/plans","/admin/subscriptions","/admin/users","/admin/roles","/admin/pages","/admin/tags","/admin/files","/admin/localizations","/admin/ads","/admin/logs","/admin/settings/authentication","/admin/settings/branding","/admin/settings/cache","/admin/settings/providers","/api-docs"],positions:["admin-navbar","admin-sidebar","custom-page-navbar","auth-page-footer","auth-dropdown","account-settings-page","billing-page","checkout-page-navbar","checkout-page-footer","pricing-table-page","contact-us-page","notifications-page","footer","footer-secondary"]}},"custom-code":{label:u("Custom Code"),position:4},"seo-settings":{label:u("SEO Settings"),position:5}}},zs=yr.all([fl,wr]);let nn=()=>{};const bl=new Promise(s=>nn=s),Ye=_r()(jl((s,t)=>({defaults:null,iframeWindow:null,isDirty:!1,setIsDirty:a=>{s(()=>({isDirty:a}))},config:zs,setDefaults:a=>{s({defaults:{...a}})},setIframeWindow:a=>{s({iframeWindow:a}),a.addEventListener("message",r=>{r.data.source==="be-appearance-preview"&&r.data.type==="appLoaded"&&nn()})},preview:{setValues:a=>{const r=t().iframeWindow;Ss(r,{type:"setValues",values:a})},setThemeFont:a=>{const r=t().iframeWindow;Ss(r,{type:"setThemeFont",value:a})},setThemeValue:(a,r)=>{const i=t().iframeWindow;Ss(i,{type:"setThemeValue",name:a,value:r})},setActiveTheme:a=>{const r=t().iframeWindow;Ss(r,{type:"setActiveTheme",themeId:a})},setCustomCode:(a,r)=>{const i=t().iframeWindow;Ss(i,{type:"setCustomCode",mode:a,value:r})},setHighlight:a=>{var l;let r=null;const i=(l=t().iframeWindow)==null?void 0:l.document;i&&a&&(r=i.querySelector(a)),r&&requestAnimationFrame(()=>{r&&r.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})}}})));function Ss(s,t){s&&s.postMessage({source:"be-appearance-editor",...t},"*")}function $(){return Ye.getState()}function xt(){return Ae(vl)}const vl={queryKey:["fetchAdminSettings"],queryFn:()=>yl(),staleTime:1/0,select:Ys};function yl(){return z.get("settings").then(s=>s.data)}function Ys(s){for(const t in s)Array.isArray(s[t])?s[t]=s[t].map(Ys):typeof s[t]=="object"?s[t]=Ys(s[t]):typeof s[t]=="number"?s[t]=s[t].toString():s[t]==null&&(s[t]="");return s}function rn(){return Ae({queryKey:["admin/appearance/values"],queryFn:()=>wl(),staleTime:1/0,select:Ys})}function qs(){const{data:s}=rn();return s.values}function wl(){return z.get("admin/appearance/values").then(s=>s.data)}function _l(){var o,c;const{pathname:s}=Me(),a=(c=(o=Nr().at(-1))==null?void 0:o.handle)==null?void 0:c.previewRoute,r=s.split("/")[3],i=zs.sections[r],l=(i==null?void 0:i.previewRoute)||zs.preview.defaultRoute||"/";return a?`${l}/${a}`:l}function Sl(){const{isAppearanceEditorActive:s}=Sr(),{data:t}=rn(),{base_url:a}=de(),r=d.useRef(null),i=_l();if(d.useEffect(()=>{t!=null&&t.defaults&&!$().defaults&&$().setDefaults(t.defaults)},[t]),d.useEffect(()=>{r.current&&$().setIframeWindow(r.current.contentWindow)},[]),s)return e.jsx(kr,{to:"/admin"});const l=new URL(i&&i!=="/"?`${a}/${i}`:`${a}`);return l.searchParams.append("appearanceEditor","true"),e.jsxs("div",{className:"h-screen items-center md:flex",children:[e.jsx(Ts,{children:e.jsx(n,{message:"Appearance"})}),e.jsx(kl,{values:t==null?void 0:t.values}),e.jsx("div",{className:"relative h-full flex-auto",children:e.jsx("iframe",{ref:r,className:"h-full w-full max-md:hidden",src:l.toString()},i)})]})}function kl({values:s}){const t=e.jsx("div",{className:"flex h-full flex-auto items-center justify-center",children:e.jsx(Es,{isIndeterminate:!0,"aria-label":"Loading editor"})});return e.jsx("div",{className:"relative z-10 h-full w-full border-r bg shadow-lg @container md:w-320",children:s?e.jsx(Be,{}):t})}const xe=d.forwardRef(({startIcon:s,children:t,className:a,description:r,endIcon:i,...l},o)=>e.jsxs(nt,{ref:o,display:"flex",className:v("relative mb-10 h-54 w-full items-center gap-10 rounded-input border bg px-14 text-sm hover:bg-hover",a,l.disabled&&"pointer-events-none opacity-50"),variant:null,...l,children:[s,e.jsxs("span",{className:"block min-w-0",children:[e.jsx("span",{className:"block",children:t}),r&&e.jsx("span",{className:"block overflow-hidden overflow-ellipsis whitespace-nowrap text-xs text-muted",children:r})]}),e.jsx("div",{className:"ml-auto",children:i??e.jsx(Ps,{"aria-hidden":!0,className:"text-muted icon-sm"})})]}));function Nl(){const s=ts(),{trans:t}=R(),{fields:a,append:r}=as({name:"settings.menus",keyName:"key"});return e.jsxs(d.Fragment,{children:[e.jsx("div",{children:a.map((i,l)=>e.jsx(xe,{to:`${l}`,elementType:U,children:i.name},i.key))}),e.jsx("div",{className:"text-right",children:e.jsx(j,{variant:"outline",color:"primary",startIcon:e.jsx(_e,{}),size:"xs",onClick:()=>{const i=Dt(10);r({name:t(u("New menu :number",{values:{number:a.length+1}})),id:i,positions:[],items:[]}),s(`${a.length}`)},children:e.jsx(n,{message:"Create menu"})})})]})}function ln(){const s=zs.sections.menus.config;return s?s.availableRoutes.map(t=>({id:t,label:t,action:t,type:"route",target:"_self"})):[]}function on(s){return s&&s.charAt(0).toUpperCase()+s.slice(1)}function cn({title:s=e.jsx(n,{message:"Add menu item"})}){const{data:t}=Se(["menuItemCategories"]),a=(t==null?void 0:t.menuItemCategories)||[],r=ln();return e.jsxs(X,{size:"sm",children:[e.jsx(se,{children:s}),e.jsx(ee,{children:e.jsxs(ns,{variant:"outline",children:[e.jsx(ke,{label:e.jsx(n,{message:"Link"}),bodyClassName:"max-h-240 overflow-y-auto",children:e.jsx(Cl,{})}),e.jsx(ke,{label:e.jsx(n,{message:"Route"}),bodyClassName:"max-h-240 overflow-y-auto",children:e.jsx(xa,{items:r})}),a.map(i=>e.jsx(ke,{label:e.jsx(n,{message:i.name}),children:e.jsx(xa,{items:i.items})},i.name))]})})]})}function Cl(){const s=I({defaultValues:{id:Dt(6),type:"link",target:"_blank"}}),{close:t}=G();return e.jsxs(re,{form:s,onSubmit:a=>{t(a)},children:[e.jsx(p,{required:!0,name:"label",label:e.jsx(n,{message:"Label"}),className:"mb-20"}),e.jsx(p,{required:!0,type:"url",name:"action",placeholder:"https://",label:e.jsx(n,{message:"Url"}),className:"mb-20"}),e.jsx("div",{className:"text-right",children:e.jsx(j,{type:"submit",variant:"flat",color:"primary",size:"xs",children:e.jsx(n,{message:"Add to menu"})})})]})}function xa({items:s}){const{close:t}=G();return e.jsx(Da,{children:s.map(a=>e.jsx(Ma,{startIcon:e.jsx(_e,{size:"sm"}),onSelected:()=>{if(a.label){const r=a.label.split("/").pop();a.label=r?on(r):a.label,a.id=Dt(6)}a.target||(a.target="_self"),t(a)},children:a.label},a.id))})}const Fl=E(e.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"DragIndicatorOutlined"),zl=""+new URL("dropdown-menu-c9b3bd6a.svg",import.meta.url).href,Il={onDragStart:()=>{},onDragEnter:()=>{},onDragOver:({e:s,ref:t,item:a,sortSession:r,onDropPositionChange:i})=>{var m;const l=r.dropPosition;let o=null;const c=(m=Oe.get(a))==null?void 0:m.rect;if(c){const x=c.top+c.height/2;s.clientY<=x?o="before":s.clientY>=x&&(o="after")}if(o!==l){const x=r.sortables.indexOf(a);if(r.dropPosition=o,i==null||i(r.dropPosition),ga(r),t.current)if(r.dropPosition==="after")_t(t.current,"bottom",r);else if(x===0)_t(t.current,"top",r);else{const b=r.sortables[x-1],y=Oe.get(b);y!=null&&y.ref.current&&_t(y.ref.current,"bottom",r)}const h=r.sortables.indexOf(a);if(r.activeIndex===h){r.finalIndex=r.activeIndex;return}(x>r.activeIndex?"after":"before")==="after"?r.finalIndex=r.dropPosition==="before"?h-1:h:r.finalIndex=r.dropPosition==="after"?h+1:h}},onDragEnd:s=>{ga(s)}};function ga(s){s!=null&&s.linePreviewEl&&(s.linePreviewEl.style.borderBottomColor="",s.linePreviewEl.style.borderTopColor="",s.linePreviewEl=void 0)}function _t(s,t,a){const r="rgb(var(--be-primary))";t==="top"?s.style.borderTopColor=r:s.style.borderBottomColor=r,a&&(a.linePreviewEl=s)}function dn(s,t,a){const r=Qs(t,0,s.length-1),i=Qs(a,0,s.length-1);if(r===i)return s;const l=s[r],o=i<r?-1:1;for(let c=r;c!==i;c+=o)s[c]=s[c+o];return s[i]=l,s}function un(s,t,a){const r=s.slice();return r.splice(a<0?r.length+a:a,0,r.splice(t,1)[0]),r}const Al="transform 0.2s cubic-bezier(0.2, 0, 0, 1)",Pl={onDragStart:s=>{s.sortables.forEach((t,a)=>{const r=Oe.get(t);r!=null&&r.ref.current&&(r.ref.current.style.transition=Al,(s==null?void 0:s.activeIndex)===a&&(r.ref.current.style.opacity="0.4"))})},onDragEnter:(s,t,a)=>{dn(s.sortables,a,t);const r=s.sortables.map(i=>{var l;return(l=Oe.get(i))==null?void 0:l.rect});s.sortables.forEach((i,l)=>{if(!s)return;const o=un(r,t,s.activeIndex),c=r[l],m=o[l],x=Oe.get(i);if(x!=null&&x.ref.current&&m&&c){const h=m.left-c.left,f=m.top-c.top;x.ref.current.style.transform=`translate3d(${h}px, ${f}px, 0)`}}),s.finalIndex=t},onDragOver:()=>{},onDragEnd:s=>{s.sortables.forEach(t=>{const a=Oe.get(t);a!=null&&a.ref.current&&(a.ref.current.style.transform="",a.ref.current.style.transition="",a.ref.current.style.opacity="",a.ref.current.style.zIndex="")})}},Tl={onDragStart:()=>{},onDragOver:()=>{},onDragEnter:(s,t,a)=>{var i;const r=(i=Oe.get(s.sortables[a]))==null?void 0:i.ref.current;r&&(El(r,a,t),dn(s.sortables,a,t),s.finalIndex=t)},onDragEnd:()=>{}};function El(s,t,a){const r=s.parentElement;if(a<0)r.prepend(s);else{t>-1&&t<=a&&a++;const i=r.children.item(a);i?i.before(s):r.append(s)}}let V=null;const Bs={line:Il,liveSort:Pl,moveNode:Tl};function Dl({item:s,items:t,type:a,ref:r,onSortEnd:i,onSortStart:l,onDragEnd:o,preview:c,disabled:m,onDropPositionChange:x,strategy:h="liveSort"}){d.useEffect(()=>{V&&V.sortables.length!==t.length&&(V.sortables=[...t],V.activeIndex=t.indexOf(s))},[t,s]);const{draggableProps:f,dragHandleRef:b}=ki({id:s,ref:r,type:a,preview:c,disabled:m,onDragStart:()=>{var w;V={sortables:[...t],activeSortable:s,activeIndex:t.indexOf(s),finalIndex:t.indexOf(s),dropPosition:null,ref:r,scrollParent:r.current?Cr(r.current):void 0,scrollListener:()=>{Ci(Oe)}},Bs[h].onDragStart(V),l==null||l(),(w=V.scrollParent)==null||w.addEventListener("scroll",V.scrollListener)},onDragEnd:()=>{var w;V&&(V.dropPosition=null,x==null||x(V.dropPosition),V.activeIndex!==V.finalIndex&&(i==null||i(V.activeIndex,V.finalIndex)),(w=V.scrollParent)==null||w.removeEventListener("scroll",V.scrollListener),Bs[h].onDragEnd(V),o==null||o(),V=null)},getData:()=>{}}),{droppableProps:y}=Ni({id:s,ref:r,types:[a],disabled:m,allowDragEventsFromItself:!0,onDragOver:(w,S)=>{V&&Bs[h].onDragOver({e:S,ref:r,item:s,sortSession:V,onDropPositionChange:x})},onDragEnter:()=>{if(!V)return;const w=V.sortables.indexOf(s),S=V.sortables.indexOf(V.activeSortable);Bs[h].onDragEnter(V,w,S)},onDragLeave:()=>{V&&(V.dropPosition=null,x==null||x(V.dropPosition))}});return{sortableProps:{...rs(f,y)},dragHandleRef:b}}function Ml(){const{menuIndex:s}=ie(),t=ts(),{getValues:a}=N(),r=`settings.menus.${s}`,i=a(r);return d.useEffect(()=>{i?$().preview.setHighlight(`[data-menu-id="${i.id}"]`):t("/admin/appearance/menus")},[t,i]),i?e.jsx(Ll,{menuFormPath:r}):null}function Ll({menuFormPath:s}){const{site:{has_mobile_app:t}}=de(),a=Ye(i=>{var l;return(l=i.config)==null?void 0:l.sections.menus.config}),r=d.useMemo(()=>{const i=[...a==null?void 0:a.positions];return t&&i.push("mobile-app-about"),i.map(l=>({key:l,name:l.replaceAll("-"," ")}))},[a,t]);return e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"mb-30 border-b pb-30",children:[e.jsx(p,{name:`${s}.name`,label:e.jsx(n,{message:"Menu name"}),className:"mb-20",autoFocus:!0}),e.jsx(rt,{chipSize:"sm",name:`${s}.positions`,valueKey:"id",label:e.jsx(n,{message:"Menu positions"}),description:e.jsx(n,{message:"Where should this menu appear on the site"}),children:r.map(i=>e.jsx(g,{value:i.key,capitalizeFirst:!0,children:i.name},i.key))})]}),e.jsx(ql,{formPath:`${s}.items`}),e.jsx("div",{className:"text-right",children:e.jsx($l,{})})]})}function ql({formPath:s}){const t=ts(),a=N(),r=Ds({control:a.control,name:s});return e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"flex flex-shrink-0 items-center justify-between gap-16",children:[e.jsx(n,{message:"Menu items"}),e.jsxs(A,{type:"popover",placement:"right",offset:20,onClose:i=>{i&&(a.setValue(s,[...r,i],{shouldDirty:!0}),t(`${r.length}`))},children:[e.jsx(j,{variant:"outline",color:"primary",size:"xs",startIcon:e.jsx(_e,{}),children:e.jsx(n,{message:"Add"})}),e.jsx(cn,{})]})]}),e.jsxs("div",{className:"mt-20 flex-shrink-0",children:[r.map((i,l)=>e.jsx(Rl,{item:i,items:r,index:l,onSortEnd:(o,c)=>{a.setValue(s,un(r,o,c),{shouldDirty:!0})}},i.id)),r.length?null:e.jsx(Mt,{size:"xs",className:"my-40",image:e.jsx(Lt,{src:zl}),title:e.jsx(n,{message:"No menu items yet"}),description:e.jsx(n,{message:"Click “add“ button to start adding links, pages, routes and other items to this menu. "})})]})]})}function $l(){const s=ts(),t=ie(),a=parseInt(t.menuIndex),r=N(),i="settings.menus",l=Ds({control:r.control,name:i}),o=l[a];return o?e.jsxs(A,{type:"modal",onClose:c=>{c&&(r.setValue(i,l.filter((m,x)=>x!=a),{shouldDirty:!0}),s("/admin/appearance/menus"))},children:[e.jsx(j,{variant:"outline",color:"danger",size:"xs",startIcon:e.jsx(ut,{}),children:e.jsx(n,{message:"Delete menu"})}),e.jsx(he,{isDanger:!0,title:e.jsx(n,{message:"Delete menu"}),body:e.jsx(n,{message:"Are you sure you want to delete “:name“?",values:{name:o.name}}),confirm:e.jsx(n,{message:"Delete"})})]}):null}function Rl({item:s,items:t,index:a,onSortEnd:r}){const i=d.useRef(null),{sortableProps:l,dragHandleRef:o}=Dl({item:s,items:t,type:"menuEditorSortable",ref:i,onSortEnd:r,strategy:"liveSort"}),c=s.icon&&La(s.icon),m=e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted",children:[c&&e.jsx(c,{size:"sm"}),"(",e.jsx(n,{message:"No label..."}),")"]});return e.jsx(d.Fragment,{children:e.jsx(xe,{elementType:U,to:`${a}`,ref:i,...l,children:e.jsxs("div",{className:"flex items-center gap-10",children:[e.jsx(k,{ref:o,size:"sm",children:e.jsx(Fl,{className:"text-muted hover:cursor-move"})}),e.jsx("div",{children:s.label||m})]})})})}const Vl=O.forwardRef(({valueListKey:s="permissions",...t},a)=>{const{data:r}=Se([s]),i=(r==null?void 0:r.permissions)||(r==null?void 0:r.workspacePermissions),[l,o]=it(t.value,[],t.onChange),[c,m]=d.useState(!1);if(!i)return null;const x=mn(i,l,c),h=f=>{const b=[...l],y=b.findIndex(w=>w.id===f.id);y>-1&&b.splice(y,1,f),o(b)};return e.jsxs(d.Fragment,{children:[e.jsx(ns,{variant:"outline",ref:a,children:x.map(({groupName:f,items:b,anyChecked:y})=>e.jsx(ke,{label:e.jsx(n,{message:Qt(f)}),startIcon:y?e.jsx(Fr,{size:"sm"}):void 0,children:e.jsx(Da,{children:b.map(w=>{const S=l.findIndex(F=>F.id===w.id),_=S>-1;return e.jsxs("div",{children:[e.jsx(Ma,{onSelected:()=>{if(_){const F=[...l];F.splice(S,1),o(F)}else o([...l,w])},endSection:e.jsx(Ct,{tabIndex:-1,checked:_,onChange:()=>{}}),description:e.jsx(n,{message:w.description}),children:e.jsx(n,{message:w.display_name||w.name})}),_&&e.jsx(Ol,{permission:w,onChange:h})]},w.id)})})},f))}),e.jsx(Ct,{className:"mt-30",checked:c,onChange:f=>{m(f.target.checked)},children:e.jsx(n,{message:"Show advanced permissions"})})]})});function Ol({permission:s,onChange:t}){var r;if(!((r=s==null?void 0:s.restrictions)!=null&&r.length))return null;const a=(i,l)=>{const o=zr(s,c=>{const m=c.restrictions.find(x=>x.name===i);m&&(m.value=l)});t==null||t(o)};return e.jsx("div",{className:"px-40 py-20",children:s.restrictions.map((i,l)=>{const o=l===s.restrictions.length-1,c=e.jsx(n,{message:Qt(i.name)}),m=i.description?e.jsx(n,{message:i.description}):void 0;return i.type==="bool"?e.jsx(Ct,{description:m,className:v(!o&&"mb-30"),checked:!!i.value,onChange:x=>{a(i.name,x.target.checked)},children:c},i.name):e.jsx(Ke,{size:"sm",label:c,description:m,type:"number",className:v(!o&&"mb-30"),value:i.value||"",onChange:x=>{a(i.name,x.target.value===""?void 0:parseInt(x.target.value))}},i.name)})})}function Gt(s){const{field:{onChange:t,value:a=[],ref:r}}=gs({name:s.name}),i={onChange:t,value:a};return e.jsx(Vl,{ref:r,...rs(i,s)})}const Qt=s=>on(s.replace("_"," "));function mn(s,t,a){const r=[];return s.forEach(i=>{const l=t.findIndex(c=>c.id===i.id);if(!a&&i.advanced)return;let o=r.find(c=>c.groupName===i.group);if(o||(o={groupName:i.group,anyChecked:!1,items:[]},r.push(o)),l>-1){const c={...i,restrictions:Ul(i.restrictions,t[l].restrictions)};o.anyChecked=!0,o.items.push(c)}else o.items.push(i)}),r}function Ul(s,t){return s==null?void 0:s.map(a=>{const r=t.find(i=>i.name===a.name);return r?{...a,value:r.value}:a})}const St={grid:"flex flex-wrap gap-24",button:"flex flex-col items-center rounded hover:bg-hover h-90 aspect-square"},Hl=[...Array(60).keys()],Bl=O.lazy(()=>lt(()=>import("./icon-list-bbae727d.js"),["./icon-list-bbae727d.js","./main-5f5fee1d.js","./main-de7137c3.css","./dashboard-layout-63937ce3.js","./breadcrumb-ce641b60.js","./ArrowBack-4a3abf26.js","./GridView-55e7efd1.js","./CalendarToday-34e95105.js","./use-resume-subscription-91876a7e.js","./TaskAlt-912179d8.js","./TrendingFlat-ffd60f51.js","./formatted-bytes-5cd051d3.js"],import.meta.url));function Wl({onIconSelected:s}){const{trans:t}=R(),[a,r]=O.useState("");return e.jsxs("div",{className:"py-4",children:[e.jsx(Ke,{className:"mb-20",value:a,onChange:i=>{r(i.target.value)},placeholder:t({message:"Search icons..."})}),e.jsx(Ms,{mode:"wait",children:e.jsx(d.Suspense,{fallback:e.jsx(He.div,{...us,className:St.grid,children:Hl.map((i,l)=>e.jsx("div",{className:St.button,children:e.jsx(Z,{variant:"rect"})},l))}),children:e.jsx(He.div,{...us,className:St.grid,children:e.jsx(Bl,{searchQuery:a,onIconSelected:s})})})})]})}function Kl(){return e.jsxs(X,{size:"w-850",className:"min-h-dialog",children:[e.jsx(se,{children:e.jsx(n,{message:"Select icon"})}),e.jsx(ee,{children:e.jsx(Gl,{})})]})}function Gl(){const{close:s}=G();return e.jsx(Wl,{onIconSelected:t=>{s(t)}})}function cs({formPathPrefix:s,hideRoleAndPermissionFields:t}){const{trans:a}=R(),r=i=>s?`${s}.${i}`:i;return e.jsxs(d.Fragment,{children:[e.jsx(p,{className:"mb-20",name:r("label"),label:e.jsx(n,{message:"Label"}),placeholder:a(u("No label...")),startAppend:e.jsx(Ql,{prefixName:r})}),e.jsx(Yl,{prefixName:r}),e.jsx(eo,{prefixName:r}),!t&&e.jsxs(d.Fragment,{children:[e.jsx(Jl,{prefixName:r}),e.jsx(Xl,{prefixName:r}),e.jsx(Zl,{prefixName:r})]})]})}function Ql({prefixName:s,...t}){const{watch:a,setValue:r}=N(),i=s("icon"),l=a(i),o=l&&La(l);return e.jsxs(A,{type:"modal",onClose:c=>{(c||c===null)&&r(i,c,{shouldDirty:!0})},children:[e.jsx(k,{className:"text-muted icon-sm",variant:"outline",size:"md",...t,children:o?e.jsx(o,{}):e.jsx(We,{})}),e.jsx(Kl,{})]})}function Yl({prefixName:s}){const t=N(),a=t.watch(s("type")),r=Fi(a),{data:i}=Se(["menuItemCategories"]),l=(i==null?void 0:i.menuItemCategories)||[],o=l.find(x=>x.type===a),{trans:c}=R(),m=ln();return d.useEffect(()=>{r&&r!==a&&t.setValue(s("action"),"")},[a,r,t,s]),e.jsxs(d.Fragment,{children:[e.jsxs(B,{className:"mb-20",name:s("type"),selectionMode:"single",label:e.jsx(n,{message:"Type"}),children:[e.jsx(g,{value:"link",children:e.jsx(n,{message:"Custom link"})}),e.jsx(g,{value:"route",children:e.jsx(n,{message:"Site page"})}),l.map(x=>e.jsx(g,{value:x.type,children:x.name},x.type))]}),a==="link"&&e.jsx(p,{className:"mb-20",required:!0,type:"url",name:s("action"),placeholder:c({message:"Enter a url..."}),label:e.jsx(n,{message:"Url"})}),a==="route"&&e.jsx(B,{className:"mb-20",required:!0,items:m,name:s("action"),label:e.jsx(n,{message:"Page"}),searchPlaceholder:c(u("Search pages")),showSearchField:!0,selectionMode:"single",children:x=>e.jsx(g,{value:x.id,children:x.label},x.id)}),o&&e.jsx(B,{className:"mb-20",required:!0,items:o.items,name:s("action"),showSearchField:!0,searchPlaceholder:c(u("Search...")),selectionMode:"single",label:e.jsx(n,{message:o.name}),children:x=>e.jsx(g,{value:x.action,children:e.jsx(n,{message:x.label})})})]})}function Jl({prefixName:s}){const{data:t}=Se(["roles","permissions"]),a=(t==null?void 0:t.roles)||[],{trans:r}=R();return e.jsx(rt,{className:"my-20",placeholder:r({message:"Add role..."}),label:e.jsx(n,{message:"Only show if user has role"}),name:s("roles"),chipSize:"sm",suggestions:a,valueKey:"id",displayWith:i=>{var l;return(l=a.find(o=>o.id===i.id))==null?void 0:l.name},children:i=>e.jsx(g,{value:i.id,capitalizeFirst:!0,children:e.jsx(n,{message:i.name})},i.id)})}function Xl({prefixName:s}){const{data:t}=Se(["roles","permissions"]),{trans:a}=R(),r=d.useMemo(()=>mn((t==null?void 0:t.permissions)||[],[],!1),[t==null?void 0:t.permissions]);return e.jsx(rt,{label:e.jsx(n,{message:"Only show if user has permissions"}),placeholder:a({message:"Add permission..."}),chipSize:"sm",suggestions:r,name:s("permissions"),valueKey:"name",children:({groupName:i,items:l})=>e.jsx(qa,{label:Qt(i),children:l.map(o=>e.jsx(g,{value:o.name,description:e.jsx(n,{message:o.description}),children:e.jsx(n,{message:o.display_name||o.name})},o.name))},i)})}function Zl({prefixName:s}){const{billing:t}=de();return t.enable?e.jsxs(B,{selectionMode:"single",className:"mt-20",label:e.jsx(n,{message:"Subscription status"}),name:s("subscriptionStatus"),children:[e.jsx(g,{value:"subscribed",children:e.jsx(n,{message:"Only show if user is subscribed"})}),e.jsx(g,{value:"unsubscribed",children:e.jsx(n,{message:"Only show if user is not subscribed"})}),e.jsx(g,{value:null,children:e.jsx(n,{message:"Always show"})})]}):null}function eo({prefixName:s}){return e.jsxs(B,{className:"mt-20",selectionMode:"single",name:s("target"),label:e.jsx(n,{message:"Open link in"}),children:[e.jsx(g,{value:"_self",children:e.jsx(n,{message:"Same window"})}),e.jsx(g,{value:"_blank",children:e.jsx(n,{message:"New window"})})]})}function so(){const{menuIndex:s,menuItemIndex:t}=ie();return e.jsx(to,{itemsPath:`settings.menus.${s}.items`,itemIndex:t})}function to({itemsPath:s,itemIndex:t}){const a=ce(),{getValues:r}=N(),i=r(`${s}.${t}`);return d.useEffect(()=>{i?$().preview.setHighlight(`[data-menu-item-id="${i.id}"]`):a("..",{relative:"path",replace:!0})},[a,i]),i?e.jsx(ao,{itemsPath:s,itemIndex:t}):null}function ao({itemsPath:s,itemIndex:t}){return e.jsxs(d.Fragment,{children:[e.jsx(cs,{formPathPrefix:`${s}.${t}`}),e.jsx("div",{className:"mt-40 text-right",children:e.jsx(no,{itemsPath:s,itemIndex:t})})]})}function no({itemsPath:s,itemIndex:t}){const a=ce(),{fields:r}=as({name:s}),{setValue:i,getValues:l}=N(),o=r[+t];return e.jsxs(A,{type:"modal",onClose:c=>{if(c&&t){const m=l(s);i(s,m.filter((x,h)=>h!==+t),{shouldDirty:!0}),a("..",{relative:"path",replace:!0})}},children:[e.jsx(j,{variant:"outline",color:"danger",size:"xs",startIcon:e.jsx(ut,{}),children:e.jsx(n,{message:"Delete this item"})}),e.jsx(he,{isDanger:!0,title:e.jsx(n,{message:"Delete item"}),body:e.jsx(n,{message:"Are you sure you want to delete “:name“?",values:{name:o.label}}),confirm:e.jsx(n,{message:"Delete"})})]})}const xn=["appearance-editor-save"];function ro(){return L({mutationKey:xn,mutationFn:s=>io(s),onSuccess:async s=>{M.setQueryData(["admin/appearance/values"],s),q(u("Changes saved"))},onError:s=>J(s)})}function io(s){return z.post("admin/appearance",{changes:s}).then(t=>t.data)}function gn({isBlocked:s,allowedPath:t}){const{state:a,reset:r,proceed:i}=Ir(({nextLocation:l})=>s&&(!t||!l.pathname.includes(t)));return d.useEffect(()=>{const l=o=>{s&&(o.preventDefault(),o.returnValue=!0)};return window.addEventListener("beforeunload",l),()=>window.removeEventListener("beforeunload",l)},[s]),e.jsx(A,{type:"modal",isOpen:a==="blocked",onClose:l=>{a==="blocked"&&(l?i():r())},children:e.jsx(he,{isDanger:!0,title:e.jsx(n,{message:"You have unsaved changes"}),body:e.jsx(n,{message:"Your changes will be lost if you continue. Are you sure you want to discard them?"}),close:e.jsx(n,{message:"Stay here"}),confirm:e.jsx(n,{message:"Discard changes"})})})}function $s({children:s,breadcrumb:t,form:a,blockerAllowedPath:r}){const{isDirty:i}=$a({control:a.control});d.useEffect(()=>($().setIsDirty(i),()=>$().setIsDirty(!1)),[i]),d.useEffect(()=>{const o=a.watch(c=>{$().preview.setValues(c)});return()=>o.unsubscribe()},[a]);const l=ro();return e.jsxs(d.Fragment,{children:[e.jsx(Yt,{breadcrumb:t,children:e.jsx(ms,{children:e.jsx(re,{className:"h-full flex-auto",id:"appearance-editor",form:a,onSubmit:o=>{l.mutate(o,{onSuccess:()=>a.reset(o)})},children:s})})}),e.jsx(gn,{isBlocked:i,allowedPath:r})]})}function Yt({breadcrumb:s,children:t}){return e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx(lo,{}),s,e.jsx("div",{className:"flex-auto overflow-y-auto",children:e.jsx("div",{className:"flex h-full flex-col px-14 py-20",children:t})})]})}function lo(){const{state:s}=Me(),t=Li({mutationKey:xn})>0,a=Ye(r=>r.isDirty);return e.jsxs("div",{className:"flex h-50 flex-shrink-0 items-center border-b pr-10",children:[e.jsx(k,{border:"border-r",className:"text-muted",elementType:U,to:(s==null?void 0:s.prevPath)||"/admin",replace:!0,children:e.jsx(De,{})}),e.jsx("div",{className:"pl-10",children:e.jsx(n,{message:"Appearance editor"})}),e.jsx(j,{variant:"flat",color:"primary",className:"ml-auto block",disabled:!a||t,type:"submit",form:"appearance-editor",children:a?e.jsx(n,{message:"Save"}):e.jsx(n,{message:"Saved"})})]})}function oo(){const s=Me();return new URL(".",window.origin+s.pathname).pathname.replace(/\/$/,"")}function fs({children:s,backLink:t}){const a=d.Children.toArray(s),r=oo(),i=[e.jsx(n,{message:"Customizing"},"mainLabel")];a.length>1&&i.push(a[0]);const l=a.length>1?a.slice(1):a;return e.jsxs("div",{className:"flex h-60 flex-shrink-0 items-center border-b",children:[e.jsx(k,{iconSize:"md",radius:"rounded-none",className:"h-full w-50 flex-shrink-0 text-muted",elementType:U,to:t??r,children:e.jsx(Zs,{})}),e.jsxs("div",{className:"min-w-0 border-l p-10",children:[e.jsx(ha,{items:i,className:"text-xs text-muted"}),e.jsx(ha,{items:l,isEmphasized:!0,className:"mt-2 text-sm"})]})]})}function ha({items:s,className:t,isEmphasized:a}){return e.jsx("div",{className:v("flex items-center gap-4",t),children:s.map((r,i)=>{const l=s.length-1===i;return e.jsxs(d.Fragment,{children:[e.jsx("div",{className:v("min-w-0 overflow-hidden overflow-ellipsis whitespace-nowrap",l&&a&&"text-primary"),children:r}),!l&&(a?e.jsx(Ps,{className:"flex-shrink-0 text-muted",size:"font-inherit"}):e.jsx("div",{children:"•"}))]},i)})})}function co(){const s=qs(),t=I({defaultValues:{settings:{branding:{favicon:s.settings.branding.favicon,logo_light:s.settings.branding.logo_light,logo_dark:s.settings.branding.logo_dark,logo_light_mobile:s.settings.branding.logo_light_mobile,logo_dark_mobile:s.settings.branding.logo_dark_mobile,site_description:s.settings.branding.site_description}},appearance:{env:{app_name:s.appearance.env.app_name}}}});return e.jsxs($s,{form:t,breadcrumb:e.jsx(fs,{children:e.jsx(n,{message:"General"})}),children:[e.jsx(ks,{label:e.jsx(n,{message:"Favicon"}),description:e.jsx(n,{message:"This will generate different size favicons. Image should be at least 512x512 in size."}),type:"favicon"}),e.jsx(ks,{label:e.jsx(n,{message:"Light logo"}),description:e.jsx(n,{message:"Will be used on dark backgrounds."}),type:"logo_light"}),e.jsx(ks,{label:e.jsx(n,{message:"Dark logo"}),description:e.jsx(n,{message:"Will be used on light backgrounds. Will default to light logo if left empty."}),type:"logo_dark"}),e.jsx(ks,{label:e.jsx(n,{message:"Mobile light logo"}),description:e.jsx(n,{message:"Will be used on light backgrounds on mobile. Will default to desktop logo if left empty."}),type:"logo_light_mobile"}),e.jsx(ks,{label:e.jsx(n,{message:"Mobile dark logo"}),description:e.jsx(n,{message:"Will be used on dark backgrounds on mobile. Will default to desktop if left empty."}),type:"logo_dark_mobile"}),e.jsx(uo,{}),e.jsx(mo,{})]})}function ks({label:s,description:t,type:a}){const r=Ye(i=>{var l;return(l=i.defaults)==null?void 0:l.settings.branding[a]});return e.jsx(xs,{name:`settings.branding.${a}`,className:"mb-30 border-b pb-30",label:s,description:t,diskPrefix:"branding_media",defaultValue:r,onChange:()=>{$().preview.setHighlight('[data-logo="navbar"]')}})}function uo(){return e.jsx(p,{name:"appearance.env.app_name",required:!0,className:"mt-20",label:e.jsx(n,{message:"Site name"})})}function mo(){return e.jsx(p,{name:"settings.branding.site_description",className:"mt-20",inputElementType:"textarea",rows:4,label:e.jsx(n,{message:"Site description"})})}function xo(s=1,t=1e4){const a=new Uint32Array(1);window.crypto.getRandomValues(a);const r=a[0]/(4294967295+1);return s=Math.ceil(s),t=Math.floor(t),Math.floor(r*(t-s+1))+s}function go({type:s,children:t,disabled:a}){const{trans:r}=R(),i=ts(),{watch:l,getValues:o,setValue:c}=N();return e.jsxs(d.Fragment,{children:[t,e.jsx("div",{className:"mb-20",children:e.jsx(j,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(_e,{}),disabled:a,onClick:()=>{var h;const m=(h=$().defaults)==null?void 0:h.appearance.themes.light,x=o("appearance.themes");c("appearance.themes",[...x,{id:xo(),name:r(u("New theme")),values:m,type:s}],{shouldDirty:!0}),i(`${x.length}`)},children:e.jsx(n,{message:"New theme"})})}),l("appearance.themes").map((m,x)=>e.jsx(xe,{to:`${x}`,elementType:qt,disabled:a,children:m.name},m.id))]})}const ho=O.lazy(()=>lt(()=>import("./ace-editor-87fa7ca0.js"),["./ace-editor-87fa7ca0.js","./main-5f5fee1d.js","./main-de7137c3.css","./index-c8ed1444.js"],import.meta.url));function Jt({defaultValue:s,mode:t="html",title:a,onSave:r,isSaving:i,footerStartAction:l,beautify:o,editorRef:c}){const[m,x]=d.useState(s),[h,f]=d.useState(!0);return e.jsxs(X,{size:"fullscreen",className:"h-full w-full",children:[e.jsx(se,{children:a}),e.jsx(ee,{className:"relative flex-auto",padding:"p-0",children:e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"flex h-400 w-full items-center justify-center",children:e.jsx(Es,{"aria-label":"Loading editor...",isIndeterminate:!0,size:"md"})}),children:e.jsx(ho,{beautify:o,mode:t,onChange:b=>x(b),defaultValue:m||"",onIsValidChange:f,editorRef:c})})}),e.jsx(po,{disabled:!h||i,value:m,onSave:r,startAction:l})]})}function po({disabled:s,value:t,onSave:a,startAction:r}){const{close:i}=G();return e.jsxs(ne,{dividerTop:!0,startAction:r,children:[e.jsx(j,{onClick:()=>i(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{disabled:s,variant:"flat",color:"primary",onClick:()=>{a?a(t):i(t)},children:e.jsx(n,{message:"Save"})})]})}function hn(s){return Ae({queryKey:["admin","seo-tags",s],queryFn:()=>jo(s)})}function jo(s){return z.get(`admin/appearance/seo-tags/${s}`).then(t=>t.data)}function fo(s){const t=Xs();return L({mutationFn:a=>bo(s,a.tags),onSuccess:async()=>{await t.invalidateQueries({queryKey:["admin","seo-tags",s]}),q(u("Updated SEO tags"))},onError:a=>J(a)})}function bo(s,t){return z.put(`admin/appearance/seo-tags/${s}`,{tags:t}).then(a=>a.data)}var Aa;const pn=((Aa=zs.sections["seo-settings"].config)==null?void 0:Aa.pages)||[],jn=pn.map(s=>s.key);function vo(){const{isLoading:s}=hn(jn);return e.jsx(Yt,{breadcrumb:e.jsx(fs,{children:e.jsx(n,{message:"SEO"})}),children:s?e.jsx(hs,{}):e.jsx(d.Fragment,{children:pn.map(t=>e.jsx(yo,{label:t.label,name:t.key},t.key))})})}function yo({label:s,name:t}){const{data:a,isLoading:r}=hn(jn);return e.jsxs(A,{type:"modal",children:[e.jsx(xe,{disabled:r,children:e.jsx(n,{...s})}),a?e.jsx(wo,{name:t,value:a[t]}):null]})}function wo({name:s,value:t}){const{close:a}=G(),r=fo(s),i=d.useRef(null),l=e.jsx(j,{variant:"outline",color:"primary",onClick:()=>{i.current&&i.current.editor.setValue(t.original)},children:e.jsx(n,{message:"Reset to original"})});return e.jsx(Jt,{mode:"php_laravel_blade",title:e.jsx(n,{message:"Edit SEO meta tags"}),footerStartAction:l,editorRef:i,defaultValue:t.custom||t.original,isSaving:r.isPending,beautify:!1,onSave:o=>{o!=null&&r.mutate({tags:o},{onSuccess:()=>a()})}})}function _o(){const s=qs(),t=I({defaultValues:{appearance:{custom_code:{css:s.appearance.custom_code.css,html:s.appearance.custom_code.html}}}});return e.jsxs($s,{form:t,breadcrumb:e.jsx(fs,{children:e.jsx(n,{message:"Custom code"})}),children:[e.jsx(pa,{mode:"css"}),e.jsx(pa,{mode:"html"})]})}function pa({mode:s}){const{getValues:t}=N(),{setValue:a}=N(),r=s==="html"?e.jsx(n,{message:"Custom HTML & JavaScript"}):e.jsx(n,{message:"Custom CSS"});return e.jsxs(A,{type:"modal",onClose:i=>{i!=null&&(a(`appearance.custom_code.${s}`,i,{shouldDirty:!0}),$().preview.setCustomCode(s,i))},children:[e.jsx(xe,{children:r}),e.jsx(Jt,{title:r,defaultValue:t(`appearance.custom_code.${s}`)||"",mode:s})]})}const So=""+new URL("articles-8bfd9f17.svg",import.meta.url).href,fn="user",ko=s=>{const t=s.customPages.types.length>1?[{control:{type:ge.Select,defaultValue:"default",options:s.customPages.types.map(a=>({value:a.type,label:a.label,key:a.type}))},key:"type",label:u("Type"),description:u("Type of the page"),defaultOperator:Y.eq}]:[];return[{key:"user_id",label:u("User"),description:u("User page was created by"),defaultOperator:Y.eq,control:{type:ge.SelectModel,model:fn}},...t,Ge({description:u("Date page was created")}),ls({description:u("Date page was last updated")})]},No=[{key:"slug",allowsSorting:!0,width:"flex-2 min-w-200",visibleInMode:"all",header:()=>e.jsx(n,{message:"Slug"}),body:s=>e.jsx(U,{target:"_blank",to:`/pages/${s.slug}`,className:$t,children:s.slug})},{key:"user_id",allowsSorting:!0,width:"flex-2 min-w-140",header:()=>e.jsx(n,{message:"Owner"}),body:s=>s.user&&e.jsx(Qe,{image:s.user.image,label:s.user.name,description:s.user.email})},{key:"type",maxWidth:"max-w-100",header:()=>e.jsx(n,{message:"Type"}),body:s=>e.jsx(n,{message:s.type})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(me,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:s=>e.jsx(k,{size:"md",className:"text-muted",elementType:U,to:`${s.id}/edit`,children:e.jsx(We,{})})}];function Co(){const s=d.useContext(is),t=d.useMemo(()=>ko(s),[s]);return e.jsx(Ne,{endpoint:"custom-pages",title:e.jsx(n,{message:"Custom pages"}),filters:t,columns:No,queryParams:{with:"user"},actions:e.jsx(Fo,{}),selectedActions:e.jsx(os,{}),emptyStateMessage:e.jsx(be,{image:So,title:e.jsx(n,{message:"No pages have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching pages"})})})}function Fo(){return e.jsx(Pe,{elementType:U,to:"new",children:e.jsx(n,{message:"New page"})})}const zo=[{label:u("Drive"),to:"drive"}],Io=[{label:u("General"),to:"general",position:1},...zo,Ar().settings.billing.integrated&&{label:u("Subscriptions"),to:"subscriptions",position:2},{label:u("Localization"),to:"localization",position:3},{label:u("Authentication"),to:"authentication",position:4},{label:u("Uploading"),to:"uploading",position:5},{label:u("Outgoing email"),to:"outgoing-email",position:6},{label:u("Cache"),to:"cache",position:7},{label:u("Analytics"),to:"analytics",position:8},{label:u("Logging"),to:"logging",position:9},{label:u("Queue"),to:"queue",position:10},{label:u("Recaptcha"),to:"recaptcha",position:11},{label:u("GDPR"),to:"gdpr",position:12},{label:u("Menus"),to:"/admin/appearance/menus",position:13},{label:u("Seo"),to:"/admin/appearance/seo-settings",position:14},{label:u("Themes"),to:"/admin/appearance/themes",position:15}].filter(Boolean),Ao=Io;function Po({className:s,navConfig:t}){const a=ss(),r=d.useMemo(()=>(t??Ao).sort((l,o)=>(l.position??0)-(o.position??0)),[t]);return e.jsxs("div",{className:v(s,"container mx-auto min-h-full items-start gap-30 p-24 md:flex"),children:[e.jsx(Ts,{children:e.jsx(n,{message:"Settings"})}),a?e.jsx(To,{navConfig:r}):e.jsx(Eo,{navConfig:r}),e.jsx("div",{className:"relative max-w-500 flex-auto md:px-30",children:e.jsx(Be,{})})]})}function To({navConfig:s}){const{pathname:t}=Me(),a=ts(),r=t.split("/").pop();return e.jsx(Ls,{minWidth:"min-w-none",className:"mb-24 w-full bg",selectionMode:"single",selectedValue:r,onSelectionChange:i=>{a(i,{state:{prevPath:t}})},children:s.map(i=>e.jsx(g,{value:i.to,children:e.jsx(n,{...i.label})},i.to))})}function Eo({navConfig:s}){const{pathname:t}=Me();return e.jsx("div",{className:"sticky top-24 w-240 flex-shrink-0",children:s.map(a=>e.jsx(qt,{to:a.to,state:{prevPath:t},className:({isActive:r})=>v("mb-8 block whitespace-nowrap rounded-button p-14 text-sm transition-bg-color",r?"bg-primary/6 font-semibold text-primary":"hover:bg-hover"),children:e.jsx(n,{...a.label})},a.to))})}function Do(){return L({mutationFn:()=>Mo(),onSuccess:()=>{q(u("Sitemap generated"))},onError:s=>J(s)})}function Mo(){return z.post("sitemap/generate").then(s=>s.data)}function bn(s){return L({mutationFn:t=>Lo(t),onSuccess:t=>(q(u("Settings updated"),{position:"bottom-right"}),M.setQueryData(["fetchAdminSettings"],t)),onError:t=>ve(t,s)})}function Lo({client:s,server:t,files:a}){const r=new FormData;return s&&r.set("client",JSON.stringify(s)),t&&r.set("server",JSON.stringify(t)),Object.entries(a||{}).forEach(([i,l])=>{r.set(i,l)}),z.post("settings",r,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i.data)}function we(){return e.jsx("div",{className:"bg-divider-lighter my-30 h-1"})}function qo(){return e.jsxs(He.div,{className:"text-sm",...us,children:[e.jsxs("div",{children:[e.jsx(Z,{className:"mb-4 max-w-140"}),e.jsx(Z,{variant:"rect",size:"h-42 w-full"}),e.jsxs("div",{className:"mt-10 flex items-center gap-8",children:[e.jsx(Z,{variant:"rect",size:"h-20 w-20"}),e.jsx(Z,{className:"max-w-64 text-xs"})]})]}),e.jsx(we,{}),e.jsxs("div",{children:[e.jsx(Z,{className:"mb-4 max-w-140"}),e.jsx(Z,{variant:"rect",size:"h-42 w-full"}),e.jsx(Z,{className:"mt-10 max-w-4/5 text-xs"})]}),e.jsx(we,{}),e.jsxs("div",{children:[e.jsx(Z,{className:"mb-4 max-w-140"}),e.jsx(Z,{variant:"rect",size:"h-42 w-full"}),e.jsx(Z,{className:"mt-10 max-w-[90%] text-xs"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mt-20 flex items-center gap-12",children:[e.jsx(Z,{variant:"rect",size:"h-20 w-40",radius:"rounded-full"}),e.jsx(Z,{className:"max-w-140"})]}),e.jsx(Z,{className:"mt-10 max-w-240 text-xs"})]}),e.jsx(we,{}),e.jsxs("div",{children:[e.jsx(Z,{variant:"rect",size:"h-30 w-132",radius:"rounded-button"}),e.jsxs("div",{className:"mt-14",children:[e.jsx(Z,{className:"max-w-240"}),e.jsx(Z,{className:"max-w-384"})]})]}),e.jsx("div",{className:"mt-40",children:e.jsx(Z,{variant:"rect",size:"h-36 w-132",radius:"rounded-button"})})]})}function pe({children:s,form:t}){const a=bn(t),{isDirty:r}=$a({control:t.control});return e.jsxs(He.section,{...us,children:[e.jsxs(re,{form:t,onBeforeSubmit:()=>{const i=t.formState.errors,l=Object.keys(i).filter(o=>o.endsWith("_group"));t.clearErrors(l)},onSubmit:i=>{a.mutate(i,{onSuccess:()=>t.reset(i)})},children:[s,e.jsx("div",{className:"mt-40",children:e.jsx(j,{type:"submit",variant:"flat",color:"primary",startIcon:a.isPending?e.jsx(Es,{size:"xs",isIndeterminate:!0}):null,disabled:a.isPending||!r,children:e.jsx(n,{message:"Save changes"})})})]}),e.jsx(gn,{isBlocked:r})]},"settings-form")}function je({title:s,description:t,headerMargin:a="mb-40",children:r,isLoading:i}){const{data:l}=xt();return e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:a,children:[e.jsx("h2",{className:"mb-4 text-xl",children:s}),e.jsx("div",{className:"text-sm text-muted",children:t})]}),e.jsx(Ms,{initial:!1,mode:"wait",children:l&&!i?r(l):e.jsx(qo,{},"settings-skeleton")})]})}function bs({link:s,className:t}){const{site:a}=de();return a.hide_docs_button?null:e.jsxs("div",{className:v("flex items-center gap-8",t),children:[e.jsx(Wt,{size:"sm"}),e.jsx(ot,{href:s,children:e.jsx(n,{message:"Learn more"})})]})}function $o(){return e.jsx(je,{title:e.jsx(n,{message:"General"}),description:e.jsx(n,{message:"Configure site url, homepage, theme and other general settings."}),children:s=>e.jsx(Ro,{data:s})})}function Ro({data:s}){var a,r,i,l;const t=I({defaultValues:{client:{homepage:{type:((a=s.client.homepage)==null?void 0:a.type)??"landingPage",value:((r=s.client.homepage)==null?void 0:r.value)??""},themes:{default_id:(i=s.client.themes)!=null&&i.default_id?parseInt(s.client.themes.default_id):0,user_change:((l=s.client.themes)==null?void 0:l.user_change)??!1}}}});return e.jsxs(pe,{form:t,children:[e.jsx(Vo,{}),e.jsx(we,{}),e.jsx(Oo,{}),e.jsx(we,{}),e.jsx(Uo,{}),e.jsx(we,{}),e.jsx(Ho,{})]})}function Vo(){const{data:s}=xt();if(!s)return null;let t=null;const a=s.server,r=a.newAppUrl&&a.newAppUrl!==a.app_url;return r&&(t=e.jsx("div",{className:"mt-20 text-sm text-danger",children:e.jsx(n,{values:{baseUrl:a.app_url,currentUrl:a.newAppUrl,b:i=>e.jsx("b",{children:i})},message:"Base site url is set as <b>:baseUrl</b> in configuration, but current url is <b>:currentUrl</b>. It is recommended to set the primary url you want to use in configuration file and then redirect all other url versions to this primary version via cpanel or .htaccess file."})})),e.jsxs(d.Fragment,{children:[e.jsx(Ke,{readOnly:!0,invalid:!!r,value:a.app_url,label:e.jsx(n,{message:"Primary site url"}),description:e.jsx(bs,{link:"https://support.vebto.com/hc/articles/35/primary-site-url"})}),t]})}function Oo(){var i,l;const{watch:s}=N(),{homepage:t}=d.useContext(is),{data:a}=Se(["menuItemCategories"]),r=s("client.homepage.type");return e.jsxs("div",{children:[e.jsxs(B,{name:"client.homepage.type",selectionMode:"single",label:e.jsx(n,{message:"Site home page"}),description:e.jsx(n,{message:"Which page should be used as site homepage."}),children:[t.options.map(o=>e.jsx(g,{value:o.value,children:e.jsx(n,{...o.label})},o.value)),(i=a==null?void 0:a.menuItemCategories)==null?void 0:i.map(o=>e.jsx(g,{value:o.type,children:o.name},o.type))]}),(l=a==null?void 0:a.menuItemCategories)==null?void 0:l.map(o=>r===o.type?e.jsx(B,{className:"mt-24",name:"client.homepage.value",selectionMode:"single",label:e.jsx(n,{message:"Homepage :name",values:{name:o.name}}),children:o.items.map(c=>e.jsx(g,{value:`${c.model_id}`,children:c.label},c.label))},o.name):null)]})}function Uo(){const s=Pr(t=>t.data.themes);return e.jsxs(d.Fragment,{children:[e.jsxs(B,{className:"mb-20",name:"client.themes.default_id",selectionMode:"single",label:e.jsx(n,{message:"Default site theme"}),description:e.jsx(n,{message:"Which theme to use for users that have not chosen a theme manually."}),children:[e.jsx(g,{value:0,children:e.jsx(n,{message:"System"})}),s.map(t=>e.jsx(g,{value:t.id,children:t.name},t.id))]}),e.jsx(D,{name:"client.themes.user_change",description:e.jsx(n,{message:"Allow users to manually change site theme."}),children:e.jsx(n,{message:"Allow theme change"})})]})}function Ho(){const s=Do(),{base_url:t}=de(),a=`${t}/storage/sitemaps/sitemap-index.xml`,r=e.jsx(ot,{href:a,children:a});return e.jsxs(e.Fragment,{children:[e.jsx(j,{variant:"outline",size:"xs",color:"primary",disabled:s.isPending,onClick:()=>{s.mutate()},children:e.jsx(n,{message:"Generate sitemap"})}),e.jsx("div",{className:"mt-14 text-sm text-muted",children:e.jsx(n,{message:"Once generated, sitemap url will be: :url",values:{url:r}})})]})}const Xt=E(e.jsx("path",{stroke:"#E0E0E0",d:"M24,44c-7.168,0-13-5.816-13-12.971C11,24,24,4,24,4s13,20,13,27.029C37,38.184,31.168,44,24,44z"}));function ja(s){return Qa(s).toString("rgb").replace("rgb(","").replace(")","").replace(/, ?/g," ")}const Bo=E(e.jsx("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"TuneOutlined");function Wo(){const{getValues:s,setValue:t}=N(),{themeIndex:a}=ie(),r=s(`appearance.themes.${+a}`);return e.jsxs(A,{type:"modal",onClose:i=>{i&&s("appearance.themes").forEach((l,o)=>{if(l.id===i.id){t(`appearance.themes.${o}`,i,{shouldDirty:!0});return}if(i.default_light){t(`appearance.themes.${o}`,{...l,default_light:!1},{shouldDirty:!0});return}if(i.default_dark){t(`appearance.themes.${o}`,{...l,default_dark:!1},{shouldDirty:!0});return}})},children:[e.jsx(j,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(Bo,{}),children:e.jsx(n,{message:"Settings"})}),e.jsx(Ko,{theme:r})]})}function Ko({theme:s}){const t=I({defaultValues:s}),{close:a,formId:r}=G();return d.useEffect(()=>{const i=t.watch((l,{name:o})=>{o==="default_light"&&l.default_light&&t.setValue("default_dark",!1),o==="default_dark"&&l.default_dark&&t.setValue("default_light",!1)});return()=>i.unsubscribe()},[t]),e.jsxs(X,{children:[e.jsx(se,{children:e.jsx(n,{message:"Update settings"})}),e.jsx(ee,{children:e.jsxs(re,{form:t,id:r,onSubmit:i=>{a(i)},children:[e.jsx(p,{name:"name",label:e.jsx(n,{message:"Name"}),className:"mb-30",autoFocus:!0}),e.jsx(D,{name:"is_dark",className:"mb-20 border-b pb-20",description:e.jsx(n,{message:"Whether this theme has light text on dark background."}),children:e.jsx(n,{message:"Dark theme"})}),e.jsx(D,{name:"default_light",className:"mb-30",description:e.jsx(n,{message:"When light mode is selected, this theme will be used."}),children:e.jsx(n,{message:"Default for light mode"})}),e.jsx(D,{name:"default_dark",description:e.jsx(n,{message:"When dark mode is selected, this theme will be used."}),children:e.jsx(n,{message:"Default for dark mode"})})]})}),e.jsxs(ne,{children:[e.jsx(j,{onClick:()=>{a()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",type:"submit",form:r,disabled:!t.formState.isDirty,children:e.jsx(n,{message:"Save"})})]})]})}const Go=E(e.jsx("path",{d:"M6 13c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91zm14 0c0-4.42-3.58-8-8-8-.06 0-.12.01-.18.01l1.09-1.09L11.5 2.5 8 6l3.5 3.5 1.41-1.41-1.08-1.08c.06 0 .12-.01.17-.01 3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93z"}),"RestartAltOutlined");function Qo(){const s=ce(),{themeIndex:t}=ie(),[a,r]=d.useState(!1),{setValue:i,getValues:l}=N(),o=()=>{if(l("appearance.themes").length<=1){q.danger(u("At least one theme is required"));return}t&&(s("..",{relative:"path",replace:!0}),i("appearance.themes",l("appearance.themes").filter((c,m)=>m!==+t),{shouldDirty:!0}))};return e.jsxs(d.Fragment,{children:[e.jsxs(Le,{onItemSelected:c=>{if(c==="delete")r(!0);else if(c==="reset"){const m=`appearance.themes.${+t}`,x=l(`${m}.is_dark`)?$().defaults.appearance.themes.dark:$().defaults.appearance.themes.light;Object.entries(x).forEach(([h,f])=>{$().preview.setThemeValue(h,f)}),$().preview.setThemeFont(null),i(`${m}.values`,x,{shouldDirty:!0}),i(`${m}.font`,void 0,{shouldDirty:!0})}},children:[e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(mt,{})}),e.jsxs(qe,{children:[e.jsx(g,{value:"reset",startIcon:e.jsx(Go,{}),children:e.jsx(n,{message:"Reset colors"})}),e.jsx(g,{value:"delete",startIcon:e.jsx(ut,{}),children:e.jsx(n,{message:"Delete"})})]})]}),e.jsx(A,{type:"modal",isOpen:a,onClose:c=>{c&&o(),r(!1)},children:e.jsx(he,{isDanger:!0,title:e.jsx(n,{message:"Delete theme"}),body:e.jsx(n,{message:"Are you sure you want to delete this theme?"}),confirm:e.jsx(n,{message:"Delete"})})})]})}function vs(){return(vs=Object.assign||function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s}).apply(this,arguments)}function gt(s,t){if(s==null)return{};var a,r,i={},l=Object.keys(s);for(r=0;r<l.length;r++)t.indexOf(a=l[r])>=0||(i[a]=s[a]);return i}function Is(s){var t=d.useRef(s),a=d.useRef(function(r){t.current&&t.current(r)});return t.current=s,a.current}var As=function(s,t,a){return t===void 0&&(t=0),a===void 0&&(a=1),s>a?a:s<t?t:s},Ns=function(s){return"touches"in s},zt=function(s){return s&&s.ownerDocument.defaultView||self},fa=function(s,t,a){var r=s.getBoundingClientRect(),i=Ns(t)?function(l,o){for(var c=0;c<l.length;c++)if(l[c].identifier===o)return l[c];return l[0]}(t.touches,a):t;return{left:As((i.pageX-(r.left+zt(s).pageXOffset))/r.width),top:As((i.pageY-(r.top+zt(s).pageYOffset))/r.height)}},ba=function(s){!Ns(s)&&s.preventDefault()},vn=O.memo(function(s){var t=s.onMove,a=s.onKey,r=gt(s,["onMove","onKey"]),i=d.useRef(null),l=Is(t),o=Is(a),c=d.useRef(null),m=d.useRef(!1),x=d.useMemo(function(){var y=function(_){ba(_),(Ns(_)?_.touches.length>0:_.buttons>0)&&i.current?l(fa(i.current,_,c.current)):S(!1)},w=function(){return S(!1)};function S(_){var F=m.current,P=zt(i.current),T=_?P.addEventListener:P.removeEventListener;T(F?"touchmove":"mousemove",y),T(F?"touchend":"mouseup",w)}return[function(_){var F=_.nativeEvent,P=i.current;if(P&&(ba(F),!function(le,H){return H&&!Ns(le)}(F,m.current)&&P)){if(Ns(F)){m.current=!0;var T=F.changedTouches||[];T.length&&(c.current=T[0].identifier)}P.focus(),l(fa(P,F,c.current)),S(!0)}},function(_){var F=_.which||_.keyCode;F<37||F>40||(_.preventDefault(),o({left:F===39?.05:F===37?-.05:0,top:F===40?.05:F===38?-.05:0}))},S]},[o,l]),h=x[0],f=x[1],b=x[2];return d.useEffect(function(){return b},[b]),O.createElement("div",vs({},r,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),Zt=function(s){return s.filter(Boolean).join(" ")},yn=function(s){var t=s.color,a=s.left,r=s.top,i=r===void 0?.5:r,l=Zt(["react-colorful__pointer",s.className]);return O.createElement("div",{className:l,style:{top:100*i+"%",left:100*a+"%"}},O.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},ae=function(s,t,a){return t===void 0&&(t=0),a===void 0&&(a=Math.pow(10,t)),Math.round(a*s)/a},Yo=function(s){return sc(It(s))},It=function(s){return s[0]==="#"&&(s=s.substring(1)),s.length<6?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?ae(parseInt(s[3]+s[3],16)/255,2):1}:{r:parseInt(s.substring(0,2),16),g:parseInt(s.substring(2,4),16),b:parseInt(s.substring(4,6),16),a:s.length===8?ae(parseInt(s.substring(6,8),16)/255,2):1}},Jo=function(s){return ec(Zo(s))},Xo=function(s){var t=s.s,a=s.v,r=s.a,i=(200-t)*a/100;return{h:ae(s.h),s:ae(i>0&&i<200?t*a/100/(i<=100?i:200-i)*100:0),l:ae(i/2),a:ae(r,2)}},At=function(s){var t=Xo(s);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},Zo=function(s){var t=s.h,a=s.s,r=s.v,i=s.a;t=t/360*6,a/=100,r/=100;var l=Math.floor(t),o=r*(1-a),c=r*(1-(t-l)*a),m=r*(1-(1-t+l)*a),x=l%6;return{r:ae(255*[r,c,o,o,m,r][x]),g:ae(255*[m,r,r,c,o,o][x]),b:ae(255*[o,o,m,r,r,c][x]),a:ae(i,2)}},Ws=function(s){var t=s.toString(16);return t.length<2?"0"+t:t},ec=function(s){var t=s.r,a=s.g,r=s.b,i=s.a,l=i<1?Ws(ae(255*i)):"";return"#"+Ws(t)+Ws(a)+Ws(r)+l},sc=function(s){var t=s.r,a=s.g,r=s.b,i=s.a,l=Math.max(t,a,r),o=l-Math.min(t,a,r),c=o?l===t?(a-r)/o:l===a?2+(r-t)/o:4+(t-a)/o:0;return{h:ae(60*(c<0?c+6:c)),s:ae(l?o/l*100:0),v:ae(l/255*100),a:i}},tc=O.memo(function(s){var t=s.hue,a=s.onChange,r=Zt(["react-colorful__hue",s.className]);return O.createElement("div",{className:r},O.createElement(vn,{onMove:function(i){a({h:360*i.left})},onKey:function(i){a({h:As(t+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":ae(t),"aria-valuemax":"360","aria-valuemin":"0"},O.createElement(yn,{className:"react-colorful__hue-pointer",left:t/360,color:At({h:t,s:100,v:100,a:1})})))}),ac=O.memo(function(s){var t=s.hsva,a=s.onChange,r={backgroundColor:At({h:t.h,s:100,v:100,a:1})};return O.createElement("div",{className:"react-colorful__saturation",style:r},O.createElement(vn,{onMove:function(i){a({s:100*i.left,v:100-100*i.top})},onKey:function(i){a({s:As(t.s+100*i.left,0,100),v:As(t.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ae(t.s)+"%, Brightness "+ae(t.v)+"%"},O.createElement(yn,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:At(t)})))}),wn=function(s,t){if(s===t)return!0;for(var a in s)if(s[a]!==t[a])return!1;return!0},nc=function(s,t){return s.toLowerCase()===t.toLowerCase()||wn(It(s),It(t))};function rc(s,t,a){var r=Is(a),i=d.useState(function(){return s.toHsva(t)}),l=i[0],o=i[1],c=d.useRef({color:t,hsva:l});d.useEffect(function(){if(!s.equal(t,c.current.color)){var x=s.toHsva(t);c.current={hsva:x,color:t},o(x)}},[t,s]),d.useEffect(function(){var x;wn(l,c.current.hsva)||s.equal(x=s.fromHsva(l),c.current.color)||(c.current={hsva:l,color:x},r(x))},[l,s,r]);var m=d.useCallback(function(x){o(function(h){return Object.assign({},h,x)})},[]);return[l,m]}var ic=typeof window<"u"?d.useLayoutEffect:d.useEffect,lc=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},va=new Map,oc=function(s){ic(function(){var t=s.current?s.current.ownerDocument:document;if(t!==void 0&&!va.has(t)){var a=t.createElement("style");a.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,va.set(t,a);var r=lc();r&&a.setAttribute("nonce",r),t.head.appendChild(a)}},[])},cc=function(s){var t=s.className,a=s.colorModel,r=s.color,i=r===void 0?a.defaultColor:r,l=s.onChange,o=gt(s,["className","colorModel","color","onChange"]),c=d.useRef(null);oc(c);var m=rc(a,i,l),x=m[0],h=m[1],f=Zt(["react-colorful",t]);return O.createElement("div",vs({},o,{ref:c,className:f}),O.createElement(ac,{hsva:x,onChange:h}),O.createElement(tc,{hue:x.h,onChange:h,className:"react-colorful__last-control"}))},dc={defaultColor:"000",toHsva:Yo,fromHsva:function(s){return Jo({h:s.h,s:s.s,v:s.v,a:1})},equal:nc},uc=function(s){return O.createElement(cc,vs({},s,{colorModel:dc}))},mc=/^#?([0-9A-F]{3,8})$/i,xc=function(s){var t=s.color,a=t===void 0?"":t,r=s.onChange,i=s.onBlur,l=s.escape,o=s.validate,c=s.format,m=s.process,x=gt(s,["color","onChange","onBlur","escape","validate","format","process"]),h=d.useState(function(){return l(a)}),f=h[0],b=h[1],y=Is(r),w=Is(i),S=d.useCallback(function(F){var P=l(F.target.value);b(P),o(P)&&y(m?m(P):P)},[l,m,o,y]),_=d.useCallback(function(F){o(F.target.value)||b(l(a)),w(F)},[a,l,o,w]);return d.useEffect(function(){b(l(a))},[a,l]),O.createElement("input",vs({},x,{value:c?c(f):f,spellCheck:"false",onChange:S,onBlur:_}))},ya=function(s){return"#"+s},gc=function(s){var t=s.prefixed,a=s.alpha,r=gt(s,["prefixed","alpha"]),i=d.useCallback(function(o){return o.replace(/([^0-9A-F]+)/gi,"").substring(0,a?8:6)},[a]),l=d.useCallback(function(o){return function(c,m){var x=mc.exec(c),h=x?x[1].length:0;return h===3||h===6||!!m&&h===4||!!m&&h===8}(o,a)},[a]);return O.createElement(xc,vs({},r,{escape:i,format:t?ya:void 0,process:ya,validate:l}))};const hc=[{color:"rgb(255, 255, 255)",name:u("White")},{color:"rgb(239,245,245)",name:u("Solitude")},{color:"rgb(245,213,174)",name:u("Wheat")},{color:"rgb(253,227,167)",name:u("Cape Honey")},{color:"rgb(242,222,186)",name:u("Milk punch")},{color:"rgb(97,118,75)",name:u("Dingy"),foreground:"rgb(255, 255, 255)"},{color:"rgb(4, 147, 114)",name:u("Aquamarine"),foreground:"rgb(255, 255, 255)"},{color:"rgb(222,245,229)",name:u("Cosmic Latte")},{color:"rgb(233,119,119)",name:u("Geraldine"),foreground:"rgb(90,14,14)"},{color:"rgb(247,164,164)",name:u("Sundown")},{color:"rgb(30,139,195)",name:u("Pelorous"),foreground:"rgb(255, 255, 255)"},{color:"rgb(142,68,173)",name:u("Deep Lilac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(108,74,182)",name:u("Blue marguerite"),foreground:"rgb(255, 255, 255)"},{color:"rgb(139,126,116)",name:u("Americano"),foreground:"rgb(255, 255, 255)"},{color:"rgb(0,0,0)",name:u("Black"),foreground:"rgb(255, 255, 255)"},{color:"rgb(64,66,88)",name:u("Blue zodiac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(101,100,124)",name:u("Comet"),foreground:"rgb(255, 255, 255)"}];function pc({onChange:s,value:t,colors:a}){const r=a.map(i=>{const l=t===i;return e.jsx(nt,{onClick:()=>{s==null||s(i)},className:v("relative block flex-shrink-0 w-26 h-26 border rounded",l&&"shadow-md"),style:{backgroundColor:i},children:l&&e.jsx("span",{className:"absolute inset-0 m-auto rounded-full w-8 h-8 bg-white"})},i)});return e.jsx("div",{className:"flex flex-wrap gap-6",children:r})}const jc=hc.map(({color:s})=>s).slice(0,14);function fc({defaultValue:s,onChange:t,colorPresets:a,showInput:r}){const[i,l]=d.useState(s),o=a||jc,c=Rt({size:"sm"});return e.jsxs("div",{children:[e.jsx(uc,{className:"!w-auto",color:i,onChange:m=>{t==null||t(m),l(m)}}),e.jsxs("div",{className:"px-12 py-20",children:[o&&e.jsx(pc,{colors:o,onChange:m=>{if(m){const x=Qa(m).toString("hex");t==null||t(x),l(x)}},value:i}),r&&e.jsx("div",{className:"pt-20",children:e.jsx(gc,{autoComplete:"off",role:"textbox",autoCorrect:"off",spellCheck:"false",required:!0,"aria-label":"Hex color",prefixed:!0,className:c.input,color:i,onChange:m=>{t==null||t(m),l(m)}})})]})]})}function ea({hideFooter:s=!1,showInput:t=!0}){const{close:a,value:r,setValue:i,initialValue:l}=G();return e.jsxs(X,{size:"2xs",children:[e.jsx(fc,{showInput:t,defaultValue:l||"",onChange:o=>i(o)}),!s&&e.jsxs(ne,{dividerTop:!0,children:[e.jsx(j,{variant:"text",size:"xs",onClick:()=>a(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",size:"xs",onClick:()=>a(r),children:e.jsx(n,{message:"Apply"})})]})]})}const wa=[{label:u("Accent"),value:"primary",bgColor:"bg-primary",previewBgColor:"text-primary"},{label:u("Background"),value:"bg",bgColor:"bg-background",previewBgColor:"text-background"},{label:u("Background alt"),value:"bg-alt",bgColor:"bg-alt",previewBgColor:"text-background-alt"},{label:u("Transparent"),value:"transparent",bgColor:"bg-transparent",previewBgColor:"text-transparent"}];function bc(){var o;const{themeIndex:s}=ie(),{watch:t,setValue:a}=N(),r=`appearance.themes.${s}.values.--be-navbar-color`,i=t(r),l=(o=wa.find(({value:c})=>c===i))==null?void 0:o.previewBgColor;return e.jsxs(Le,{placement:"right",selectionMode:"single",selectedValue:i,onSelectionChange:c=>{a(r,c,{shouldDirty:!0})},children:[e.jsx(xe,{startIcon:e.jsx(Xt,{viewBox:"0 0 48 48",className:v("icon-lg",l)}),children:e.jsx(n,{message:"Navbar"})}),e.jsx(qe,{children:wa.map(({label:c,value:m,bgColor:x})=>e.jsx(g,{value:m,startIcon:e.jsx("div",{className:v("h-20 w-20 rounded border",x)}),children:e.jsx(n,{...c})},m))})]})}function vc({children:s,marginTop:t="mt-22"}){return e.jsx("div",{className:v("mb-6 text-sm font-semibold",t),children:s})}const yc=[{label:u("Background"),key:"--be-background"},{label:u("Background alt"),key:"--be-background-alt"},{label:u("Foreground"),key:"--be-foreground-base"},{label:u("Accent light"),key:"--be-primary-light"},{label:u("Accent"),key:"--be-primary"},{label:u("Accent dark"),key:"--be-primary-dark"},{label:u("Text on accent"),key:"--be-on-primary"},{label:u("Chip"),key:"--be-background-chip"}];function wc(){const s=ts(),{themeIndex:t}=ie(),{getValues:a,watch:r}=N(),i=a(`appearance.themes.${+t}`),l=r(`appearance.themes.${+t}.font.family`);return d.useEffect(()=>{i||s("..",{relative:"path",replace:!0})},[s,i]),d.useEffect(()=>{let o=!1;return i!=null&&i.id&&bl.then(()=>{o||$().preview.setActiveTheme(i.id)}),()=>{o=!0,$().preview.setActiveTheme(null)}},[i==null?void 0:i.id]),i?e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"mb-20 flex items-center justify-between gap-10",children:[e.jsx(Wo,{}),e.jsx(Qo,{})]}),e.jsxs("div",{children:[e.jsx(xe,{elementType:U,to:"font",description:l||e.jsx(n,{message:"System"}),children:e.jsx(n,{message:"Font"})}),e.jsx(xe,{elementType:U,to:"radius",children:e.jsx(n,{message:"Rounding"})}),e.jsx(vc,{children:e.jsx(n,{message:"Colors"})}),e.jsx(bc,{}),yc.map(o=>e.jsx(_c,{colorName:o.key,label:e.jsx(n,{...o.label}),initialThemeValue:i.values[o.key],theme:i},o.key))]})]}):null}function _c({label:s,theme:t,colorName:a,initialThemeValue:r}){const{setValue:i}=N(),{themeIndex:l}=ie(),[o,c]=d.useState(r),m=x=>{c(x),$().preview.setThemeValue(a,x)};return d.useEffect(()=>{c(r)},[r]),e.jsxs(A,{value:Ti(o),type:"popover",placement:"right",offset:10,onValueChange:x=>{m(ja(x))},onClose:(x,{valueChanged:h,initialValue:f})=>{x&&h?i(`appearance.themes.${+l}.values.${a}`,ja(x),{shouldDirty:!0}):m(f)},children:[e.jsx(xe,{className:"capitalize",startIcon:e.jsx(Xt,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:`rgb(${o})`}}),children:s}),e.jsx(ea,{})]})}const Rs=O.createContext(null);function ht(s){const{size:t="md",children:a,className:r,isLazy:i,overflow:l="overflow-hidden"}=s,o=d.useRef([]),c=d.useId(),[m,x]=it(s.selectedTab,s.defaultSelectedTab||0,s.onTabChange),h=d.useMemo(()=>({selectedTab:m,setSelectedTab:x,tabsRef:o,size:t,isLazy:i,id:c}),[m,c,i,x,t]);return e.jsx(Rs.Provider,{value:h,children:e.jsx("div",{className:v(r,l,"max-w-full"),children:a})})}function Sc(){const{tabsRef:s,selectedTab:t}=d.useContext(Rs),[a,r]=d.useState({width:void 0,transform:void 0,className:void 0});return Ra(()=>{if(t!=null&&s.current){const i=s.current[t];if(!i)return;r(l=>({width:`${i.offsetWidth}px`,transform:`translateX(${i.offsetLeft}px)`,className:l.width===void 0?"":"transition-all"}))}},[r,t,s]),e.jsx("div",{className:v("absolute bottom-0 left-0 h-2 bg-primary",a.className),role:"presentation",style:{width:a.width,transform:a.transform}})}function pt({children:s,center:t,expand:a,className:r,border:i="border-b"}){const l=d.Children.toArray(s);return e.jsx(Tr,{children:e.jsxs("div",{className:v("max-sm:hidden-scrollbar md:compact-scrollbar relative flex max-w-full overflow-auto",i,r),role:"tablist","aria-orientation":"horizontal",children:[l.map((o,c)=>d.isValidElement(o)?d.cloneElement(o,{index:c,className:v(o.props.className,a&&"flex-auto",t&&c===0&&"ml-auto",t&&c===l.length-1&&"mr-auto")}):null),e.jsx(Sc,{})]})})}function Ue({index:s,className:t,isDisabled:a,children:r,padding:i,elementType:l="button",to:o,relative:c,width:m="min-w-min",height:x}){const{selectedTab:h,setSelectedTab:f,tabsRef:b,size:y="md",id:w}=d.useContext(Rs),S=s===h,_=Er(),F=i||(y==="sm"?"px-12":"px-18"),P=v("tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors","focus-visible:ring focus-visible:ring-2 ring-inset rounded whitespace-nowrap cursor-pointer",m,kc({isDisabled:a,isSelected:S}),t,y==="md"&&`${F} ${x||"h-48"}`,y==="sm"&&`${F} ${x||"h-32"}`,a&&"pointer-events-none"),T=te=>{switch(te.key){case"ArrowLeft":_==null||_.focusPrevious();break;case"ArrowRight":_==null||_.focusNext();break;case"Home":_==null||_.focusFirst();break;case"End":_==null||_.focusLast();break}},le=S?0:-1,H=l;return e.jsx(H,{disabled:a,id:`${w}-${s}-tab`,"aria-controls":`${w}-${s}-tabpanel`,type:"button",role:"tab","aria-selected":S,tabIndex:a?void 0:le,onKeyDown:T,onClick:()=>{f(s)},to:o,relative:c,className:P,ref:te=>{b.current&&te&&(b.current[s]=te)},children:r})}function kc({isDisabled:s,isSelected:t}){return s?"text-disabled cursor-default":t?"text-primary":"text-muted hover:text-main"}function _n({children:s,className:t}){const{selectedTab:a,isLazy:r}=d.useContext(Rs),i=d.Children.toArray(s).filter(o=>!!o);let l;if(r){const o=i[a];l=d.isValidElement(o)?d.cloneElement(i[a],{index:a}):null}else l=i.map((o,c)=>{if(d.isValidElement(o)){const m=c===a;return d.cloneElement(o,{index:c,"aria-hidden":!m,className:m?o.props.className:v(o.props.className,"hidden")})}return null});return e.jsx("div",{className:t,children:l})}function Js({className:s,children:t,index:a,...r}){const{id:i}=d.useContext(Rs),[l,o]=d.useState(0),c=d.useRef(null);return Ra(()=>{if(c!=null&&c.current){const m=()=>{const h=Dr(c.current,{tabbable:!0});o(h.nextNode()?void 0:0)};m();const x=new MutationObserver(m);return x.observe(c.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{x.disconnect()}}},[c]),e.jsx("div",{tabIndex:l,ref:c,id:`${i}-${a}-tabpanel`,"aria-labelledby":`${i}-${a}-tab`,className:v(s,"focus-visible:outline-primary-light"),role:"tabpanel",...r,children:t})}function ue({children:s,name:t,separatorBottom:a=!0,separatorTop:r=!0}){const{formState:{errors:i}}=N(),l=d.useRef(null),o=i[t];return d.useEffect(()=>{var c;o&&((c=l.current)==null||c.scrollIntoView({behavior:"smooth"}))},[o]),e.jsxs("div",{className:v(a&&"border-b mb-20 pb-20",r&&"border-t mt-20 pt-20",o&&"border-y-error"),ref:l,children:[s(!!o),o&&e.jsx("div",{className:"text-danger text-sm mt-20",dangerouslySetInnerHTML:{__html:o.message}})]})}function Pt({children:s,...t}){const{field:{onChange:a,onBlur:r,value:i=[],ref:l},fieldState:{invalid:o,error:c}}=gs({name:t.name}),m=d.useMemo(()=>{const h=i;return typeof h=="string"?JSON.parse(h):h},[i]),x={onChange:a,onBlur:r,value:m,invalid:o,errorMessage:c==null?void 0:c.message};return e.jsx(Mr,{valueKey:"name",ref:l,...rs(x,t)})}function Nc(){return e.jsx(je,{title:e.jsx(n,{message:"Subscriptions"}),description:e.jsx(n,{message:"Configure gateway integration, accepted cards, invoices and other related settings."}),children:s=>e.jsx(Cc,{data:s})})}function Cc({data:s}){var r,i,l,o,c,m,x,h,f,b,y,w,S,_,F,P,T;const{trans:t}=R(),a=I({defaultValues:{client:{billing:{enable:((r=s.client.billing)==null?void 0:r.enable)??!1,accepted_cards:((i=s.client.billing)==null?void 0:i.accepted_cards)??[],paypal_test_mode:((l=s.client.billing)==null?void 0:l.paypal_test_mode)??!1,paypal:{enable:((c=(o=s.client.billing)==null?void 0:o.paypal)==null?void 0:c.enable)??!1},stripe:{enable:((x=(m=s.client.billing)==null?void 0:m.stripe)==null?void 0:x.enable)??!1},invoice:{address:((f=(h=s.client.billing)==null?void 0:h.invoice)==null?void 0:f.address)??"",notes:((y=(b=s.client.billing)==null?void 0:b.invoice)==null?void 0:y.notes)??""}}},server:{paypal_client_id:((w=s.server)==null?void 0:w.paypal_client_id)??"",paypal_secret:((S=s.server)==null?void 0:S.paypal_secret)??"",paypal_webhook_id:((_=s.server)==null?void 0:_.paypal_webhook_id)??"",stripe_key:((F=s.server)==null?void 0:F.stripe_key)??"",stripe_secret:((P=s.server)==null?void 0:P.stripe_secret)??"",stripe_webhook_secret:((T=s.server)==null?void 0:T.stripe_webhook_secret)??""}}});return e.jsx(pe,{form:a,children:e.jsxs(ht,{children:[e.jsxs(pt,{children:[e.jsx(Ue,{children:e.jsx(n,{message:"General"})}),e.jsx(Ue,{children:e.jsx(n,{message:"Invoices"})})]}),e.jsxs(_n,{className:"pt-30",children:[e.jsxs(Js,{children:[e.jsx(D,{name:"client.billing.enable",description:e.jsx(n,{message:"Enable or disable all subscription related functionality across the site."}),children:e.jsx(n,{message:"Enable subscriptions"})}),e.jsx(we,{}),e.jsx(Fc,{}),e.jsx(zc,{}),e.jsx(we,{}),e.jsx(Pt,{label:e.jsx(n,{message:"Accepted cards"}),name:"client.billing.accepted_cards",placeholder:t({message:"Add new card..."})})]}),e.jsxs(Js,{children:[e.jsx(p,{inputElementType:"textarea",rows:5,label:e.jsx(n,{message:"Invoice address"}),name:"client.billing.invoice.address",className:"mb-30"}),e.jsx(p,{inputElementType:"textarea",rows:5,label:e.jsx(n,{message:"Invoice notes"}),description:e.jsx(n,{message:"Default notes to show under `notes` section of user invoice. Optional."}),name:"client.billing.invoice.notes"})]})]})]})})}function Fc(){const{watch:s}=N(),t=s("client.billing.paypal.enable");return e.jsxs("div",{className:"mb-30",children:[e.jsx(D,{name:"client.billing.paypal.enable",description:e.jsxs("div",{children:[e.jsx(n,{message:"Enable PayPal payment gateway integration."}),e.jsx(bs,{className:"mt-6",link:"https://support.vebto.com/hc/articles/147/configuring-paypal"})]}),children:e.jsx(n,{message:"PayPal gateway"})}),t?e.jsx(ue,{name:"paypal_group",children:a=>e.jsxs(d.Fragment,{children:[e.jsx(p,{name:"server.paypal_client_id",label:e.jsx(n,{message:"PayPal Client ID"}),required:!0,invalid:a,className:"mb-20"}),e.jsx(p,{name:"server.paypal_secret",label:e.jsx(n,{message:"PayPal Secret"}),required:!0,invalid:a,className:"mb-20"}),e.jsx(p,{name:"server.paypal_webhook_id",label:e.jsx(n,{message:"PayPal Webhook ID"}),required:!0,invalid:a,className:"mb-20"}),e.jsx(D,{name:"client.billing.paypal_test_mode",invalid:a,description:e.jsx("div",{children:e.jsx(n,{message:"Allows testing PayPal payments with sandbox accounts."})}),children:e.jsx(n,{message:"PayPal test mode"})})]})}):null]})}function zc(){const{watch:s}=N(),t=s("client.billing.stripe.enable");return e.jsxs(d.Fragment,{children:[e.jsx(D,{name:"client.billing.stripe.enable",description:e.jsxs("div",{children:[e.jsx(n,{message:"Enable Stripe payment gateway integration."}),e.jsx(bs,{className:"mt-6",link:"https://support.vebto.com/hc/articles/148/configuring-stripe"})]}),children:e.jsx(n,{message:"Stripe gateway"})}),t?e.jsx(ue,{name:"stripe_group",separatorBottom:!1,children:a=>e.jsxs(d.Fragment,{children:[e.jsx(p,{name:"server.stripe_key",label:e.jsx(n,{message:"Stripe publishable key"}),required:!0,className:"mb-20",invalid:a}),e.jsx(p,{name:"server.stripe_secret",label:e.jsx(n,{message:"Stripe secret key"}),required:!0,className:"mb-20",invalid:a}),e.jsx(p,{name:"server.stripe_webhook_secret",label:e.jsx(n,{message:"Stripe webhook signing secret"}),className:"mb-20",invalid:a})]})}):null]})}function Ic(){const s=Se(["timezones","localizations"]);return e.jsx(je,{title:e.jsx(n,{message:"Localization"}),description:e.jsx(n,{message:"Configure global date, time and language settings."}),isLoading:s.isLoading,children:t=>e.jsx(Ac,{data:t,timezones:s.data.timezones,localizations:s.data.localizations})})}function Ac({data:s,timezones:t,localizations:a}){var o;const r=Lr(),{trans:i}=R(),l=I({defaultValues:{client:{dates:{default_timezone:s.client.dates.default_timezone??"auto",format:s.client.dates.format??"auto"},locale:{default:((o=s.client.locale)==null?void 0:o.default)??"auto"},i18n:{enable:s.client.i18n.enable??!0}}}});return e.jsxs(pe,{form:l,children:[e.jsxs(B,{className:"mb-30",required:!0,name:"client.dates.default_timezone",showSearchField:!0,selectionMode:"single",label:e.jsx(n,{message:"Default timezone"}),searchPlaceholder:i(u("Search timezones")),description:e.jsx(n,{message:"Which timezone should be selected by default for new users and guests."}),children:[e.jsx(g,{value:"auto",children:e.jsx(n,{message:"Auto"})},"auto"),Object.entries(t).map(([c,m])=>e.jsx(qa,{label:c,children:m.map(x=>e.jsx(g,{value:x.value,children:x.text},x.value))},c))]}),e.jsxs(B,{name:"client.locale.default",className:"mb-30",selectionMode:"single",label:e.jsx(n,{message:"Default language"}),description:e.jsx(n,{message:"Which localization should be selected by default for new users and guests."}),children:[e.jsx(g,{value:"auto",children:e.jsx(n,{message:"Auto"})},"auto"),a.map(c=>e.jsx(g,{value:c.language,capitalizeFirst:!0,children:c.name},c.language))]}),e.jsxs(Vt,{required:!0,className:"mb-30",size:"sm",name:"client.dates.format",orientation:"vertical",label:e.jsx(n,{message:"Date verbosity"}),description:e.jsx(n,{message:"Default verbosity for all dates displayed across the site. Month/day order and separators will be adjusted automatically, based on user's locale."}),children:[e.jsx(es,{value:"auto",children:e.jsx(n,{message:"Auto"})},"auto"),Object.entries(qr).map(([c,m])=>e.jsx(es,{value:c,children:e.jsx(me,{date:r,options:m})},c))]}),e.jsx(D,{name:"client.i18n.enable",description:e.jsx(n,{message:"If disabled, site will always be shown in default language and user will not be able to change their locale."}),children:e.jsx(n,{message:"Enable translations"})})]})}function Pc(){return e.jsx(je,{title:e.jsx(n,{message:"Authentication"}),description:e.jsx(n,{message:"Configure registration, social login and related 3rd party integrations."}),children:s=>e.jsx(Tc,{data:s})})}function Tc({data:s}){var a,r,i,l,o,c,m,x,h,f,b,y,w,S,_,F,P,T,le,H,te,Ce,oe;const t=I({defaultValues:{client:{require_email_confirmation:((a=s.client)==null?void 0:a.require_email_confirmation)??!1,registration:{disable:((r=s.client.registration)==null?void 0:r.disable)??!1},social:{requireAccount:((i=s.client.social)==null?void 0:i.requireAccount)??!1,compact_buttons:((l=s.client.social)==null?void 0:l.compact_buttons)??!1,envato:{enable:((c=(o=s.client.social)==null?void 0:o.envato)==null?void 0:c.enable)??!1},google:{enable:((x=(m=s.client.social)==null?void 0:m.google)==null?void 0:x.enable)??!1},facebook:{enable:((f=(h=s.client.social)==null?void 0:h.facebook)==null?void 0:f.enable)??!1},twitter:{enable:((y=(b=s.client.social)==null?void 0:b.twitter)==null?void 0:y.enable)??!1}},single_device_login:s.client.single_device_login??!1,auth:{domain_blacklist:((w=s.client.auth)==null?void 0:w.domain_blacklist)??""}},server:{envato_id:((S=s.server)==null?void 0:S.envato_id)??"",envato_secret:((_=s.server)==null?void 0:_.envato_secret)??"",envato_personal_token:((F=s.server)==null?void 0:F.envato_personal_token)??"",google_id:((P=s.server)==null?void 0:P.google_id)??"",google_secret:((T=s.server)==null?void 0:T.google_secret)??"",facebook_id:((le=s.server)==null?void 0:le.facebook_id)??"",facebook_secret:((H=s.server)==null?void 0:H.facebook_secret)??"",twitter_id:((te=s.server)==null?void 0:te.twitter_id)??"",twitter_secret:((Ce=s.server)==null?void 0:Ce.twitter_secret)??"",mail_setup:((oe=s.server)==null?void 0:oe.mail_setup)??!1}}});return e.jsxs(pe,{form:t,children:[e.jsx(Dc,{}),e.jsx(D,{className:"mb-24",name:"client.registration.disable",description:e.jsx(n,{message:"All registration related functionality will be disabled and hidden from users."}),children:e.jsx(n,{message:"Disable registration"})}),e.jsx(D,{className:"mb-24",name:"client.social.requireAccount",description:e.jsx(n,{message:"If enabled, user will only be able to login via particular social site, if they have connected it from their account settings page."}),children:e.jsx(n,{message:"Social login requires existing account"})}),e.jsx(D,{className:"mb-24",name:"client.single_device_login",description:e.jsx(n,{message:"Only allow one device to be logged into user account at the same time."}),children:e.jsx(n,{message:"Single device login"})}),e.jsx(D,{name:"client.social.compact_buttons",description:e.jsx(n,{message:"Use compact design for social login buttons."}),children:e.jsx(n,{message:"Compact buttons"})}),e.jsx(Mc,{}),e.jsx(Lc,{}),e.jsx(qc,{}),e.jsx($c,{}),e.jsx(we,{}),e.jsx(p,{inputElementType:"textarea",rows:3,className:"mt-24",name:"client.auth.domain_blacklist",label:e.jsx(n,{message:"Domain blacklist"}),description:e.jsx(n,{message:"Comma separated list of domains. Users will not be able to register or login using any email adress from specified domains."})})]})}function Ec(){const{watch:s}=N();return s("server.mail_setup")?null:e.jsx("p",{className:"mt-10 rounded-panel border p-10 text-sm text-danger",children:e.jsx(n,{message:"Outgoing mail method needs to be setup before enabling this setting. <a>Fix now</a>",values:{a:a=>e.jsx(j,{elementType:U,variant:"outline",size:"xs",display:"flex",className:"mt-10 max-w-max",to:"/admin/settings/outgoing-email",children:a})}})})}function Dc(){return e.jsx(D,{className:"mb-30",name:"client.require_email_confirmation",description:e.jsxs(d.Fragment,{children:[e.jsx(n,{message:"Require newly registered users to validate their email address before being able to login."}),e.jsx(Ec,{})]}),children:e.jsx(n,{message:"Require email confirmation"})})}function Mc(){var r;const{watch:s}=N(),t=de(),a=s("client.social.envato.enable");return(r=t.envato)!=null&&r.enable?e.jsx(ue,{separatorBottom:!1,name:"envato_group",children:i=>e.jsxs(e.Fragment,{children:[e.jsx(D,{invalid:i,name:"client.social.envato.enable",description:e.jsx(n,{message:"Enable logging into the site via envato."}),children:e.jsx(n,{message:"Envato login"})}),!!a&&e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:i,className:"mt-30",name:"server.envato_id",label:e.jsx(n,{message:"Envato ID"}),required:!0}),e.jsx(p,{invalid:i,className:"mt-30",name:"server.envato_secret",label:e.jsx(n,{message:"Envato secret"}),required:!0}),e.jsx(p,{invalid:i,className:"mt-30",name:"server.envato_personal_token",label:e.jsx(n,{message:"Envato personal token"}),required:!0})]})]})}):null}function Lc(){const{watch:s}=N(),t=s("client.social.google.enable");return e.jsx(ue,{name:"google_group",children:a=>e.jsxs(e.Fragment,{children:[e.jsx(D,{invalid:a,name:"client.social.google.enable",description:e.jsx(n,{message:"Enable logging into the site via google."}),children:e.jsx(n,{message:"Google login"})}),!!t&&e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:a,className:"mt-30",name:"server.google_id",label:e.jsx(n,{message:"Google client ID"}),required:!0}),e.jsx(p,{className:"mt-30",name:"server.google_secret",label:e.jsx(n,{message:"Google client secret"}),required:!0})]})]})})}function qc(){const{watch:s}=N(),t=s("client.social.facebook.enable");return e.jsx(ue,{name:"facebook_group",separatorTop:!1,children:a=>e.jsxs(e.Fragment,{children:[e.jsx(D,{invalid:a,name:"client.social.facebook.enable",description:e.jsx(n,{message:"Enable logging into the site via facebook."}),children:e.jsx(n,{message:"Facebook login"})}),!!t&&e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:a,className:"mt-30",name:"server.facebook_id",label:e.jsx(n,{message:"Facebook app ID"}),required:!0}),e.jsx(p,{invalid:a,className:"mt-30",name:"server.facebook_secret",label:e.jsx(n,{message:"Facebook app secret"}),required:!0})]})]})})}function $c(){const{watch:s}=N(),t=s("client.social.twitter.enable");return e.jsx(ue,{name:"twitter_group",separatorTop:!1,separatorBottom:!1,children:a=>e.jsxs(e.Fragment,{children:[e.jsx(D,{invalid:a,name:"client.social.twitter.enable",description:e.jsx(n,{message:"Enable logging into the site via twitter."}),children:e.jsx(n,{message:"Twitter login"})}),!!t&&e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:a,className:"mt-30",name:"server.twitter_id",label:e.jsx(n,{message:"Twitter ID"}),required:!0}),e.jsx(p,{invalid:a,className:"mt-30",name:"server.twitter_secret",label:e.jsx(n,{message:"Twitter secret"}),required:!0})]})]})})}const Rc=["B","KB","MB","GB","TB","PB"];function _a(s,t){if(s==null)return 0;switch(t){case"KB":return s*1024;case"MB":return s*1024**2;case"GB":return s*1024**3;case"TB":return s*1024**4;case"PB":return s*1024**5;default:return s}}const Vc=0x630000000000,Cs=O.forwardRef(({name:s,...t},a)=>{const{field:{onChange:r,onBlur:i,value:l="",ref:o},fieldState:{invalid:c,error:m}}=gs({name:s}),[x,h]=d.useState(""),[f,b]=d.useState("MB");d.useEffect(()=>{if(l==null||l===""){h("");return}const{amount:S,unit:_}=Oc({bytes:Math.min(l,Vc)});b(_||"MB"),h(Number.isNaN(S)?"":S)},[l,f]);const y={onChange:S=>{const _=parseInt(S.target.value);if(Number.isNaN(_))r(_);else{const F=_a(parseInt(S.target.value),f);r(F)}},onBlur:i,value:x,invalid:c,errorMessage:m==null?void 0:m.message,inputRef:o},w=e.jsx(Ls,{minWidth:"min-w-80",selectionMode:"single",selectedValue:f,disabled:!l,inputRadius:"rounded-l-none rounded-r-input",onSelectionChange:S=>{const _=_a(x||0,S);r(_)},children:Rc.slice(0,5).map(S=>e.jsx(g,{value:S,children:S==="B"?"Bytes":S},S))});return e.jsx(Ke,{...rs(y,t),type:"number",ref:a,endAppend:w})}),Oc=$r(({bytes:s})=>{const t=Rr(s);if(!t)return{amount:"",unit:"MB"};let a=parseInt(t.split(" ")[0]);return a=Math.round(a),{amount:a,unit:t.split(" ")[1]}});function Uc(){return z.get("uploads/server-max-file-size").then(s=>s.data)}function Hc(){return Ae({queryKey:["MaxServerUploadSize"],queryFn:()=>Uc()})}function Bc(){return L({mutationFn:s=>Wc(s),onError:s=>J(s)})}function Wc(s){return z.post("settings/uploading/dropbox-refresh-token",s).then(t=>t.data)}function Kc({isInvalid:s}){const{watch:t,setValue:a}=N(),r=t("server.storage_dropbox_app_key"),i=t("server.storage_dropbox_app_secret");return e.jsxs(d.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-20",name:"server.storage_dropbox_app_key",label:e.jsx(n,{message:"Dropbox application key"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-20",name:"server.storage_dropbox_app_secret",label:e.jsx(n,{message:"Dropbox application secret"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-20",name:"server.storage_dropbox_refresh_token",label:e.jsx(n,{message:"Dropbox refresh token"}),required:!0}),e.jsxs(A,{type:"modal",onClose:l=>{l&&a("server.storage_dropbox_refresh_token",l)},children:[e.jsx(j,{variant:"outline",color:"primary",size:"xs",disabled:!r||!i,children:e.jsx(n,{message:"Get dropbox refresh token"})}),e.jsx(Gc,{appKey:r,appSecret:i})]})]})}function Gc({appKey:s,appSecret:t}){const a=I(),{formId:r,close:i}=G(),l=Bc();return e.jsxs(X,{children:[e.jsx(se,{children:e.jsx(n,{message:"Connected dropbox account"})}),e.jsx(ee,{children:e.jsxs(re,{id:r,form:a,onSubmit:o=>{l.mutate({app_key:s,app_secret:t,access_code:o.accessCode},{onSuccess:c=>{i(c.refreshToken)}})},children:[e.jsxs("div",{className:"mb-20 border-b pb-20",children:[e.jsx("div",{className:"mb-10 text-sm text-muted",children:e.jsx(n,{message:"Click the 'get access code' button to get dropbox access code, then paste it into the field below."})}),e.jsx(j,{variant:"outline",color:"primary",size:"xs",elementType:"a",target:"_blank",href:`https://www.dropbox.com/oauth2/authorize?client_id=${s}&token_access_type=offline&response_type=code`,children:e.jsx(n,{message:"Get access code"})})]}),e.jsx(p,{name:"accessCode",label:e.jsx(n,{message:"Dropbox access code"}),required:!0})]})}),e.jsxs(ne,{children:[e.jsx(j,{onClick:()=>{i()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",form:r,type:"submit",disabled:!s||!t||l.isPending,children:e.jsx(n,{message:"Connect"})})]})]})}function Qc(){const{trans:s}=R();return L({mutationFn:()=>Yc(),onSuccess:()=>{q(s(u("CORS file updated")))},onError:t=>J(t)})}function Yc(){return z.post("s3/cors/upload").then(s=>s.data)}function Jc(){return e.jsx(je,{title:e.jsx(n,{message:"Uploading"}),description:e.jsx(n,{message:"Configure size and type of files that users are able to upload. This will affect all uploads across the site."}),children:s=>e.jsx(Xc,{data:s})})}function Xc({data:s}){const{trans:t}=R(),a=I({defaultValues:{client:{uploads:{max_size:s.client.uploads.max_size??0,chunk_size:s.client.uploads.chunk_size??0,available_space:s.client.uploads.available_space??0,allowed_extensions:s.client.uploads.allowed_extensions??[],blocked_extensions:s.client.uploads.blocked_extensions??[],s3_direct_upload:s.client.uploads.s3_direct_upload??!1}},server:{static_file_delivery:s.server.static_file_delivery??"",uploads_disk_driver:s.server.uploads_disk_driver??"local",public_disk_driver:s.server.public_disk_driver??"local",storage_s3_key:s.server.storage_s3_key??"",storage_s3_secret:s.server.storage_s3_secret??"",storage_s3_region:s.server.storage_s3_region??"",storage_s3_bucket:s.server.storage_s3_bucket??"",storage_s3_endpoint:s.server.storage_s3_endpoint??"",storage_digitalocean_key:s.server.storage_digitalocean_key??"",storage_digitalocean_secret:s.server.storage_digitalocean_secret??"",storage_digitalocean_region:s.server.storage_digitalocean_region??"",storage_digitalocean_bucket:s.server.storage_digitalocean_bucket??"",storage_backblaze_key:s.server.storage_backblaze_key??"",storage_backblaze_secret:s.server.storage_backblaze_secret??"",storage_backblaze_region:s.server.storage_backblaze_region??"",storage_backblaze_bucket:s.server.storage_backblaze_bucket??"",storage_ftp_host:s.server.storage_ftp_host??"",storage_ftp_username:s.server.storage_ftp_username??"",storage_ftp_password:s.server.storage_ftp_password??"",storage_ftp_root:s.server.storage_ftp_root??"",storage_ftp_port:s.server.storage_ftp_port??"21",storage_ftp_passive:s.server.storage_ftp_passive??!1,storage_ftp_ssl:s.server.storage_ftp_ssl??!1,storage_dropbox_app_key:s.server.storage_dropbox_app_key??"",storage_dropbox_app_secret:s.server.storage_dropbox_app_secret??"",storage_dropbox_refresh_token:s.server.storage_dropbox_refresh_token??""}}});return e.jsxs(pe,{form:a,children:[e.jsx(ed,{}),e.jsx(sd,{}),e.jsx(td,{}),e.jsx(ue,{name:"static_delivery_group",children:r=>e.jsxs(Vt,{invalid:r,size:"sm",name:"server.static_file_delivery",orientation:"vertical",label:e.jsx(n,{message:"File delivery optimization"}),description:e.jsx(n,{message:"Both X-Sendfile and X-Accel need to be enabled on the server first. When enabled, it will reduce server memory and CPU usage when previewing or downloading files, especially for large files."}),children:[e.jsx(es,{value:"",children:e.jsx(n,{message:"None"})}),e.jsx(es,{value:"xsendfile",children:e.jsx(n,{message:"X-Sendfile (Apache)"})}),e.jsx(es,{value:"xaccel",children:e.jsx(n,{message:"X-Accel (Nginx)"})})]})}),e.jsx(Cs,{className:"mb-30",name:"client.uploads.chunk_size",min:1,label:e.jsx(n,{message:"Chunk size"}),placeholder:"Infinity",description:e.jsx(n,{message:"Size (in bytes) for each file chunk. It should only be changed if there is a maximum upload size on your server or proxy (for example cloudflare). If chunk size is larger then limit on the server, uploads will fail."})}),e.jsx(Zc,{}),e.jsx(we,{}),e.jsx(Cs,{min:1,name:"client.uploads.max_size",className:"mb-30",label:e.jsx(n,{message:"Maximum file size"}),description:e.jsx(n,{message:"Maximum size (in bytes) for a single file user can upload."})}),e.jsx(Cs,{min:1,name:"client.uploads.available_space",className:"mb-30",label:e.jsx(n,{message:"Available space"}),description:e.jsx(n,{message:"Disk space (in bytes) each user uploads are allowed to take up. This can be overridden per user."})}),e.jsx(Pt,{name:"client.uploads.allowed_extensions",className:"mb-30",label:e.jsx(n,{message:"Allowed extensions"}),placeholder:t(u("Add extension...")),description:e.jsx(n,{message:"List of allowed file types (jpg, mp3, pdf etc.). Leave empty to allow all file types."})}),e.jsx(Pt,{name:"client.uploads.blocked_extensions",label:e.jsx(n,{message:"Blocked extensions"}),placeholder:t(u("Add extension...")),description:e.jsx(n,{message:"Prevent uploading of these file types, even if they are allowed above."})})]})}function Zc(){const{data:s}=Hc();return e.jsx(js,{color:"warning",description:e.jsx(n,{message:"Maximum upload size on your server currently is set to <b>:size</b>",values:{size:s==null?void 0:s.maxSize,b:t=>e.jsx("b",{children:t})}})})}function ed(){const{watch:s,clearErrors:t}=N();return s("server.uploads_disk_driver")?e.jsxs(B,{className:"mb-30",selectionMode:"single",name:"server.uploads_disk_driver",label:e.jsx(n,{message:"User Uploads Storage Method"}),description:e.jsx(n,{message:"Where should user private file uploads be stored."}),onSelectionChange:()=>{t()},children:[e.jsx(g,{value:"local",children:e.jsx(n,{message:"Local Disk (Default)"})}),e.jsx(g,{value:"ftp",children:"FTP"}),e.jsx(g,{value:"digitalocean_s3",children:"DigitalOcean Spaces"}),e.jsx(g,{value:"backblaze_s3",children:"Backblaze"}),e.jsx(g,{value:"s3",children:"Amazon S3 (Or compatible service)"}),e.jsx(g,{value:"dropbox",children:"Dropbox"}),e.jsx(g,{value:"rackspace",children:"Rackspace"})]}):null}function sd(){const{watch:s,clearErrors:t}=N();return s("server.public_disk_driver")?e.jsxs(B,{label:e.jsx(n,{message:"Public Uploads Storage Method"}),selectionMode:"single",name:"server.public_disk_driver",description:e.jsx(n,{message:"Where should user public uploads (like avatars) be stored."}),onSelectionChange:()=>{t()},children:[e.jsx(g,{value:"local",children:e.jsx(n,{message:"Local Disk (Default)"})}),e.jsx(g,{value:"s3",children:"Amazon S3"}),e.jsx(g,{value:"ftp",children:"FTP"}),e.jsx(g,{value:"digitalocean_s3",children:"DigitalOcean Spaces"}),e.jsx(g,{value:"backblaze_s3",children:"Backblaze"})]}):null}function td(){const{watch:s}=N(),t=[s("server.uploads_disk_driver"),s("server.public_disk_driver")];return t[0]==="local"&&t[1]==="local"?null:e.jsx(ue,{separatorBottom:!1,name:"storage_group",children:a=>{if(t.includes("s3"))return e.jsx(ad,{isInvalid:a});if(t.includes("ftp"))return e.jsx(id,{isInvalid:a});if(t.includes("dropbox"))return e.jsx(Kc,{isInvalid:a});if(t.includes("digitalocean_s3"))return e.jsx(nd,{isInvalid:a});if(t.includes("backblaze_s3"))return e.jsx(rd,{isInvalid:a})}})}function ad({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_s3_key",label:e.jsx(n,{message:"Amazon S3 key"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_s3_secret",label:e.jsx(n,{message:"Amazon S3 secret"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_s3_region",label:e.jsx(n,{message:"Amazon S3 region"}),placeholder:"us-east-1"}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_s3_bucket",label:e.jsx(n,{message:"Amazon S3 bucket"}),required:!0}),e.jsx(p,{invalid:s,name:"server.storage_s3_endpoint",label:e.jsx(n,{message:"Amazon S3 endpoint"}),description:e.jsx(n,{message:"Only change endpoint if you are using another S3 compatible storage service."})}),e.jsx(sa,{invalid:s})]})}function nd({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_key",label:e.jsx(n,{message:"DigitalOcean key"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_secret",label:e.jsx(n,{message:"DigitalOcean secret"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_region",label:e.jsx(n,{message:"DigitalOcean region"}),pattern:"[a-z0-9\\-]+",placeholder:"us-east-1",required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_digitalocean_bucket",label:e.jsx(n,{message:"DigitalOcean bucket"}),required:!0}),e.jsx(sa,{invalid:s})]})}function rd({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_backblaze_key",label:e.jsx(n,{message:"Backblaze KeyID"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_backblaze_secret",label:e.jsx(n,{message:"Backblaze applicationKey"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_backblaze_region",label:e.jsx(n,{message:"Backblaze Region"}),pattern:"[a-z0-9\\-]+",placeholder:"us-west-002",required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_backblaze_bucket",label:e.jsx(n,{message:"Backblaze bucket name"}),required:!0}),e.jsx(sa,{invalid:s})]})}function sa({invalid:s}){var i,l;const t=Qc(),{data:a}=xt(),r=((i=a==null?void 0:a.server.uploads_disk_driver)==null?void 0:i.endsWith("s3"))||((l=a==null?void 0:a.server.public_disk_driver)==null?void 0:l.endsWith("s3"));return e.jsxs(d.Fragment,{children:[e.jsx(D,{className:"mt-30",invalid:s,name:"client.uploads.s3_direct_upload",description:e.jsxs("div",{children:[e.jsx("p",{children:e.jsx(n,{message:"Upload files directly from the browser to s3 without going through the server. It will save on server bandwidth and should result in faster upload times. This should be enabled, unless storage provider does not support multipart uploads."})}),e.jsx("p",{className:"mt-10",children:e.jsx(n,{message:"If s3 provider is not configured to allow uploads from browser, this can be done automatically via CORS button below, when valid credentials are saved."})})]}),children:e.jsx(n,{message:"Direct upload"})}),e.jsx(j,{variant:"flat",color:"primary",size:"xs",className:"mt-20",onClick:()=>{t.mutate()},disabled:!r||t.isPending,children:e.jsx(n,{message:"Configure CORS"})})]})}function id({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_ftp_host",label:e.jsx(n,{message:"FTP hostname"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_ftp_username",label:e.jsx(n,{message:"FTP username"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_ftp_password",label:e.jsx(n,{message:"FTP password"}),type:"password",required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_ftp_root",label:e.jsx(n,{message:"FTP directory"}),placeholder:"/"}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.storage_ftp_port",label:e.jsx(n,{message:"FTP port"}),type:"number",min:0,placeholder:"21"}),e.jsx(D,{invalid:s,name:"server.storage_ftp_passive",className:"mb-30",children:e.jsx(n,{message:"Passive"})}),e.jsx(D,{invalid:s,name:"server.storage_ftp_ssl",children:e.jsx(n,{message:"SSL"})})]})}function ld({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.mailgun_domain",label:e.jsx(n,{message:"Mailgun domain"}),description:e.jsx(n,{message:"Usually the domain of your site (site.com)"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.mailgun_secret",label:e.jsx(n,{message:"Mailgun API key"}),description:e.jsx(n,{message:"Should start with `key-`"}),required:!0}),e.jsx(p,{invalid:s,name:"server.mailgun_endpoint",label:e.jsx(n,{message:"Mailgun endpoint"}),description:e.jsx(n,{message:"Can be left empty, if your mailgun account is in the US region."}),placeholder:"api.eu.mailgun.net"})]})}function od({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.mail_host",label:e.jsx(n,{message:"SMTP host"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.mail_username",label:e.jsx(n,{message:"SMTP username"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",type:"password",name:"server.mail_password",label:e.jsx(n,{message:"SMTP password"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",type:"number",name:"server.mail_port",label:e.jsx(n,{message:"SMTP port"})}),e.jsxs(B,{selectionMode:"single",invalid:s,className:"mb-30",name:"server.mail_encryption",label:e.jsx(n,{message:"SMTP encryption"}),children:[e.jsx(g,{value:"",children:e.jsx(n,{message:"None"})}),e.jsx(g,{value:"tls",children:e.jsx(n,{message:"TLS"})}),e.jsx(g,{value:"ssl",children:e.jsx(n,{message:"SSL"})})]})]})}function cd({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.ses_key",label:e.jsx(n,{message:"SES key"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.ses_secret",label:e.jsx(n,{message:"SES secret"}),required:!0}),e.jsx(p,{invalid:s,name:"server.ses_region",label:e.jsx(n,{message:"SES region"}),placeholder:"us-east-1",required:!0})]})}function dd({isInvalid:s}){return e.jsx(p,{invalid:s,name:"server.postmark_token",label:e.jsx(n,{message:"Postmark token"}),required:!0})}const Sa=E([e.jsx("path",{fill:"#4caf50",d:"M45,16.2l-5,2.75l-5,4.75L35,40h7c1.657,0,3-1.343,3-3V16.2z"},"0"),e.jsx("path",{fill:"#1e88e5",d:"M3,16.2l3.614,1.71L13,23.7V40H6c-1.657,0-3-1.343-3-3V16.2z"},"1"),e.jsx("polygon",{fill:"#e53935",points:"35,11.2 24,19.45 13,11.2 12,17 13,23.7 24,31.95 35,23.7 36,17"},"2"),e.jsx("path",{fill:"#c62828",d:"M3,12.298V16.2l10,7.5V11.2L9.876,8.859C9.132,8.301,8.228,8,7.298,8h0C4.924,8,3,9.924,3,12.298z"},"3"),e.jsx("path",{fill:"#fbc02d",d:"M45,12.298V16.2l-10,7.5V11.2l3.124-2.341C38.868,8.301,39.772,8,40.702,8h0 C43.076,8,45,9.924,45,12.298z"},"4")],"Gmail","0 0 48 48");function ud(){const{watch:s,setValue:t}=N(),{connectSocial:a}=Vr(),r=s("server.connectedGmailAccount"),i=async()=>{const c=await a("secure/settings/mail/gmail/connect");if((c==null?void 0:c.status)==="SUCCESS"){const m=c.callbackData.profile.email;t("server.connectedGmailAccount",m),q(u("Connected gmail account: :email",{values:{email:m}}))}},l=e.jsx(j,{variant:"outline",color:"primary",startIcon:e.jsx(Sa,{}),onClick:()=>i(),children:e.jsx(n,{message:"Connect gmail account"})}),o=e.jsxs("div",{className:"flex items-center gap-14 rounded border bg-alt px-14 py-6 text-sm",children:[e.jsx(Sa,{size:"lg"}),r,e.jsx(j,{variant:"text",color:"primary",className:"ml-auto",onClick:()=>i(),children:e.jsx(n,{message:"Reconnect"})})]});return e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"mb-6 text-sm",children:e.jsx(n,{message:"Gmail account"})}),r?o:l]})}function md(){const{watch:s,clearErrors:t}=N(),a=s("server.mail_driver"),r=[];return a==="mailgun"&&r.push(ld),a==="smtp"&&r.push(od),a==="ses"&&r.push(cd),a==="postmark"&&r.push(dd),a==="gmailApi"&&r.push(ud),e.jsx(ue,{separatorTop:!1,separatorBottom:!1,name:"mail_group",children:i=>e.jsxs(d.Fragment,{children:[e.jsxs(B,{onSelectionChange:()=>{t()},invalid:i,selectionMode:"single",name:"server.mail_driver",label:e.jsx(n,{message:"Outgoing mail method"}),description:e.jsxs("div",{children:[e.jsx(n,{message:"Which method should be used for sending outgoing application emails (like registration confirmation)"}),e.jsx(bs,{className:"mt-8",link:"https://support.vebto.com/hc/articles/42/44/76/outgoing-emails"})]}),children:[e.jsx(g,{value:"mailgun",children:"Mailgun"}),e.jsx(g,{value:"gmailApi",children:"Gmail Api"}),e.jsx(g,{value:"smtp",children:"SMTP"}),e.jsx(g,{value:"postmark",children:"Postmark"}),e.jsx(g,{value:"ses",children:"Ses (Amazon Simple Email Service)"}),e.jsx(g,{value:"sendmail",children:"SendMail"}),e.jsx(g,{value:"log",children:"Log (Email will be saved to error log)"})]}),r.length?e.jsx("div",{className:"mt-30",children:r.map((l,o)=>e.jsx(l,{isInvalid:i},o))}):null]})})}function xd(){return e.jsx(je,{title:e.jsx(n,{message:"Outgoing email settings"}),description:e.jsx(n,{message:"Change outgoing email handlers, email credentials and other related settings."}),children:s=>e.jsx(gd,{data:s})})}function gd({data:s}){var a;const t=I({defaultValues:{server:{mail_from_address:s.server.mail_from_address??"",mail_from_name:s.server.mail_from_name??"",mail_driver:s.server.mail_driver??"",mailgun_domain:s.server.mailgun_domain??"",mailgun_secret:s.server.mailgun_secret??"",mailgun_endpoint:s.server.mailgun_endpoint??"",mail_host:s.server.mail_host??"",mail_username:s.server.mail_username??"",mail_password:s.server.mail_password??"",mail_port:s.server.mail_port??"",mail_encryption:s.server.mail_encryption??"",ses_key:s.server.ses_key??"",ses_secret:s.server.ses_secret??"",ses_region:s.server.ses_region??"",postmark_token:s.server.postmark_token??"",connectedGmailAccount:s.server.connectedGmailAccount??""},client:{mail:{contact_page_address:((a=s.client.mail)==null?void 0:a.contact_page_address)??""}}}});return e.jsxs(pe,{form:t,children:[e.jsx(p,{id:"outgoing-emails",className:"mb-30",type:"email",name:"server.mail_from_address",label:e.jsx(n,{message:"From address"}),description:e.jsx(n,{message:"All outgoing application emails will be sent from this email address."}),required:!0}),e.jsx(hd,{}),e.jsx(p,{className:"mb-30",name:"server.mail_from_name",label:e.jsx(n,{message:"From name"}),description:e.jsx(n,{message:"All outgoing application emails will be sent using this name."}),required:!0}),e.jsx(js,{color:"warning",description:e.jsx(n,{message:"Your selected mail method must be authorized to send emails using this address and name."})}),e.jsx(we,{}),e.jsx(md,{})]})}function hd(){const{base_url:s}=de(),t=`${s}/contact`,a=e.jsx(ot,{href:t,children:t});return e.jsx(p,{className:"mb-30",type:"email",name:"client.mail.contact_page_address",label:e.jsx(n,{message:"Contact page address"}),description:e.jsx(n,{values:{contactPageUrl:a},message:"Where emails from :contactPageUrl page should be sent to."})})}function pd(){return z.post("cache/flush").then(s=>s.data)}function jd(){return L({mutationFn:()=>pd(),onSuccess:()=>{q(u("Cache cleared"))},onError:s=>J(s)})}function fd(){return e.jsx(je,{title:e.jsx(n,{message:"Cache settings"}),description:e.jsx(n,{message:"Select cache provider and manually clear cache."}),children:s=>e.jsx(bd,{data:s})})}function bd({data:s}){const t=jd(),a=I({defaultValues:{server:{cache_driver:s.server.cache_driver??"file",memcached_host:s.server.memcached_host??"",memcached_port:s.server.memcached_port??""}}});return e.jsxs(pe,{form:a,children:[e.jsx(vd,{}),e.jsx(j,{type:"button",variant:"outline",size:"xs",color:"primary",disabled:t.isPending,onClick:()=>t.mutate(),children:e.jsx(n,{message:"Clear cache"})}),e.jsx(js,{color:"warning",className:"mt-30",description:e.jsx(n,{message:'"File" is the best option for most cases and should not be changed, unless you are familiar with another cache method and have it set up on the server already.'})})]})}function vd(){const{watch:s,clearErrors:t}=N(),a=s("server.cache_driver");let r=null;return a==="memcached"&&(r=yd),e.jsx(ue,{separatorTop:!1,name:"cache_group",children:i=>e.jsxs(e.Fragment,{children:[e.jsxs(B,{invalid:i,onSelectionChange:()=>t(),selectionMode:"single",name:"server.cache_driver",label:e.jsx(n,{message:"Cache method"}),description:e.jsx(n,{message:"Which method should be used for storing and retrieving cached items."}),children:[e.jsx(g,{value:"file",children:e.jsx(n,{message:"File (Default)"})}),e.jsx(g,{value:"array",children:e.jsx(n,{message:"None"})}),e.jsx(g,{value:"apc",children:"APC"}),e.jsx(g,{value:"memcached",children:"Memcached"}),e.jsx(g,{value:"redis",children:"Redis"})]}),r&&e.jsx("div",{className:"mt-30",children:e.jsx(r,{isInvalid:i})})]})})}function yd({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.memcached_host",label:e.jsx(n,{message:"Memcached host"}),required:!0}),e.jsx(p,{invalid:s,type:"number",name:"server.memcached_port",label:e.jsx(n,{message:"Memcached port"}),required:!0})]})}function wd(){return e.jsx(je,{title:e.jsx(n,{message:"Error logging"}),description:e.jsx(n,{message:"Configure site error logging and related 3rd party integrations."}),children:s=>e.jsx(_d,{data:s})})}function _d({data:s}){const t=I({defaultValues:{server:{sentry_dsn:s.server.sentry_dsn??""}}});return e.jsxs(pe,{form:t,children:[e.jsx(Sd,{}),e.jsx(js,{className:"mt-30",color:"positive",description:e.jsx(n,{values:{a:a=>e.jsx(ot,{href:"https://sentry.io",children:a})},message:"<a>Sentry</a> integration provides real-time error tracking and helps identify and fix issues when site is in production."})})]})}function Sd(){const{clearErrors:s}=N();return e.jsx(ue,{separatorTop:!1,separatorBottom:!1,name:"logging_group",children:t=>e.jsx(p,{onChange:()=>s(),invalid:t,name:"server.sentry_dsn",type:"url",minLength:30,label:e.jsx(n,{message:"Sentry DSN"})})})}function kd(){return Ae({queryKey:["queue-stats"],queryFn:()=>Nd(),refetchInterval:5e3})}function Nd(){return z.get("horizon/api/stats").then(s=>s.data)}function Cd(){return e.jsx(je,{title:e.jsx(n,{message:"Queue"}),description:e.jsxs(d.Fragment,{children:[e.jsx(n,{message:"Queues allow to defer time consuming tasks, such as sending an email, until a later time. They are fully optional and do not provide any additional functionality."}),e.jsx(bs,{className:"mt-6 text-sm",link:"https://support.vebto.com/hc/articles/224/queues"})]}),children:s=>e.jsx(Fd,{data:s})})}function Fd({data:s}){const t=I({defaultValues:{server:{queue_driver:s.server.queue_driver??"sync",sqs_queue_key:s.server.sqs_queue_key??"",sqs_queue_secret:s.server.sqs_queue_secret??"",sqs_queue_prefix:s.server.sqs_queue_prefix??"",sqs_queue_name:s.server.sqs_queue_name??"",sqs_queue_region:s.server.sqs_queue_region??""}}}),a=t.watch("server.queue_driver");return e.jsxs(pe,{form:t,children:[a!=="sync"&&e.jsx(zd,{}),e.jsx(Id,{})]})}function zd(){const{base_url:s}=de(),{data:t}=kd(),a=t==null?void 0:t.status;return e.jsx("div",{className:"mb-30 flex h-32 items-center justify-between gap-14",children:a&&e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:v("min-w-108 flex w-max items-center gap-8 rounded-button px-10 py-4 text-sm capitalize",a==="running"&&"bg-positive-lighter",a==="inactive"&&"bg-danger-lighter",a==="paused"&&"bg-chip"),children:[e.jsx("div",{className:v("h-10 w-10 rounded-full",a==="running"&&"bg-positive",a==="inactive"&&"bg-danger",a==="paused"&&"bg-chip")}),e.jsx(n,{message:`Worker ${a}`})]}),e.jsx(j,{variant:"outline",size:"xs",elementType:"a",href:`${s}/horizon`,target:"_blank",endIcon:e.jsx(Di,{}),children:e.jsx(n,{message:"Monitor"})})]})})}function Id(){const{watch:s,clearErrors:t}=N(),a=s("server.queue_driver");let r=null;return a==="sqs"&&(r=Ad),e.jsx(ue,{separatorTop:!1,separatorBottom:!1,name:"queue_group",children:i=>e.jsxs(e.Fragment,{children:[e.jsxs(B,{invalid:i,onSelectionChange:()=>{t()},selectionMode:"single",name:"server.queue_driver",label:e.jsx(n,{message:"Queue method"}),required:!0,children:[e.jsx(g,{value:"sync",children:e.jsx(n,{message:"None (Default)"})}),e.jsx(g,{value:"beanstalkd",children:"Beanstalkd"}),e.jsx(g,{value:"database",children:e.jsx(n,{message:"Database"})}),e.jsx(g,{value:"sqs",children:e.jsx(n,{message:"SQS (Amazon simple queue service)"})}),e.jsx(g,{value:"redis",children:"Redis"})]}),r&&e.jsx("div",{className:"mt-30",children:e.jsx(r,{isInvalid:i})})]})})}function Ad({isInvalid:s}){return e.jsxs(e.Fragment,{children:[e.jsx(p,{invalid:s,className:"mb-30",name:"server.sqs_queue_key",label:e.jsx(n,{message:"SQS queue key"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.sqs_queue_secret",label:e.jsx(n,{message:"SQS queue secret"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.sqs_queue_prefix",label:e.jsx(n,{message:"SQS queue prefix"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.sqs_queue_name",label:e.jsx(n,{message:"SQS queue name"}),required:!0}),e.jsx(p,{invalid:s,className:"mb-30",name:"server.sqs_queue_region",label:e.jsx(n,{message:"SQS queue region"}),required:!0})]})}function Pd(){return e.jsx(je,{title:e.jsx(n,{message:"Websockets"}),description:e.jsxs(d.Fragment,{children:[e.jsx(n,{message:"Configure websockets provider responsible for all realtime functionality on the site."}),e.jsx(bs,{className:"mt-6 text-sm",link:"https://support.vebto.com/hc/articles/224/queues"})]}),children:s=>e.jsx(Td,{data:s})})}function Td({data:s}){const t=I({defaultValues:{server:{broadcast_driver:s.server.broadcast_driver??"null",pusher_app_id:s.server.pusher_app_id??"",pusher_app_key:s.server.pusher_app_key??"",pusher_app_secret:s.server.pusher_app_secret??"",pusher_app_cluster:s.server.pusher_app_cluster??"",reverb_app_id:s.server.reverb_app_id??"",reverb_app_key:s.server.reverb_app_key??"",reverb_app_secret:s.server.reverb_app_secret??"",reverb_host:s.server.reverb_host??"",reverb_port:s.server.reverb_port??"",reverb_scheme:s.server.reverb_scheme??"https",ably_app_id:s.server.ably_app_id??"",ably_app_key:s.server.ably_app_key??"",ably_app_secret:s.server.ably_app_secret??""}}});return e.jsx(pe,{form:t,children:e.jsx(Ed,{})})}function Ed(){const{clearErrors:s,control:t}=N(),a=Ds({control:t,name:"server.broadcast_driver"});let r=null;return a==="pusher"?r=Dd:a==="ably"&&(r=Md),e.jsx(ue,{separatorTop:!1,separatorBottom:!1,name:"queue_group",children:i=>e.jsxs(d.Fragment,{children:[e.jsxs(B,{invalid:i,onSelectionChange:()=>s(),selectionMode:"single",name:"server.broadcast_driver",label:e.jsx(n,{message:"Websockets provider"}),required:!0,children:[e.jsx(g,{value:"null",children:e.jsx(n,{message:"None (Disabled)"})}),e.jsx(g,{value:"reverb",children:"Local"}),e.jsx(g,{value:"pusher",children:"Pusher"}),e.jsx(g,{value:"ably",children:e.jsx(n,{message:"Ably"})})]}),r&&e.jsx("div",{className:"mt-30",children:e.jsx(r,{isInvalid:i})})]})})}function Dd({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{name:"server.pusher_app_id",label:e.jsx(n,{message:"Pusher app ID"}),className:"mb-30",required:!0}),e.jsx(p,{name:"server.pusher_app_key",label:e.jsx(n,{message:"Pusher app key"}),className:"mb-30",required:!0}),e.jsx(p,{name:"server.pusher_app_secret",label:e.jsx(n,{message:"Pusher app secret"}),className:"mb-30",required:!0}),e.jsx(p,{name:"server.pusher_app_cluster",label:e.jsx(n,{message:"Pusher app cluster"}),className:"mb-30",placeholder:"mt1",required:!0})]})}function Md({isInvalid:s}){return e.jsxs(d.Fragment,{children:[e.jsx(p,{name:"server.ably_app_id",label:e.jsx(n,{message:"Ably app ID"}),className:"mb-30",required:!0}),e.jsx(p,{name:"server.ably_app_key",label:e.jsx(n,{message:"Ably app key"}),className:"mb-30",required:!0}),e.jsx(p,{name:"server.ably_app_secret",label:e.jsx(n,{message:"Ably app secret"}),className:"mb-30",required:!0})]})}function Ld(){return e.jsx(je,{title:e.jsx(n,{message:"Recaptcha"}),description:e.jsx(n,{message:"Configure google recaptcha integration and credentials."}),children:s=>e.jsx(qd,{data:s})})}function qd({data:s}){var r,i,l,o,c,m,x,h;const{settings:t}=d.useContext(is),a=I({defaultValues:{client:{recaptcha:{enable:{link_creation:((i=(r=s.client.recaptcha)==null?void 0:r.enable)==null?void 0:i.link_creation)??!1,contact:((o=(l=s.client.recaptcha)==null?void 0:l.enable)==null?void 0:o.contact)??!1,register:((m=(c=s.client.recaptcha)==null?void 0:c.enable)==null?void 0:m.register)??!1},site_key:((x=s.client.recaptcha)==null?void 0:x.site_key)??"",secret_key:((h=s.client.recaptcha)==null?void 0:h.secret_key)??""}}}});return e.jsxs(pe,{form:a,children:[(t==null?void 0:t.showRecaptchaLinkSwitch)&&e.jsx(D,{className:"mb-30",name:"client.recaptcha.enable.link_creation",description:e.jsx(n,{message:"Enable recaptcha integration when creating links from homepage or user dashboard."}),children:e.jsx(n,{message:"Link creation"})}),e.jsx(D,{className:"mb-30",name:"client.recaptcha.enable.contact",description:e.jsx(n,{message:'Enable recaptcha integration for "contact us" page.'}),children:e.jsx(n,{message:"Contact page"})}),e.jsx(D,{className:"mb-30",name:"client.recaptcha.enable.register",description:e.jsx(n,{message:"Enable recaptcha integration for registration page."}),children:e.jsx(n,{message:"Registration page"})}),e.jsx($d,{})]})}function $d(){const{clearErrors:s}=N();return e.jsx(ue,{separatorTop:!1,separatorBottom:!1,name:"recaptcha_group",children:t=>e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"mb-30",onChange:()=>{s()},invalid:t,name:"client.recaptcha.site_key",label:e.jsx(n,{message:"Recaptcha v3 site key"})}),e.jsx(p,{onChange:()=>{s()},invalid:t,name:"client.recaptcha.secret_key",label:e.jsx(n,{message:"Recaptcha v3 secret key"})})]})})}const Rd=O.forwardRef((s,t)=>{const a=Va(t),{fieldProps:r,inputProps:i}=Or({...s,focusRef:a}),l=Rt(s);return e.jsx(Ur,{ref:t,fieldClassNames:l,...r,children:e.jsx("input",{type:"file",ref:a,...i,className:v(l.input,"py-8","file:bg-primary file:text-on-primary file:border-none file:rounded file:text-sm file:font-semibold file:px-10 file:h-24 file:mr-10")})})});function Vd({name:s,...t}){const{field:{onChange:a,onBlur:r,ref:i},fieldState:{invalid:l,error:o}}=gs({name:s}),[c,m]=O.useState(""),x={onChange:h=>{var f;a((f=h.target.files)==null?void 0:f[0]),m(h.target.value)},onBlur:r,value:c,invalid:l,errorMessage:o==null?void 0:o.message};return e.jsx(Rd,{ref:i,...rs(x,t)})}function Od(){return e.jsx(je,{title:e.jsx(n,{message:"Analytics"}),description:e.jsx(n,{message:"Configure google analytics integration and credentials."}),children:s=>e.jsx(Ud,{data:s})})}function Ud({data:s}){var a,r;const t=I({defaultValues:{files:{certificate:""},server:{analytics_property_id:s.server.analytics_property_id??""},client:{analytics:{tracking_code:((a=s.client.analytics)==null?void 0:a.tracking_code)??"",gchart_api_key:((r=s.client.analytics)==null?void 0:r.gchart_api_key)??""}}}});return e.jsx(pe,{form:t,children:e.jsx(Hd,{})})}function Hd(){const{clearErrors:s}=N();return e.jsx(ue,{separatorTop:!1,separatorBottom:!1,name:"analytics_group",children:t=>e.jsxs(d.Fragment,{children:[e.jsx(Vd,{className:"mb-30",onChange:()=>s(),invalid:t,name:"files.certificate",accept:".json",label:e.jsx(n,{message:"Google service account key file (.json)"})}),e.jsx(p,{className:"mb-30",onChange:()=>s(),invalid:t,name:"server.analytics_property_id",type:"number",label:e.jsx(n,{message:"Google analytics property ID"})}),e.jsx(p,{className:"mb-30",onChange:()=>s(),invalid:t,name:"client.analytics.tracking_code",placeholder:"G-******",min:"1",max:"20",description:e.jsx(n,{message:"Google analytics measurement ID only, not the whole javascript snippet."}),label:e.jsx(n,{message:"Google tag manager measurement ID"})}),e.jsx(p,{name:"client.analytics.gchart_api_key",label:e.jsx(n,{message:"Google maps javascript API key"}),description:e.jsx(n,{message:"Only required in order to show world geochart on integrated analytics pages."})})]})})}function Sn(){const[s,t]=d.useState(!1),a=d.useRef(),r=d.useCallback(i=>{var l;if(i){const o=new IntersectionObserver(([c])=>t(c.intersectionRatio<1),{threshold:[1]});a.current=o,o.observe(i)}else a.current&&((l=a.current)==null||l.disconnect())},[]);return{isSticky:s,sentinelRef:r}}function jt({onSubmit:s,form:t,title:a,subTitle:r,children:i,actions:l,backButton:o,isLoading:c=!1,disableSaveWhenNotDirty:m=!1,wrapInContainer:x=!0,submitButtonText:h,variant:f="sticky"}){const{isSticky:b,sentinelRef:y}=Sn(),w=m?Object.keys(t.formState.dirtyFields).length:!0,S=e.jsx(j,{variant:"flat",color:"primary",type:"submit",disabled:c||!w,children:h??e.jsx(n,{message:"Save"})});return e.jsxs(re,{onSubmit:s,onBeforeSubmit:()=>t.clearErrors(),form:t,className:"relative",children:[f==="sticky"&&e.jsx("div",{ref:y}),e.jsx(kn,{wrapInContainer:x,startActions:o,subTitle:r,endActions:e.jsxs(d.Fragment,{children:[l,f==="sticky"&&S]}),className:v(b&&"bg shadow",f==="sticky"&&"sticky"),children:a}),e.jsx("div",{className:x?"container mx-auto px-24 pb-24":void 0,children:e.jsx("div",{className:"rounded",children:i})}),f==="popup"&&e.jsx(Cn,{saveButton:S,isLoading:c})]})}function kn({className:s,wrapInContainer:t,children:a,subTitle:r,startActions:i,endActions:l}){return e.jsx("div",{className:v("top-0 z-10 my-12 transition-shadow md:my-24",s),children:e.jsxs("div",{className:v("flex items-center gap-24 py-14 md:items-start",t&&"container mx-auto px-24"),children:[i,e.jsxs("div",{className:"flex-auto overflow-hidden overflow-ellipsis md:mr-64",children:[e.jsx("h1",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap text-xl md:text-3xl",children:a}),r&&e.jsx("div",{className:"mt-4",children:r})]}),e.jsx("div",{className:"mr-auto"}),l]})})}function Nn({label:s,children:t,margin:a="mb-48",labelMargin:r="mb-16"}){return e.jsxs("section",{className:v(a),children:[e.jsx("div",{className:v(r,"text-lg font-semibold"),children:s}),t]})}function Cn({saveButton:s,isLoading:t}){const{formState:a,reset:r}=N();return e.jsx(Ms,{children:a.isDirty&&e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"invisible h-92"}),e.jsxs(He.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{duration:.2},className:"fixed bottom-0 left-0 right-0 z-20 flex items-center justify-center gap-16 border-t bg px-12 py-28 shadow-[rgba(0,0,0,0.2)_0px_0px_10px]",children:[e.jsx(j,{variant:"outline",onClick:()=>r(),children:e.jsx(n,{message:"Cancel"})}),s??e.jsx(j,{variant:"flat",color:"primary",type:"submit",disabled:t,children:e.jsx(n,{message:"Save changes"})})]},"dirty-panel")]})})}function Bd({user:s,badge:t}){var i,l;const a=s.banned_at!==null,r=(l=(i=s.bans)==null?void 0:i[0])==null?void 0:l.comment;return e.jsxs("div",{className:"container mx-auto mb-44 mt-38 px-24",children:[e.jsxs("div",{className:"flex gap-32",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Wd,{user:s}),e.jsx("div",{className:"absolute right-0 top-2",children:t})]}),e.jsxs("div",{children:[!!s.roles.length&&e.jsx(at,{radius:"rounded-panel",size:"sm",className:"mb-6 w-max",children:s.roles[0].name}),e.jsx("h1",{className:"text-2xl font-semibold",children:s.name}),e.jsx("div",{className:"mt-4 text-sm text-muted",children:s.email})]})]}),a&&e.jsxs("div",{className:"mt-24 flex w-max items-center gap-8 rounded-panel bg-danger-lighter px-10 py-6 text-sm text-danger-darker",children:[e.jsx(Hr,{size:"sm"}),r?e.jsx(n,{message:"Suspended: :reason",values:{reason:r}}):e.jsx(n,{message:"Suspended"})]})]})}function Wd({user:s}){const t=Br({user:s}),a=Wr({user:s}),[r,i]=d.useState(s.image);return e.jsx(ms,{children:e.jsx(Kr,{value:r,diskPrefix:"avatars",variant:"avatar",stretchPreview:!0,previewSize:"w-90 h-90",placeholderIcon:e.jsx(tt,{label:s.name,size:"w-full h-full text-2xl",circle:!0}),showRemoveButton:!0,onChange:l=>{const o={onSuccess:()=>i(l)};l?t.mutate({url:l},o):a.mutate(void 0,o)}})})}function Kd(s){const{pathname:t}=Me(),a=t.split("/").pop();return d.useState(()=>{const r=s.findIndex(i=>i.uri===a);return r===-1?0:r})}const Gd=[{uri:"details",label:u("Details")},{uri:"permissions",label:u("Roles & permissions")},{uri:"security",label:u("Security")},{uri:"date",label:u("Date & time")},{uri:"api",label:u("API")}];function Qd({user:s,tabs:t}){const{user:a,hasPermission:r}=et(),{api:i}=de(),l=(i==null?void 0:i.integrated)&&r("api.access"),o=d.useMemo(()=>t.filter(x=>!(x.uri==="api"&&!l||x.uri==="security"&&s.id!==(a==null?void 0:a.id))),[s.id,a==null?void 0:a.id,l,t]),[c,m]=Kd(o);return e.jsx("div",{className:"container mx-auto px-24",children:e.jsxs(ht,{selectedTab:c,onTabChange:m,overflow:"overflow-visible",children:[e.jsx(pt,{className:"mb-24",children:o.map(x=>e.jsx(Ue,{elementType:U,to:x.uri,children:e.jsx(n,{...x.label})},x.uri))}),e.jsx(Be,{context:s})]})})}function Yd(){const{trans:s}=R();return L({mutationFn:t=>Jd(t.userId),onSuccess:async()=>{await M.invalidateQueries({queryKey:K("users")}),q(s(u("User deleted")))},onError:t=>J(t)})}function Jd(s){return z.delete(`users/${s}`).then(t=>t.data)}function Xd({user:s,children:t}){const a=an(s.id),r=s.banned_at!==null,[i,l]=d.useState(!1);return e.jsxs(d.Fragment,{children:[e.jsx(A,{type:"modal",isOpen:i,onOpenChange:l,children:e.jsx(Zd,{userId:s.id})}),e.jsxs(Le,{children:[e.jsx(j,{className:"ml-auto",variant:"outline",size:"sm",endIcon:e.jsx(Oa,{}),children:e.jsx(n,{message:"Actions"})}),e.jsxs(qe,{children:[t,e.jsx(g,{value:"toggleSuspension",onSelected:()=>{r?a.mutate():ct(tn,{user:s})},children:r?e.jsx(n,{message:"Unsuspend user"}):e.jsx(n,{message:"Suspend user"})}),e.jsx(g,{value:"delete",onSelected:()=>{l(!0)},children:e.jsx(n,{message:"Delete user"})})]})]})]})}function Zd({userId:s}){const t=Yd(),{close:a}=G(),r=ce();return e.jsx(he,{isDanger:!0,isLoading:t.isPending,title:e.jsx(n,{message:"Delete user"}),confirm:e.jsx(n,{message:"Delete"}),body:e.jsx(n,{message:"Are you sure you want to delete this user?"}),onConfirm:()=>{t.mutate({userId:s},{onSuccess:()=>{a(),r("..",{relative:"path"})}})}})}function eu(){var a;const{userId:s}=ie(),t=Gr(s,{with:["subscriptions","roles","permissions","bans"]});return e.jsxs(d.Fragment,{children:[e.jsx(Ts,{children:e.jsx(n,{message:"Edit user"})}),(a=t.data)!=null&&a.user?e.jsx(su,{user:t.data.user}):e.jsx(Ua,{query:t})]})}function su({user:s}){return e.jsxs(d.Fragment,{children:[e.jsx(kn,{wrapInContainer:!0,startActions:e.jsx(k,{elementType:U,to:"..",relative:"path",size:"sm",iconSize:"md",children:e.jsx(Xa,{})}),endActions:e.jsx(Xd,{user:s}),children:e.jsx(n,{message:"Edit user"})}),e.jsx(Bd,{user:s}),e.jsx(Qd,{tabs:Gd,user:s})]})}const tu=E(e.jsx("path",{d:"m12.87 15.07-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7 1.62-4.33L19.12 17h-3.24z"}),"TranslateOutlined"),ta=s=>{const t=["getLocaleWithLines"];return s!=null&&t.push(s),t};function au(s){return Ae({queryKey:ta(s),queryFn:()=>nu(s),staleTime:1/0})}function nu(s){return z.get(`localizations/${s}`).then(t=>t.data)}function ru({id:s,...t}){return z.put(`localizations/${s}`,t).then(a=>a.data)}function Fn(s){return L({mutationFn:t=>ru(t),onSuccess:()=>{q(u("Localization updated")),M.invalidateQueries({queryKey:K("localizations")}),M.invalidateQueries({queryKey:ta()})},onError:t=>s?ve(t,s):J(t)})}function iu({localization:s}){const{trans:t}=R(),{formId:a,close:r}=G(),i=I({defaultValues:{id:s.id,name:s.name,language:s.language}}),{data:l}=Se(["languages"]),o=(l==null?void 0:l.languages)||[],c=Fn(i);return e.jsxs(X,{children:[e.jsx(se,{children:e.jsx(n,{message:"Update localization"})}),e.jsx(ee,{children:e.jsxs(re,{form:i,id:a,onSubmit:m=>{c.mutate(m,{onSuccess:r})},children:[e.jsx(p,{name:"name",label:e.jsx(n,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(B,{required:!0,name:"language",label:e.jsx(n,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:t(u("Search languages")),children:o.map(m=>e.jsx(g,{value:m.code,children:m.name},m.code))})]})}),e.jsxs(ne,{children:[e.jsx(j,{onClick:r,children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",type:"submit",form:a,disabled:c.isPending,children:e.jsx(n,{message:"Save"})})]})]})}function lu(s){return z.post("localizations",s).then(t=>t.data)}function ou(s){const t=Xs();return L({mutationFn:a=>lu(a),onSuccess:()=>{q(u("Localization created")),t.invalidateQueries({queryKey:K("localizations")})},onError:a=>ve(a,s)})}function cu(){const{trans:s}=R(),{formId:t,close:a}=G(),r=I({defaultValues:{language:"en"}}),{data:i}=Se(["languages"]),l=(i==null?void 0:i.languages)||[],o=ou(r);return e.jsxs(X,{children:[e.jsx(se,{children:e.jsx(n,{message:"Create localization"})}),e.jsx(ee,{children:e.jsxs(re,{form:r,id:t,onSubmit:c=>{o.mutate(c,{onSuccess:a})},children:[e.jsx(p,{autoFocus:!0,name:"name",label:e.jsx(n,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(B,{required:!0,name:"language",label:e.jsx(n,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:s(u("Search languages")),children:l.map(c=>e.jsx(g,{value:c.code,children:c.name},c.code))})]})}),e.jsxs(ne,{children:[e.jsx(j,{onClick:a,children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",type:"submit",form:t,disabled:o.isPending,children:e.jsx(n,{message:"Save"})})]})]})}const du=""+new URL("around-the-world-df9b11c5.svg",import.meta.url).href;function zn(){return L({mutationFn:s=>uu(s),onSuccess:async()=>{await M.invalidateQueries({queryKey:K("localizations")}),await M.invalidateQueries({queryKey:ta()}),q(u("Translation file uploaded"))},onError:s=>J(s)})}function uu({localeId:s,file:t}){const a=new FormData;return a.append("file",t.native),z.post(`localizations/${s}/upload`,a).then(r=>r.data)}const mu=[{key:"name",allowsSorting:!0,sortingKey:"name",visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Name"}),body:s=>s.name},{key:"language",allowsSorting:!0,sortingKey:"language",header:()=>e.jsx(n,{message:"Language code"}),body:s=>s.language},{key:"updatedAt",allowsSorting:!0,width:"w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(me,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(Q,{label:e.jsx(n,{message:"Translate"}),children:e.jsx(k,{size:"md",elementType:U,to:`${s.id}/translate`,children:e.jsx(tu,{})})}),e.jsx(ms,{children:e.jsx(hu,{locale:s})})]})}];function xu(){return e.jsx(Ne,{endpoint:"localizations",title:e.jsx(n,{message:"Localizations"}),columns:mu,actions:e.jsx(gu,{}),selectedActions:e.jsx(os,{}),emptyStateMessage:e.jsx(be,{image:du,title:e.jsx(n,{message:"No localizations have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching localizations"})})})}function gu(){return e.jsx(d.Fragment,{children:e.jsxs(A,{type:"modal",children:[e.jsx(Pe,{children:e.jsx(n,{message:"Add new localization"})}),e.jsx(cu,{})]})})}function hu({locale:s}){const t=zn();return e.jsxs(Le,{children:[e.jsx(k,{disabled:t.isPending,children:e.jsx(mt,{})}),e.jsxs(qe,{children:[e.jsx(g,{value:"translate",elementType:U,to:`${s.id}/translate`,children:e.jsx(n,{message:"Translate"})}),e.jsx(g,{value:"rename",onSelected:()=>ct(iu,{localization:s}),children:e.jsx(n,{message:"Rename"})}),e.jsx(g,{value:"download",onSelected:()=>dt(`api/v1/localizations/${s.id}/download`),children:e.jsx(n,{message:"Download"})}),e.jsx(g,{value:"upload",onSelected:async()=>{const a=await Ha({types:[Ot.json]});a.length==1&&t.mutate({localeId:s.id,file:a[0]})},children:e.jsx(n,{message:"Upload"})})]})]})}function pu(){const{formId:s,close:t}=G(),a=I();return e.jsxs(X,{children:[e.jsx(se,{children:e.jsx(n,{message:"Add translation"})}),e.jsx(ee,{children:e.jsxs(re,{form:a,id:s,onSubmit:r=>{t(r)},children:[e.jsx(js,{className:"mb-30",title:e.jsx(n,{message:"Add a new translation, if it does not exist already."}),description:e.jsx(n,{message:"This should only need to be done for things like custom menu items."})}),e.jsx(p,{inputElementType:"textarea",rows:2,autoFocus:!0,name:"key",label:e.jsx(n,{message:"Translation key"}),className:"mb-30",required:!0}),e.jsx(p,{inputElementType:"textarea",rows:2,name:"value",label:e.jsx(n,{message:"Translation value"}),required:!0})]})}),e.jsxs(ne,{children:[e.jsx(j,{onClick:t,children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",type:"submit",form:s,children:e.jsx(n,{message:"Add"})})]})]})}function ju(){const{localeId:s}=ie(),{data:t,isLoading:a}=au(s),r=t==null?void 0:t.localization;return a||!r?e.jsx(hs,{}):e.jsx(fu,{localization:r})}function fu({localization:s}){const[t,a]=d.useState(s.lines||{}),r=ce(),i=Fn(),[l,o]=d.useState("");return e.jsxs("form",{className:"flex h-full flex-col p-14 md:p-24",onSubmit:c=>{c.preventDefault(),i.mutate({id:s.id,lines:t},{onSuccess:()=>{r("/admin/localizations")}})},children:[e.jsx(bu,{localization:s,setLines:a,lines:t,searchQuery:l,setSearchQuery:o,isLoading:i.isPending}),e.jsx(vu,{lines:t,setLines:a,searchQuery:l})]})}function bu({localization:s,searchQuery:t,setSearchQuery:a,isLoading:r,lines:i,setLines:l}){const o=ce(),c=ss(),{trans:m}=R();return e.jsxs("div",{className:"flex-shrink-0",children:[e.jsxs(Pi,{size:"lg",className:"mb-16",children:[e.jsx(da,{onSelected:()=>{o("/admin/localizations")},children:e.jsx(n,{message:"Localizations"})}),e.jsx(da,{children:e.jsx(n,{message:":locale translations",values:{locale:s.name}})})]}),e.jsxs("div",{className:"mb-24 flex items-center gap-32 md:gap-12",children:[e.jsx("div",{className:"max-w-440 flex-auto",children:e.jsx(Ke,{value:t,onChange:x=>a(x.target.value),startAdornment:e.jsx(Ut,{}),placeholder:m({message:"Type to search..."})})}),e.jsxs(A,{type:"modal",onClose:x=>{if(x){const h={...i};h[x.key]=x.value,l(h)}},children:[!c&&e.jsx(j,{className:"ml-auto",variant:"outline",color:"primary",startIcon:e.jsx(_e,{}),children:e.jsx(n,{message:"Add new"})}),e.jsx(pu,{})]}),e.jsx(yu,{locale:s}),e.jsx(j,{variant:"flat",color:"primary",type:"submit",disabled:r,children:c?e.jsx(n,{message:"Save"}):e.jsx(n,{message:"Save translations"})})]})]})}function vu({searchQuery:s,lines:t,setLines:a}){const r=d.useMemo(()=>Object.entries(t).filter(([o,c])=>{const m=s==null?void 0:s.toLowerCase();return!m||(o==null?void 0:o.toLowerCase().includes(m))||(c==null?void 0:c.toLowerCase().includes(m))}),[t,s]),i=d.useRef(null),l=zi({count:r.length,getScrollElement:()=>i.current,estimateSize:()=>123});return e.jsx("div",{className:"flex-auto overflow-y-auto",ref:i,children:e.jsx("div",{className:"relative w-full",style:{height:`${l.getTotalSize()}px`},children:l.getVirtualItems().map(o=>{const[c,m]=r[o.index];return e.jsx("div",{className:"absolute left-0 top-0 w-full",style:{height:`${o.size}px`,transform:`translateY(${o.start}px)`},children:e.jsxs("div",{className:"mb-10 rounded border md:mr-10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-24 border-b px-10 py-2",children:[e.jsx("label",{className:"flex-auto text-xs font-semibold",htmlFor:c,children:c}),e.jsx(k,{size:"xs",className:"text-muted",onClick:()=>{const x={...t};delete x[c],a(x)},children:e.jsx(De,{})})]}),e.jsx("div",{children:e.jsx("textarea",{id:c,name:c,defaultValue:m,className:"block w-full resize-none rounded bg-inherit p-10 text-sm outline-none focus-visible:ring-2",rows:2,onChange:x=>{const h={...t};h[c]=x.target.value,a(h)}})})]})},c)})})})}function yu({locale:s}){const t=zn();return e.jsxs(Le,{children:[e.jsx(k,{variant:"outline",size:"sm",color:"primary",disabled:t.isPending,children:e.jsx(mt,{})}),e.jsxs(qe,{children:[e.jsx(g,{value:"download",onSelected:()=>dt(`api/v1/localizations/${s.id}/download`),children:e.jsx(n,{message:"Download"})}),e.jsx(g,{value:"upload",onSelected:async()=>{const a=await Ha({types:[Ot.json]});a.length==1&&t.mutate({localeId:s.id,file:a[0]})},children:e.jsx(n,{message:"Upload"})})]})]})}function wu(s){const{close:t}=G(),{image:a,images:r}=s,[i,l]=it(s.activeIndex,s.defaultActiveIndex,s.onActiveIndexChange),o=a||(r==null?void 0:r[i]);return e.jsx(X,{size:"fullscreenTakeover",background:"bg-black/80",children:e.jsxs(ee,{padding:"p-0",className:"h-full w-full",children:[e.jsx(k,{size:"lg",color:"paper",className:"absolute right-0 top-0 z-20 text-white",onClick:()=>{t()},children:e.jsx(De,{})}),e.jsxs("div",{className:"relative flex h-full w-full items-center justify-center p-40",children:[r!=null&&r.length?e.jsx(k,{size:"lg",color:"white",variant:"flat",className:"absolute bottom-0 left-20 top-0 my-auto",disabled:i<1,onClick:()=>{l(i-1)},children:e.jsx(Zs,{})}):null,e.jsx("img",{src:o,alt:"",className:"max-h-full w-auto object-contain shadow"}),r!=null&&r.length?e.jsx(k,{size:"lg",color:"white",variant:"flat",className:"absolute bottom-0 right-20 top-0 my-auto",disabled:i+1===(r==null?void 0:r.length),onClick:()=>{l(i+1)},children:e.jsx(Ps,{})}):null]})]})})}function _u(){var t;const s=xt();return e.jsxs("div",{className:"container mx-auto p-12 md:p-24",children:[e.jsx(Ts,{children:e.jsx(n,{message:"Ads"})}),e.jsx("h1",{className:"mb-20 text-2xl font-light md:mb-40 md:text-3xl",children:e.jsx(n,{message:"Predefined Ad slots"})}),s.isLoading?e.jsx(Es,{isIndeterminate:!0}):e.jsx(Su,{defaultValues:((t=s.data)==null?void 0:t.client.ads)||{}})]})}function Su({defaultValues:s}){const{admin:{ads:t}}=d.useContext(is),a=I({defaultValues:{client:{ads:s}}}),r=bn(a);return e.jsxs(re,{form:a,onSubmit:i=>{r.mutate(i)},children:[t.map(i=>e.jsx(ku,{adConfig:i},i.slot)),e.jsx(D,{name:"client.ads.disable",className:"mb-30",description:e.jsx(n,{message:"Disable all add related functionality across the site."}),children:e.jsx(n,{message:"Disable ads"})}),e.jsx(j,{type:"submit",variant:"flat",color:"primary",disabled:r.isPending,children:e.jsx(n,{message:"Save"})})]})}function ku({adConfig:s}){return e.jsxs("div",{className:"flex items-center gap-24",children:[e.jsx(p,{className:"mb-30 flex-auto",name:`client.${s.slot}`,inputElementType:"textarea",rows:8,label:e.jsx(n,{...s.description})}),e.jsxs(A,{type:"modal",children:[e.jsx("button",{type:"button",className:"cursor-zoom-in overflow-hidden rounded outline-none transition hover:scale-105 focus-visible:ring max-md:hidden",children:e.jsx("img",{src:s.image,className:"h-[186px] w-auto border",alt:"Ad slot example"})}),e.jsx(wu,{image:s.image})]})]})}function Nu(){const s=Ye(a=>{var r;return(r=a.config)==null?void 0:r.sections}),t=d.useMemo(()=>s?Object.entries(s||[]).map(([a,r])=>({...r,key:a})).sort((a,r)=>((a==null?void 0:a.position)||1)-((r==null?void 0:r.position)||1)):[],[s]);return e.jsx(Yt,{children:t.map(a=>e.jsx(xe,{to:a.key,elementType:qt,children:e.jsx(n,{...a.label})},a.key))})}const Cu=[{key:"type",label:u("Type"),description:u("Type of the role"),defaultOperator:Y.ne,control:{type:ge.Select,defaultValue:"01",options:[{key:"01",label:u("Sitewide"),value:"sitewide"},{key:"02",label:u("Workspace"),value:"workspace"}]}},Ge({description:u("Date role was created")}),ls({description:u("Date role was last updated")})],Fu=[{key:"name",allowsSorting:!0,visibleInMode:"all",header:()=>e.jsx(n,{message:"Role"}),body:s=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(n,{message:s.name})}),e.jsx("div",{className:"overflow-x-hidden overflow-ellipsis text-xs text-muted",children:s.description?e.jsx(n,{message:s.description}):void 0})]})},{key:"type",maxWidth:"max-w-100",allowsSorting:!0,header:()=>e.jsx(n,{message:"Type"}),body:s=>e.jsx(n,{message:s.type})},{key:"updated_at",maxWidth:"max-w-100",allowsSorting:!0,header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(me,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,visibleInMode:"all",align:"end",width:"w-42 flex-shrink-0",body:s=>e.jsx(U,{to:`${s.id}/edit`,children:e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(We,{})})})}];function zu(){return e.jsx(Ne,{endpoint:"roles",title:e.jsx(n,{message:"Roles"}),columns:Fu,filters:Cu,actions:e.jsx(Iu,{}),selectedActions:e.jsx(os,{}),emptyStateMessage:e.jsx(be,{image:Fs,title:e.jsx(n,{message:"No roles have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching roles"})})})}function Iu(){return e.jsxs(d.Fragment,{children:[e.jsx(en,{endpoint:"roles/csv/export"}),e.jsx(Pe,{elementType:U,to:"new",children:e.jsx(n,{message:"Add new role"})})]})}const In=s=>`roles/${s}`;function Au(){const{roleId:s}=ie();return Ae({queryKey:[In(s)],queryFn:()=>Pu(s)})}function Pu(s){return z.get(In(s)).then(t=>t.data)}const An=s=>`roles/${s}`;function Tu(){const{trans:s}=R(),t=ce();return L({mutationFn:a=>Eu(a),onSuccess:a=>{q(s(u("Role updated"))),M.invalidateQueries({queryKey:[An(a.role.id)]}),M.invalidateQueries({queryKey:K("roles")}),t("/admin/roles")},onError:a=>J(a)})}function Eu({id:s,...t}){return z.put(An(s),t).then(a=>a.data)}function Pn({isInternal:s=!1}){const{trans:t}=R(),{workspaces:a}=de(),{watch:r,setValue:i}=N(),l=r("type");return e.jsxs(e.Fragment,{children:[e.jsx(p,{label:e.jsx(n,{message:"Name"}),name:"name",className:"mb-20",required:!0}),e.jsx(p,{label:e.jsx(n,{message:"Description"}),name:"description",inputElementType:"textarea",placeholder:t(u("Role description...")),rows:4,className:"mb-20"}),a.integrated&&e.jsxs(B,{label:e.jsx(n,{message:"Type"}),name:"type",selectionMode:"single",className:"mb-20",description:e.jsx(n,{message:"Whether this role will be assigned to users globally on the site or only within workspaces."}),children:[e.jsx(g,{value:"sitewide",children:e.jsx(n,{message:"Sitewide"})}),e.jsx(g,{value:"workspace",children:e.jsx(n,{message:"Workspace"})})]}),!s&&e.jsxs(e.Fragment,{children:[e.jsx(D,{name:"default",className:"mb-20",description:e.jsx(n,{message:"Assign this role to new users automatically."}),children:e.jsx(n,{message:"Default"})}),l==="sitewide"&&e.jsx(D,{name:"guests",description:e.jsx(n,{message:"Assign this role to guests (not logged in users)."}),children:e.jsx(n,{message:"Guests"})})]}),e.jsxs("div",{className:"mb-14 mt-30 flex items-end justify-between gap-12",children:[e.jsx("h2",{className:"text-lg leading-tight",children:e.jsx(n,{message:"Permissions"})}),e.jsx(j,{variant:"outline",size:"xs",onClick:()=>i("permissions",[]),children:e.jsx(n,{message:"Remove all"})})]}),e.jsx(Gt,{name:"permissions",valueListKey:l==="sitewide"?"permissions":"workspacePermissions"})]})}function Du({multiple:s=!1,endpoint:t="normalized-models/user"}){var f;const{close:a}=G(),[r,i]=d.useState(""),{trans:l}=R(),o=Ba(t,{query:r,perPage:14}),c=((f=o.data)==null?void 0:f.results)||[],[m,x]=d.useState([]),h=e.jsx(Mt,{className:"pt-20",size:"sm",title:e.jsx(n,{message:"No matching users"}),description:e.jsx(n,{message:"Try another search query"}),image:e.jsx(Lt,{src:Fs})});return e.jsxs(X,{children:[e.jsx(se,{children:s?e.jsx(n,{message:"Select users"}):e.jsx(n,{message:"Select a user"})}),e.jsxs(ee,{children:[e.jsx(Ke,{autoFocus:!0,size:"sm",className:"mb-20",startAdornment:e.jsx(Ut,{}),placeholder:l(u("Search for user by name or email")),value:r,onChange:b=>{i(b.target.value)}}),!o.isLoading&&!c.length&&h,e.jsx("div",{className:"grid grid-cols-2 gap-x-10",children:c.map(b=>e.jsx(Mu,{isSelected:!!m.find(y=>y.id===b.id),user:b,onSelected:y=>{s?m.find(w=>w.id===y.id)?x(m.filter(w=>w.id!==y.id)):x([...m,y]):a(y)}},b.id))})]}),s&&e.jsxs(ne,{children:[e.jsx(j,{onClick:()=>a(),children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{variant:"flat",color:"primary",onClick:()=>a(m),disabled:!m.length,children:e.jsx(n,{message:"Select"})})]})]})}function Mu({user:s,onSelected:t,isSelected:a}){return e.jsxs("div",{className:v("flex items-center gap-10 rounded border-1 p-10 outline-none ring-offset-4 focus-visible:ring",a?"border-primary bg-primary/5 hover:bg-primary/10":"border-transparent hover:bg-hover"),role:"button",tabIndex:0,onClick:()=>{t(s)},onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),t(s))},children:[e.jsx(tt,{src:s.image,label:s.name,circle:!0}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("div",{className:"overflow-hidden text-ellipsis",children:s.name}),e.jsx("div",{className:"overflow-hidden text-ellipsis text-muted",children:s.description})]})]},s.id)}function Lu(s){return L({mutationFn:({userIds:t})=>qu({userIds:t,roleId:s.id}),onSuccess:(t,a)=>{q(u("Removed [one 1 user|other :count users] from “{role}“",{values:{count:a.userIds.length,role:s.name}}))},onError:t=>J(t)})}function qu({roleId:s,userIds:t}){return z.post(`roles/${s}/remove-users`,{userIds:t}).then(a=>a.data)}function $u(s){return L({mutationFn:({userIds:t})=>Ru({userIds:t,roleId:s.id}),onSuccess:(t,a)=>{q(u("Assigned [one 1 user|other :count users] to {role}",{values:{count:a.userIds.length,role:s.name}}))},onError:t=>J(t)})}function Ru({roleId:s,userIds:t}){return z.post(`roles/${s}/add-users`,{userIds:t}).then(a=>a.data)}const Tn={key:"name",allowsSorting:!0,sortingKey:"email",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"User"}),body:s=>e.jsx(Qe,{image:s.image,label:s.name,description:s.email})},Vu=[Tn,{key:"first_name",allowsSorting:!0,header:()=>e.jsx(n,{message:"First name"}),body:s=>s.first_name},{key:"last_name",allowsSorting:!0,header:()=>e.jsx(n,{message:"Last name"}),body:s=>s.last_name},{key:"created_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Assigned at"}),body:s=>e.jsx(me,{date:s.created_at})}],Ou=[Tn];function Uu({role:s}){const t=ss();return s.guests||s.type==="workspace"?e.jsx("div",{className:"pb-10 pt-30",children:e.jsx(be,{image:Fs,title:e.jsx(n,{message:"Users can't be assigned to this role"})})}):e.jsx(Ea,{endpoint:"users",columns:t?Ou:Vu,queryParams:{roleId:`${s.id}`},actions:e.jsx(Hu,{role:s}),selectedActions:e.jsx(Bu,{role:s}),emptyStateMessage:e.jsx(be,{image:Fs,title:e.jsx(n,{message:"No users have been assigned to this role yet"}),filteringTitle:e.jsx(n,{message:"No matching users"})})})}function Hu({role:s}){const t=$u(s);return e.jsxs(A,{type:"modal",onClose:a=>{a&&t.mutate({userIds:[a.id]},{onSuccess:()=>{M.invalidateQueries({queryKey:K("users",{roleId:`${s.id}`})})}})},children:[e.jsx(j,{variant:"flat",color:"primary",disabled:t.isPending,children:e.jsx(n,{message:"Assign user"})}),e.jsx(Du,{})]})}function Bu({role:s}){const t=Lu(s),{selectedRows:a}=st();return e.jsxs(A,{type:"modal",onClose:r=>{r&&t.mutate({userIds:a},{onSuccess:()=>{M.invalidateQueries({queryKey:K("users",{roleId:`${s.id}`})})}})},children:[e.jsx(j,{variant:"flat",color:"danger",disabled:t.isPending,children:e.jsx(n,{message:"Remove users"})}),e.jsx(he,{title:e.jsx(n,{message:"Remove [one 1 user|other :count users] from “:name“ role?",values:{count:a.length,name:s.name}}),body:e.jsx(n,{message:"This will permanently remove the users."}),confirm:e.jsx(n,{message:"Remove"}),isDanger:!0})]})}function Wu(){const s=Au();return s.status!=="success"?e.jsx(hs,{}):e.jsx(Ku,{role:s.data.role})}function Ku({role:s}){const t=I({defaultValues:s}),a=Tu();return e.jsx(jt,{form:t,onSubmit:r=>{a.mutate(r)},title:e.jsx(n,{message:"Edit “:name“ role",values:{name:s.name}}),isLoading:a.isPending,children:e.jsxs(ht,{isLazy:!0,children:[e.jsxs(pt,{children:[e.jsx(Ue,{children:e.jsx(n,{message:"Settings"})}),e.jsx(Ue,{children:e.jsx(n,{message:"Users"})})]}),e.jsxs(_n,{className:"pt-20",children:[e.jsx(Js,{children:e.jsx(Pn,{isInternal:s.internal})}),e.jsx(Js,{children:e.jsx(Uu,{role:s})})]})]})})}const Gu="roles";function Qu(s){const{trans:t}=R();return L({mutationFn:a=>Yu(a),onSuccess:()=>{q(t(u("Created new role"))),M.invalidateQueries({queryKey:K("roles")})},onError:a=>ve(a,s)})}function Yu({id:s,...t}){return z.post(Gu,t).then(a=>a.data)}function Ju(){const s=I({defaultValues:{type:"sitewide"}}),t=Qu(s),a=ce();return e.jsx(jt,{form:s,onSubmit:r=>{t.mutate(r,{onSuccess:i=>{a(`/admin/roles/${i.role.id}/edit`)}})},title:e.jsx(n,{message:"Add new role"}),isLoading:t.isPending,children:e.jsx(Pn,{})})}const Xu=s=>[{key:"type",label:u("Type"),description:u("Type of the tag"),defaultOperator:Y.ne,control:{type:ge.Select,defaultValue:s[0].name,options:s.map(t=>({key:t.name,label:u(t.name),value:t.name}))}},Ge({description:u("Date tag was created")}),ls({description:u("Date tag was last updated")})],En=""+new URL("software-engineer-ba026106.svg",import.meta.url).href;function Dn({form:s,onSubmit:t,formId:a}){const{tags:{types:r}}=d.useContext(is),i=s.watch("type"),l=!!r.find(o=>o.name===i&&o.system);return e.jsxs(re,{id:a,form:s,onSubmit:t,children:[e.jsx(p,{name:"name",label:e.jsx(n,{message:"Name"}),description:e.jsx(n,{message:"Unique tag identifier."}),className:"mb-20",required:!0,autoFocus:!0}),e.jsx(p,{name:"display_name",label:e.jsx(n,{message:"Display name"}),description:e.jsx(n,{message:"User friendly tag name."}),className:"mb-20"}),e.jsx(B,{label:e.jsx(n,{message:"Type"}),name:"type",selectionMode:"single",disabled:l,children:r.filter(o=>!o.system).map(o=>e.jsx(g,{value:o.name,children:e.jsx(n,{message:o.name})},o.name))})]})}var Mn={exports:{}};(function(s,t){(function(a,r,i){s.exports=i(),s.exports.default=i()})("slugify",Qr,function(){var a=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),r=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function i(l,o){if(typeof l!="string")throw new Error("slugify: string argument expected");o=typeof o=="string"?{replacement:o}:o||{};var c=r[o.locale]||{},m=o.replacement===void 0?"-":o.replacement,x=o.trim===void 0?!0:o.trim,h=l.normalize().split("").reduce(function(f,b){var y=c[b];return y===void 0&&(y=a[b]),y===void 0&&(y=b),y===m&&(y=" "),f+y.replace(o.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return o.strict&&(h=h.replace(/[^A-Za-z0-9\s]/g,"")),x&&(h=h.trim()),h=h.replace(/\s+/g,m),o.lower&&(h=h.toLowerCase()),h}return i.extend=function(l){Object.assign(a,l)},i})})(Mn);var Zu=Mn.exports;const em=Yr(Zu);function aa(s,t="-",a=!1){if(!s)return s;let r=em(s,{lower:!0,replacement:t,strict:a,remove:/[*+~.()'"!:@?\|/\\#]/g});return r||(r=s.replace(/\s+/g,"-").toLowerCase()),r}function sm(s){const{trans:t}=R();return L({mutationFn:a=>tm(a),onSuccess:()=>{q(t(u("Tag created"))),M.invalidateQueries({queryKey:K("tags")})},onError:a=>ve(a,s)})}function tm(s){return s.name=aa(s.name),z.post("tags",s).then(t=>t.data)}function am(){const{close:s,formId:t}=G(),{tags:{types:a}}=d.useContext(is),r=I({defaultValues:{type:a[0].name}}),i=sm(r);return e.jsxs(X,{children:[e.jsx(se,{children:e.jsx(n,{message:"Add new tag"})}),e.jsx(ee,{children:e.jsx(Dn,{formId:t,form:r,onSubmit:l=>{i.mutate(l,{onSuccess:()=>{s()}})}})}),e.jsxs(ne,{children:[e.jsx(j,{onClick:()=>{s()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{form:t,disabled:i.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(n,{message:"Save"})})]})]})}function nm(s){const{trans:t}=R();return L({mutationFn:a=>rm(a),onSuccess:()=>{q(t(u("Tag updated"))),M.invalidateQueries({queryKey:K("tags")})},onError:a=>ve(a,s)})}function rm({id:s,...t}){return t.name&&(t.name=aa(t.name)),z.put(`tags/${s}`,t).then(a=>a.data)}function im({tag:s}){const{close:t,formId:a}=G(),r=I({defaultValues:{id:s.id,name:s.name,display_name:s.display_name,type:s.type}}),i=nm(r);return e.jsxs(X,{children:[e.jsx(se,{children:e.jsx(n,{message:"Update “:name“ tag",values:{name:s.name}})}),e.jsx(ee,{children:e.jsx(Dn,{formId:a,form:r,onSubmit:l=>{i.mutate(l,{onSuccess:()=>{t()}})}})}),e.jsxs(ne,{children:[e.jsx(j,{onClick:()=>{t()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{form:a,disabled:i.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(n,{message:"Save"})})]})]})}const lm=[{key:"name",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Name"}),body:s=>s.name},{key:"type",allowsSorting:!0,header:()=>e.jsx(n,{message:"Type"}),body:s=>s.type},{key:"display_name",allowsSorting:!0,header:()=>e.jsx(n,{message:"Display name"}),body:s=>s.display_name},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(me,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs(A,{type:"modal",children:[e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(We,{})}),e.jsx(im,{tag:s})]})}];function om(){const{tags:s}=d.useContext(is),t=d.useMemo(()=>Xu(s.types),[s.types]);return e.jsx(Ne,{endpoint:"tags",title:e.jsx(n,{message:"Tags"}),columns:lm,filters:t,actions:e.jsx(cm,{}),selectedActions:e.jsx(os,{}),emptyStateMessage:e.jsx(be,{image:En,title:e.jsx(n,{message:"No tags have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching tags"})})})}function cm(){return e.jsx(e.Fragment,{children:e.jsxs(A,{type:"modal",children:[e.jsx(Pe,{children:e.jsx(n,{message:"Add new tag"})}),e.jsx(am,{})]})})}const Ln=E(e.jsx("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"}),"VisibilityOutlined"),dm=""+new URL("upload-cabfc914.svg",import.meta.url).href,um={key:"type",label:u("Type"),description:u("Type of the file"),defaultOperator:Y.eq,control:{type:ge.Select,defaultValue:"05",options:[{key:"02",label:u("Text"),value:"text"},{key:"03",label:u("Audio"),value:"audio"},{key:"04",label:u("Video"),value:"video"},{key:"05",label:u("Image"),value:"image"},{key:"06",label:u("PDF"),value:"pdf"},{key:"07",label:u("Spreadsheet"),value:"spreadsheet"},{key:"08",label:u("Word Document"),value:"word"},{key:"09",label:u("Photoshop"),value:"photoshop"},{key:"10",label:u("Archive"),value:"archive"},{key:"11",label:u("Folder"),value:"folder"}]}},mm=[um,{key:"public",label:u("Visibility"),description:u("Whether file is publicly accessible"),defaultOperator:Y.eq,control:{type:ge.Select,defaultValue:"01",options:[{key:"01",label:u("Private"),value:!1},{key:"02",label:u("Public"),value:!0}]}},Ge({description:u("Date file was uploaded")}),ls({description:u("Date file was last changed")}),{key:"owner_id",label:u("Uploader"),description:u("User that this file was uploaded by"),defaultOperator:Y.eq,control:{type:ge.SelectModel,model:fn}}],xm=[{key:"name",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Name"}),body:s=>e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"overflow-x-hidden overflow-ellipsis",children:s.name}),e.jsx("div",{className:"overflow-x-hidden overflow-ellipsis text-xs text-muted",children:s.file_name})]})},{key:"owner_id",allowsSorting:!0,width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Uploader"}),body:s=>{var a,r;const t=((a=s.users)==null?void 0:a.find(i=>i.owns_entry))??((r=s.users)==null?void 0:r[0]);return t?e.jsx(Qe,{image:t.image,label:t.name,description:t.email}):null}},{key:"type",width:"w-100 flex-shrink-0",allowsSorting:!0,header:()=>e.jsx(n,{message:"Type"}),body:s=>e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx(Jr,{type:s.type,className:"h-24 w-24 overflow-hidden"}),e.jsx("div",{className:"capitalize",children:s.type})]})},{key:"public",allowsSorting:!0,width:"w-60 flex-shrink-0",header:()=>e.jsx(n,{message:"Public"}),body:s=>s.public?e.jsx(Gs,{className:"text-positive icon-md"}):e.jsx(De,{className:"text-danger icon-md"})},{key:"file_size",allowsSorting:!0,maxWidth:"max-w-100",header:()=>e.jsx(n,{message:"File size"}),body:s=>e.jsx(Ya,{bytes:s.file_size})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(me,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsxs(A,{type:"modal",children:[e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(Ln,{})}),e.jsx(Ii,{entries:[s]})]})}];function gm(){return e.jsx(Ne,{endpoint:"file-entries",title:e.jsx(n,{message:"Uploaded files and folders"}),columns:xm,filters:mm,selectedActions:e.jsx(os,{}),emptyStateMessage:e.jsx(be,{image:dm,title:e.jsx(n,{message:"Nothing has been uploaded yet"}),filteringTitle:e.jsx(n,{message:"No matching files or folders"})})})}const hm=[{key:"ends_at",label:u("Status"),description:u("Whether subscription is active or cancelled"),defaultOperator:Y.eq,control:{type:ge.Select,defaultValue:"active",options:[{key:"active",label:u("Active"),value:{value:null,operator:Y.eq}},{key:"cancelled",label:u("Cancelled"),value:{value:null,operator:Y.ne}}]}},{control:{type:ge.Select,defaultValue:"stripe",options:[{key:"stripe",label:u("Stripe"),value:"stripe"},{key:"paypal",label:u("PayPal"),value:"paypal"},{key:"none",label:u("None"),value:"none"}]},key:"gateway_name",label:u("Gateway"),description:u("With which payment provider was subscription created"),defaultOperator:Y.eq},Kt({key:"renews_at",label:u("Renew date"),description:u("Date subscription will renew")}),Ge({description:u("Date subscription was created")}),ls({description:u("Date subscription was last updated")})],pm=""+new URL("subscriptions-7eacea42.svg",import.meta.url).href;function jm(s){const{trans:t}=R();return L({mutationFn:a=>fm(a),onSuccess:()=>{q(t(u("Subscription updated"))),M.invalidateQueries({queryKey:K("billing/subscriptions")})},onError:a=>ve(a,s)})}function fm({id:s,...t}){return z.put(`billing/subscriptions/${s}`,t).then(a=>a.data)}function qn({form:s,onSubmit:t,formId:a}){var o,c;const r=Xr(),i=s.watch("product_id"),l=(o=r.data)==null?void 0:o.products.find(m=>m.id===i);return e.jsxs(re,{id:a,form:s,onSubmit:t,children:[e.jsx(Zr,{name:"user_id",className:"mb-20",endpoint:"normalized-models/user",label:e.jsx(n,{message:"User"})}),e.jsx(B,{name:"product_id",selectionMode:"single",className:"mb-20",label:e.jsx(n,{message:"Plan"}),children:(c=r.data)==null?void 0:c.products.filter(m=>!m.free).map(m=>e.jsx(g,{value:m.id,children:e.jsx(n,{message:m.name})},m.id))}),!(l!=null&&l.free)&&e.jsx(B,{name:"price_id",selectionMode:"single",className:"mb-20",label:e.jsx(n,{message:"Price"}),children:l==null?void 0:l.prices.map(m=>e.jsx(g,{value:m.id,children:e.jsx(Ht,{price:m})},m.id))}),e.jsx(p,{inputElementType:"textarea",rows:3,name:"description",label:e.jsx(n,{message:"Description"}),className:"mb-20"}),e.jsx(Ft,{className:"mb-20",name:"renews_at",granularity:"day",label:e.jsx(n,{message:"Renews at"}),description:e.jsx(n,{message:"This will only change local records. User will continue to be billed on their original cycle on the payment gateway."})}),e.jsx(Ft,{className:"mb-20",name:"ends_at",granularity:"day",label:e.jsx(n,{message:"Ends at"}),description:e.jsx(n,{message:"This will only change local records. User will continue to be billed on their original cycle on the payment gateway."})})]})}function bm({subscription:s}){const{close:t,formId:a}=G(),r=I({defaultValues:{id:s.id,product_id:s.product_id,price_id:s.price_id,description:s.description,renews_at:s.renews_at,ends_at:s.ends_at,user_id:s.user_id}}),i=jm(r);return e.jsxs(X,{size:"md",children:[e.jsx(se,{children:e.jsx(n,{message:"Update subscription"})}),e.jsx(ee,{children:e.jsx(qn,{formId:a,form:r,onSubmit:l=>{i.mutate(l,{onSuccess:()=>{t()}})}})}),e.jsxs(ne,{children:[e.jsx(j,{onClick:()=>{t()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{form:a,disabled:i.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(n,{message:"Save"})})]})]})}const $n="billing/subscriptions";function vm(s){const{trans:t}=R();return L({mutationFn:a=>ym(a),onSuccess:()=>{q(t(u("Subscription created"))),M.invalidateQueries({queryKey:K($n)})},onError:a=>ve(a,s)})}function ym(s){return z.post($n,s).then(t=>t.data)}function wm(){const{close:s,formId:t}=G(),a=I({}),r=vm(a);return e.jsxs(X,{children:[e.jsx(se,{children:e.jsx(n,{message:"Add new subscription"})}),e.jsx(ee,{children:e.jsx(qn,{formId:t,form:a,onSubmit:i=>{r.mutate(i,{onSuccess:()=>{s()}})}})}),e.jsxs(ne,{children:[e.jsx(j,{onClick:()=>{s()},children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{form:t,disabled:r.isPending,variant:"flat",color:"primary",type:"submit",children:e.jsx(n,{message:"Save"})})]})]})}const _m=E(e.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}),"PauseOutlined"),Sm=E(e.jsx("path",{d:"M10 8.64 15.27 12 10 15.36V8.64M8 5v14l11-7L8 5z"}),"PlayArrowOutlined"),ft="billing/subscriptions",km=[{key:"user_id",allowsSorting:!0,width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(n,{message:"Customer"}),body:s=>s.user&&e.jsx(Qe,{image:s.user.image,label:s.user.name,description:s.user.email})},{key:"status",width:"w-100 flex-shrink-0",header:()=>e.jsx(n,{message:"Status"}),body:s=>e.jsx(at,{size:"xs",color:s.valid?"positive":"danger",radius:"rounded",className:"w-max",children:s.gateway_status})},{key:"product_id",allowsSorting:!0,header:()=>e.jsx(n,{message:"Plan"}),body:s=>{var t;return(t=s.product)==null?void 0:t.name}},{key:"gateway_name",allowsSorting:!0,header:()=>e.jsx(n,{message:"Gateway"}),body:s=>e.jsx("span",{className:"capitalize",children:s.gateway_name})},{key:"renews_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Renews at"}),body:s=>e.jsx(me,{date:s.renews_at})},{key:"ends_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Ends at"}),body:s=>e.jsx(me,{date:s.ends_at})},{key:"created_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Created at"}),body:s=>e.jsx(me,{date:s.created_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",visibleInMode:"all",width:"w-[168px] flex-shrink-0",body:s=>e.jsx(Fm,{subscription:s})}];function Nm(){return e.jsx(Ne,{endpoint:ft,title:e.jsx(n,{message:"Subscriptions"}),columns:km,filters:hm,actions:e.jsx(Cm,{}),enableSelection:!1,selectedActions:e.jsx(os,{}),queryParams:{with:"product"},emptyStateMessage:e.jsx(be,{image:pm,title:e.jsx(n,{message:"No subscriptions have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching subscriptions"})})})}function Cm(){return e.jsx(e.Fragment,{children:e.jsxs(A,{type:"modal",children:[e.jsx(Pe,{children:e.jsx(n,{message:"Add new subscription"})}),e.jsx(wm,{})]})})}function Fm({subscription:s}){return e.jsxs(d.Fragment,{children:[e.jsxs(A,{type:"modal",children:[e.jsx(k,{size:"md",className:"text-muted",children:e.jsx(We,{})}),e.jsx(bm,{subscription:s})]}),s.cancelled&&s.on_grace_period?e.jsx(Im,{subscription:s}):null,s.active?e.jsx(zm,{subscription:s}):null,e.jsx(Am,{subscription:s})]})}function zm({subscription:s}){const t=Ja(),a=()=>{t.mutate({subscriptionId:s.id},{onSuccess:()=>{M.invalidateQueries({queryKey:K(ft)})}})};return e.jsxs(A,{type:"modal",onClose:r=>{r&&a()},children:[e.jsx(Q,{label:e.jsx(n,{message:"Cancel subscription"}),children:e.jsx(k,{size:"md",className:"text-muted",disabled:t.isPending,children:e.jsx(_m,{})})}),e.jsx(he,{title:e.jsx(n,{message:"Cancel subscription"}),body:e.jsxs("div",{children:[e.jsx(n,{message:"Are you sure you want to cancel this subscription?"}),e.jsx("div",{className:"mt-10 text-sm font-semibold",children:e.jsx(n,{message:"This will put user on grace period until their next scheduled renewal date. Subscription can be renewed until that date by user or from admin area."})})]}),confirm:e.jsx(n,{message:"Confirm"})})]})}function Im({subscription:s}){const t=Mi(),a=()=>{t.mutate({subscriptionId:s.id},{onSuccess:()=>{M.invalidateQueries({queryKey:K(ft)})}})};return e.jsxs(A,{type:"modal",onClose:r=>{r&&a()},children:[e.jsx(Q,{label:e.jsx(n,{message:"Renew subscription"}),children:e.jsx(k,{size:"md",className:"text-muted",onClick:a,disabled:t.isPending,children:e.jsx(Sm,{})})}),e.jsx(he,{title:e.jsx(n,{message:"Resume subscription"}),body:e.jsxs("div",{children:[e.jsx(n,{message:"Are you sure you want to resume this subscription?"}),e.jsx("div",{className:"mt-10 text-sm font-semibold",children:e.jsx(n,{message:"This will put user on their original plan and billing cycle."})})]}),confirm:e.jsx(n,{message:"Confirm"})})]})}function Am({subscription:s}){const t=Ja(),a=()=>{t.mutate({subscriptionId:s.id,delete:!0},{onSuccess:()=>{M.invalidateQueries({queryKey:K(ft)})}})};return e.jsxs(A,{type:"modal",onClose:r=>{r&&a()},children:[e.jsx(Q,{label:e.jsx(n,{message:"Delete subscription"}),children:e.jsx(k,{size:"md",className:"text-muted",disabled:t.isPending,children:e.jsx(De,{})})}),e.jsx(he,{isDanger:!0,title:e.jsx(n,{message:"Delete subscription"}),body:e.jsxs("div",{children:[e.jsx(n,{message:"Are you sure you want to delete this subscription?"}),e.jsx("div",{className:"mt-10 text-sm font-semibold",children:e.jsx(n,{message:"This will permanently delete the subscription and immediately cancel it on billing gateway. Subscription will not be renewable anymore."})})]}),confirm:e.jsx(n,{message:"Confirm"})})]})}const Pm=E(e.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"SyncOutlined");function Tm(){const{trans:s}=R();return L({mutationFn:()=>Em(),onSuccess:()=>{q(s(u("Plans synced")))},onError:t=>J(t,u("Could not sync plans"))})}function Em(){return z.post("billing/products/sync").then(s=>s.data)}const Dm=s=>`billing/products/${s}`;function Mm(){const{trans:s}=R();return L({mutationFn:t=>Lm(t),onSuccess:()=>{q(s(u("Plan deleted"))),M.invalidateQueries({queryKey:K("billing/products")})},onError:t=>J(t)})}function Lm({productId:s}){return z.delete(Dm(s)).then(t=>t.data)}const qm=[{key:"subscriptions",label:u("Subscriptions"),description:u("Whether plan has any active subscriptions"),defaultOperator:Y.eq,control:{type:ge.Select,defaultValue:"01",options:[{key:"01",label:u("Has active subscriptions"),value:{value:"*",operator:Y.has}},{key:"02",label:u("Does not have active subscriptions"),value:{value:"*",operator:Y.doesntHave}}]}},Ge({description:u("Date plan was created")}),ls({description:u("Date plan was last updated")})],$m=[{key:"name",allowsSorting:!0,visibleInMode:"all",header:()=>e.jsx(n,{message:"Name"}),body:s=>{const t=s.prices[0];return e.jsx(Qe,{label:s.name,description:s.free?e.jsx(n,{message:"Free"}):e.jsx(Ht,{price:t})})}},{key:"created_at",allowsSorting:!0,maxWidth:"max-w-100",header:()=>e.jsx(n,{message:"Created"}),body:s=>e.jsx(me,{date:s.created_at})},{key:"updated_at",allowsSorting:!0,maxWidth:"max-w-100",header:()=>e.jsx(n,{message:"Last updated"}),body:s=>e.jsx(me,{date:s.updated_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),visibleInMode:"all",hideHeader:!0,align:"end",maxWidth:"max-w-84",body:s=>e.jsxs(d.Fragment,{children:[e.jsx(k,{size:"md",className:"text-muted",elementType:U,to:`/admin/plans/${s.id}/edit`,children:e.jsx(We,{})}),e.jsx(Vm,{product:s})]})}];function Rm(){const s=ce();return e.jsx(Ne,{endpoint:"billing/products",title:e.jsx(n,{message:"Subscription plans"}),columns:$m,actions:e.jsx(Om,{}),enableSelection:!1,filters:qm,onRowAction:t=>{s(`/admin/plans/${t.id}/edit`)},emptyStateMessage:e.jsx(be,{image:En,title:e.jsx(n,{message:"No plans have been created yet"}),filteringTitle:e.jsx(n,{message:"No matching plans"})})})}function Vm({product:s}){const t=Mm();return e.jsxs(A,{type:"modal",onClose:a=>{a&&t.mutate({productId:s.id})},children:[e.jsx(Q,{label:e.jsx(n,{message:"Delete plan"}),children:e.jsx(k,{size:"md",className:"text-muted",disabled:t.isPending,children:e.jsx(ut,{})})}),e.jsx(he,{title:e.jsx(n,{message:"Delete plan"}),body:e.jsx(n,{message:"Are you sure you want to delete this plan?"}),confirm:e.jsx(n,{message:"Delete"})})]})}function Om(){const s=Tm();return e.jsxs(d.Fragment,{children:[e.jsx(Q,{label:e.jsx(n,{message:"Sync plans with Stripe & PayPal"}),children:e.jsx(k,{color:"primary",variant:"outline",size:"sm",disabled:s.isPending,onClick:()=>{s.mutate()},children:e.jsx(Pm,{})})}),e.jsx(Pe,{elementType:U,to:"/admin/plans/new",children:e.jsx(n,{message:"Add new plan"})})]})}const Rn=s=>`billing/products/${s}`;function Um(){const{productId:s}=ie();return Ae({queryKey:[Rn(s)],queryFn:()=>Hm(s)})}function Hm(s){return z.get(Rn(s)).then(t=>t.data)}const Tt=[{key:"day1",label:u("Daily"),interval:"day",interval_count:1},{key:"week1",label:u("Weekly"),interval:"week",interval_count:1},{key:"month1",label:u("Monthly"),interval:"month",interval_count:1},{key:"month3",label:u("Every 3 months"),interval:"month",interval_count:3},{key:"month6",label:u("Every 6 months"),interval:"month",interval_count:6},{key:"year1",label:u("Yearly"),interval:"year",interval_count:1},{key:"custom",label:u("Custom"),interval:null,interval_count:null}];function Bm({index:s,onRemovePrice:t}){const{trans:a}=R(),r=Se(["currencies"]),i=d.useMemo(()=>{var y;return(y=r.data)!=null&&y.currencies?Object.values(r.data.currencies):[]},[r.data]),{watch:l,getValues:o}=N(),c=!l("id"),m=l(`prices.${s}.id`)==null,x=l(`prices.${s}.subscriptions_count`)||0,[h,f]=d.useState(()=>{const y=o(`prices.${s}.interval`),w=o(`prices.${s}.interval_count`),S=Tt.find(_=>_.key===`${y}${w}`);return S?S.key:"custom"}),b=c||m||!x;return e.jsxs(d.Fragment,{children:[!b&&e.jsx("p",{className:"mb-20 max-w-500 text-sm text-muted",children:e.jsx(n,{message:"This price can't modified or deleted, because it has [one 1 subscriber|other :count subscribers]. You can instead add a new price.",values:{count:x}})}),e.jsx(p,{required:!0,disabled:!b,label:e.jsx(n,{message:"Amount"}),type:"number",min:.1,step:.01,name:`prices.${s}.amount`,className:"mb-20"}),e.jsx(B,{required:!0,disabled:!b,label:e.jsx(n,{message:"Currency"}),name:`prices.${s}.currency`,items:i,showSearchField:!0,searchPlaceholder:a(u("Search currencies")),selectionMode:"single",className:"mb-20",children:y=>e.jsx(g,{value:y.code,children:`${y.code}: ${y.name}`},y.code)}),e.jsx(Wm,{disabled:!b,index:s,value:h,onValueChange:f}),h==="custom"&&e.jsx(Km,{disabled:!b,index:s}),e.jsx("div",{className:"text-right",children:e.jsx(j,{size:"xs",variant:"outline",color:"danger",disabled:!b,onClick:()=>{t()},children:e.jsx(n,{message:"Delete price"})})})]})}function Wm({index:s,value:t,onValueChange:a,disabled:r}){const{setValue:i}=N();return e.jsx(Ls,{label:e.jsx(n,{message:"Billing period"}),disabled:r,className:"mb-20",selectionMode:"single",selectedValue:t,onSelectionChange:l=>{if(a(l),l!=="custom"){const o=Tt.find(c=>c.key===l);o&&(i(`prices.${s}.interval`,o.interval),i(`prices.${s}.interval_count`,o.interval_count))}},children:Tt.map(l=>e.jsx(g,{value:l.key,children:e.jsx(n,{...l.label})},l.key))})}function Km({index:s,disabled:t}){const{watch:a}=N(),r=a(`prices.${s}.interval`);let i;return r==="day"?i=365:r==="week"?i=52:i=12,e.jsxs("div",{className:"flex w-min rounded border",children:[e.jsx("div",{className:"flex items-center px-18 text-sm",children:e.jsx(n,{message:"Every"})}),e.jsx(p,{inputShadow:"shadow-none",inputBorder:"border-none",className:"w-80 border-l border-r",name:`prices.${s}.interval_count`,type:"number",min:1,max:i,disabled:t,required:!0}),e.jsxs(B,{inputShadow:"shadow-none",inputBorder:"border-none",name:`prices.${s}.interval`,selectionMode:"single",disabled:t,children:[e.jsx(g,{value:"day",children:e.jsx(n,{message:"Days"})}),e.jsx(g,{value:"week",children:e.jsx(n,{message:"Weeks"})}),e.jsx(g,{value:"month",children:e.jsx(n,{message:"Months"})})]})]})}function Vn(){return e.jsxs(d.Fragment,{children:[e.jsx(p,{name:"name",label:e.jsx(n,{message:"Name"}),className:"mb-20",required:!0,autoFocus:!0}),e.jsx(p,{name:"description",label:e.jsx(n,{message:"Description"}),className:"mb-20",inputElementType:"textarea",rows:4}),e.jsxs(B,{name:"position",selectionMode:"single",label:e.jsx(n,{message:"Position in pricing table"}),className:"mb-20",children:[e.jsx(g,{value:0,children:e.jsx(n,{message:"First"})}),e.jsx(g,{value:1,children:e.jsx(n,{message:"Second"})}),e.jsx(g,{value:2,children:e.jsx(n,{message:"Third"})}),e.jsx(g,{value:3,children:e.jsx(n,{message:"Fourth"})}),e.jsx(g,{value:4,children:e.jsx(n,{message:"Fifth"})})]}),e.jsx(Cs,{className:"mb-30",name:"available_space",label:e.jsx(n,{message:"Allowed storage space"}),description:e.jsx(n,{values:{a:s=>e.jsx(U,{className:$t,target:"_blank",to:"/admin/settings/uploading",children:s})},message:"Total storage space all user uploads are allowed to take up."})}),e.jsx(D,{name:"recommended",className:"mb-20",description:e.jsx(n,{message:"Plan will be displayed more prominently on pricing page."}),children:e.jsx(n,{message:"Recommend"})}),e.jsx(D,{name:"hidden",className:"mb-20",description:e.jsx(n,{message:"Plan will not be shown on pricing or upgrade pages."}),children:e.jsx(n,{message:"Hidden"})}),e.jsx(D,{name:"free",className:"mb-20",description:e.jsx(n,{message:"Will be assigned to all users, if they are not subscribed already."}),children:e.jsx(n,{message:"Free"})}),e.jsx(Et,{children:e.jsx(n,{message:"Feature list"})}),e.jsx(Gm,{}),e.jsx(Qm,{}),e.jsx(Et,{children:e.jsx(n,{message:"Permissions"})}),e.jsx(Gt,{name:"permissions"})]})}function Et({children:s}){return e.jsx("h2",{className:"mb-20 mt-40 text-base font-semibold",children:s})}function Gm(){const{fields:s,append:t,remove:a}=as({name:"feature_list"});return e.jsxs("div",{children:[s.map((r,i)=>e.jsxs("div",{className:"mb-10 flex gap-10",children:[e.jsx(p,{name:`feature_list.${i}.value`,size:"sm",className:"flex-auto"}),e.jsx(k,{size:"sm",color:"primary",className:"flex-shrink-0",onClick:()=>{a(i)},children:e.jsx(De,{})})]},r.id)),e.jsx(j,{variant:"text",color:"primary",startIcon:e.jsx(_e,{}),size:"xs",onClick:()=>{t({value:""})},children:e.jsx(n,{message:"Add another line"})})]})}function Qm(){var l;const{watch:s,formState:{errors:t}}=N(),{fields:a,append:r,remove:i}=as({name:"prices",keyName:"key"});return s("free")?null:e.jsxs(d.Fragment,{children:[e.jsx(Et,{children:e.jsx(n,{message:"Pricing"})}),((l=t.prices)==null?void 0:l.message)&&e.jsx("div",{className:"mb-20 text-sm text-danger",children:t.prices.message}),e.jsx(ns,{variant:"outline",className:"mb-10",children:a.map((o,c)=>e.jsx(ke,{label:e.jsx(Ht,{price:o}),children:e.jsx(Bm,{index:c,onRemovePrice:()=>{i(c)}})},o.key))}),e.jsx(j,{variant:"text",color:"primary",startIcon:e.jsx(_e,{}),size:"xs",onClick:()=>{r({currency:"USD",amount:1,interval_count:1,interval:"month"})},children:e.jsx(n,{message:"Add another price"})})]})}const On=s=>`billing/products/${s}`;function Ym(s){const{trans:t}=R(),a=ce();return L({mutationFn:r=>Jm(r),onSuccess:r=>{q(t(u("Plan updated"))),M.invalidateQueries({queryKey:[On(r.product.id)]}),M.invalidateQueries({queryKey:K("billing/products")}),a("/admin/plans")},onError:r=>ve(r,s)})}function Jm({id:s,...t}){const a={...t,feature_list:t.feature_list.map(r=>r.value)};return z.put(On(s),a).then(r=>r.data)}function Xm(){const s=Um();return s.status!=="success"?e.jsx(hs,{}):e.jsx(Zm,{product:s.data.product})}function Zm({product:s}){const t=I({defaultValues:{...s,feature_list:s.feature_list.map(r=>({value:r}))}}),a=Ym(t);return e.jsx(jt,{form:t,onSubmit:r=>{a.mutate(r)},title:e.jsx(n,{message:"Edit “:name“ plan",values:{name:s.name}}),isLoading:a.isPending,children:e.jsx(Vn,{})})}const Un="billing/products";function ex(s){const{trans:t}=R(),a=ce();return L({mutationFn:r=>sx(r),onSuccess:()=>{q(t(u("Plan created"))),M.invalidateQueries({queryKey:[Un]}),M.invalidateQueries({queryKey:K("billing/products")}),a("/admin/plans")},onError:r=>ve(r,s)})}function sx(s){const t={...s,feature_list:s.feature_list.map(a=>a.value)};return z.post(Un,t).then(a=>a.data)}function tx(){const s=I({defaultValues:{free:!1,recommended:!1}}),t=ex(s);return e.jsx(jt,{form:s,onSubmit:a=>{t.mutate(a)},title:e.jsx(n,{message:"Create new plan"}),isLoading:t.isPending,children:e.jsx(Vn,{})})}function ax(){const s=Se(["menuItemCategories"]);return e.jsx(je,{title:e.jsx(n,{message:"GDPR"}),description:e.jsx(n,{message:"Configure settings related to EU General Data Protection Regulation."}),isLoading:s.isLoading,children:t=>e.jsx(nx,{data:t})})}function nx({data:s}){var a,r,i,l;const t=I({defaultValues:{client:{cookie_notice:{enable:((a=s.client.cookie_notice)==null?void 0:a.enable)??!1,button:((r=s.client.cookie_notice)==null?void 0:r.button)??{},position:((i=s.client.cookie_notice)==null?void 0:i.position)??"bottom"},registration:{policies:((l=s.client.registration)==null?void 0:l.policies)??[]}}}});return e.jsxs(pe,{form:t,children:[e.jsx(rx,{}),e.jsx(we,{}),e.jsx(ix,{})]})}function rx(){const{watch:s}=N(),t=s("client.cookie_notice.enable");return e.jsxs("div",{children:[e.jsx(D,{name:"client.cookie_notice.enable",className:"mb-20",description:e.jsx(n,{message:"Whether cookie notice should be shown automatically to users from EU until it is accepted."}),children:e.jsx(n,{message:"Enable cookie notice"})}),t&&e.jsxs(d.Fragment,{children:[e.jsxs("div",{className:"mb-20 border-b pb-6",children:[e.jsx("div",{className:"mb-20 border-b pb-10 text-sm font-medium",children:e.jsx(n,{message:"Information button"})}),e.jsx("div",{className:"mb-20",children:e.jsx(cs,{hideRoleAndPermissionFields:!0,formPathPrefix:"client.cookie_notice.button"})})]}),e.jsxs(B,{name:"client.cookie_notice.position",selectionMode:"single",label:e.jsx(n,{message:"Cookie notice position"}),className:"mb-20",children:[e.jsx(g,{value:"top",children:e.jsx(n,{message:"Top"})}),e.jsx(g,{value:"bottom",children:e.jsx(n,{message:"Bottom"})})]})]})]})}function ix(){const{fields:s,append:t,remove:a}=as({name:"client.registration.policies"});return N(),e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"mb-6 text-sm",children:e.jsx(n,{message:"Registration policies"})}),e.jsx("div",{className:"text-xs text-muted",children:e.jsx(n,{message:"Create policies that will be shown on registration page. User will be required to accept them by toggling a checkbox."})}),e.jsx(ns,{className:"mt-16",variant:"outline",children:s.map((r,i)=>e.jsx(ke,{label:r.label,chevronPosition:"left",endAppend:e.jsx(k,{variant:"text",color:"danger",size:"sm",onClick:()=>a(i),children:e.jsx(De,{})}),children:e.jsx(cs,{hideRoleAndPermissionFields:!0,formPathPrefix:`client.registration.policies.${i}`})},r.id))}),e.jsxs(A,{type:"modal",onClose:r=>{r&&t(r)},children:[e.jsx(j,{className:"mt-12",variant:"link",color:"primary",startIcon:e.jsx(_e,{}),size:"xs",children:e.jsx(n,{message:"Add another policy"})}),e.jsx(cn,{title:e.jsx(n,{message:"Add policy"})})]})]})}function lx(s){const{pageId:t}=ie(),a=`${s||"custom-pages"}/${t}`;return L({mutationFn:r=>ox(r,a),onError:r=>J(r),onSuccess:async()=>{await M.invalidateQueries({queryKey:["custom-pages"]}),await M.invalidateQueries({queryKey:K(a)}),q(u("Page updated"))}})}function ox(s,t){return z.put(`${t}`,s).then(a=>a.data)}function Hn(){const[s,t]=d.useState(!1),{trans:a}=R(),i=N().watch("title"),l=a({message:"Title"});return s?e.jsx(p,{placeholder:l,autoFocus:!0,className:"mb-30",onBlur:()=>{t(!1)},name:"title",required:!0}):e.jsxs("h1",{tabIndex:0,onClick:()=>{t(!0)},onFocus:()=>{t(!0)},className:v("cursor-pointer rounded hover:bg-primary/focus",!i&&"text-muted"),children:[i||l,e.jsx(We,{className:"mx-8 mt-8 align-top text-muted icon-sm"})]})}function cx({host:s,value:t="",placeholder:a,onChange:r,className:i,inputRef:l,onInputBlur:o,showLinkIcon:c=!0,pattern:m,minLength:x,maxLength:h,hideButton:f,...b}){const{base_url:y}=de(),w=b.prefix?`/${b.prefix}`:"",S=b.suffix?`/${b.suffix}`:"",[_,F]=d.useState(!1),[P,T]=d.useState(t);s=s||y,d.useEffect(()=>{T(t)},[t]);const le=()=>{_?(F(!1),P&&(r==null||r(P))):F(!0)};let H="";return P?H=P:a&&(H=aa(a)),e.jsxs("div",{className:v("flex items-center",i),children:[c&&e.jsx(Wt,{className:"text-muted icon-md"}),e.jsxs("div",{className:"ml-6 mr-14 text-primary",children:[s,w,!_&&H&&e.jsxs(d.Fragment,{children:[e.jsx("span",{children:"/"}),e.jsx("span",{className:"font-medium",children:H})]}),_?null:S]}),_&&e.jsx(Ke,{pattern:m,minLength:x,maxLength:h,onKeyDown:te=>{te.key==="Enter"&&le()},ref:l,"aria-label":"slug",autoFocus:!0,className:"mr-14",size:"2xs",value:P,onBlur:o,onChange:te=>{T(te.target.value)}}),!f&&e.jsx(j,{type:"button",color:"chip",variant:"outline",size:"2xs",onClick:()=>{le()},children:_?e.jsx(n,{message:"Save"}):e.jsx(n,{message:"Edit"})})]})}const dx=E(e.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}),"UndoOutlined"),ux=E(e.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}),"RedoOutlined");function mx({editor:s}){return e.jsxs("span",{children:[e.jsx(k,{size:"md",disabled:!s.can().undo(),onClick:()=>{s.commands.focus(),s.commands.undo()},children:e.jsx(dx,{})}),e.jsx(k,{size:"md",disabled:!s.can().redo(),onClick:()=>{s.commands.focus(),s.commands.redo()},children:e.jsx(ux,{})})]})}const Bn=E(e.jsx("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}),"CodeOutlined");function xx({editor:s}){return e.jsxs(A,{type:"modal",onClose:t=>{t!=null&&(s==null||s.commands.setContent(t))},children:[e.jsx(j,{variant:"text",startIcon:e.jsx(Bn,{}),children:e.jsx(n,{message:"Source"})}),e.jsx(Jt,{title:e.jsx(n,{message:"Source code"}),defaultValue:s.getHTML()})]})}function ds(){return e.jsx("div",{className:"self-stretch mx-4 w-1 bg-divider flex-shrink-0"})}const gx=E(e.jsx("path",{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}),"FormatBoldOutlined"),hx=E(e.jsx("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"}),"FormatItalicOutlined"),px=E(e.jsx("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"}),"FormatUnderlinedOutlined");function jx({editor:s,size:t}){return e.jsxs("span",{className:v("flex-shrink-0 whitespace-nowrap"),children:[e.jsx(Q,{label:e.jsx(n,{message:"Bold"}),children:e.jsx(k,{size:t,color:s.isActive("bold")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleBold()},children:e.jsx(gx,{})})}),e.jsx(Q,{label:e.jsx(n,{message:"Italic"}),children:e.jsx(k,{size:t,color:s.isActive("italic")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleItalic()},children:e.jsx(hx,{})})}),e.jsx(Q,{label:e.jsx(n,{message:"Underline"}),children:e.jsx(k,{size:t,color:s.isActive("underline")?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleUnderline()},children:e.jsx(px,{})})})]})}const fx=E(e.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),"FormatListBulletedOutlined"),bx=E(e.jsx("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),"FormatListNumberedOutlined");function vx({editor:s,size:t}){const a=s.isActive("bulletList"),r=s.isActive("orderedList");return e.jsxs("span",{className:v("flex-shrink-0","whitespace-nowrap"),children:[e.jsx(Q,{label:e.jsx(n,{message:"Bulleted list"}),children:e.jsx(k,{size:t,color:a?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleBulletList()},children:e.jsx(fx,{})})}),e.jsx(Q,{label:e.jsx(n,{message:"Numbered list"}),children:e.jsx(k,{size:t,color:r?"primary":null,onClick:()=>{s.commands.focus(),s.commands.toggleOrderedList()},children:e.jsx(bx,{})})})]})}function yx(s,{text:t,target:a,href:r}){s.state.selection.empty&&t?s.commands.insertContent(`<a href="${r}" target="${a}">${t}</a>`):s.state.selection.empty||(r?s.chain().focus().extendMarkRange("link").setLink({href:r,target:a}).run():s.chain().focus().extendMarkRange("link").unsetLink().run())}function wx({editor:s,size:t}){return e.jsxs(A,{type:"modal",children:[e.jsx(Q,{label:e.jsx(n,{message:"Insert link"}),children:e.jsx(k,{size:t,className:v("flex-shrink-0"),children:e.jsx(Wt,{})})}),e.jsx(_x,{editor:s})]})}function _x({editor:s}){const t=s.getAttributes("link").href,a=s.state.doc.textBetween(s.state.selection.from,s.state.selection.to,""),r=I({defaultValues:{href:t,text:a,target:"_blank"}}),{formId:i,close:l}=G();return e.jsxs(X,{children:[e.jsx(se,{children:e.jsx(n,{message:"Insert link"})}),e.jsx(ee,{children:e.jsxs(re,{form:r,id:i,onSubmit:o=>{yx(s,o),l()},children:[e.jsx(p,{name:"href",label:e.jsx(n,{message:"URL"}),autoFocus:!0,type:"url",className:"mb-20"}),e.jsx(p,{name:"text",label:e.jsx(n,{message:"Text to display"}),className:"mb-20"}),e.jsxs(B,{selectionMode:"single",name:"target",label:e.jsx(n,{message:"Open link in..."}),children:[e.jsx(g,{value:"_self",children:e.jsx(n,{message:"Current window"})}),e.jsx(g,{value:"_blank",children:e.jsx(n,{message:"New window"})})]})]})}),e.jsxs(ne,{children:[e.jsx(j,{onClick:l,variant:"text",children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{type:"submit",form:i,variant:"flat",color:"primary",children:e.jsx(n,{message:"Save"})})]})]})}const Sx=E(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86-3 3.87L9 13.14 6 17h12l-3.86-5.14z"}),"ImageOutlined"),kx=2097152;function Nx({editor:s,size:t,diskPrefix:a="page_media"}){const{selectAndUploadFile:r}=ei(),i=()=>{r({showToastOnRestrictionFail:!0,restrictions:{allowedFileTypes:[Ot.image],maxFileSize:kx},metadata:{diskPrefix:a,disk:si.public},onSuccess:l=>{s.commands.focus(),s.commands.setImage({src:l.url})}})};return e.jsx(Q,{label:e.jsx(n,{message:"Insert image"}),children:e.jsx(k,{size:t,onClick:i,className:v("flex-shrink-0"),children:e.jsx(Sx,{})})})}const Cx=E(e.jsx("path",{d:"M20 8V5H6.39l3 3h1.83l-.55 1.28 2.09 2.1L14.21 8zM3.41 4.86 2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21l1.41-1.41z"}),"FormatClearOutlined");function Fx({editor:s,size:t}){return e.jsx(Q,{label:e.jsx(n,{message:"Clear formatting"}),children:e.jsx(k,{className:v("flex-shrink-0"),size:t,onClick:()=>{s.chain().focus().clearNodes().unsetAllMarks().run()},children:e.jsx(Cx,{})})})}const zx=E(e.jsx("path",{fillRule:"evenodd",d:"M4 11h16v2H4z"}),"HorizontalRuleOutlined"),Ix=E([e.jsx("circle",{cx:"12",cy:"19",r:"2"},"0"),e.jsx("path",{d:"M10 3h4v12h-4z"},"1")],"PriorityHighOutlined"),Ax=E(e.jsx("path",{d:"M16 4H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99h16c1.1 0 2-.9 2-2v-8l-6-6zM4 18.01V6h11v5h5v7.01H4z"}),"NoteOutlined"),Px=E([e.jsx("path",{d:"M9.5 7.5v9l7-4.5z"},"0"),e.jsx("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14.01H4V5.99h16v12.02z"},"1")],"SmartDisplayOutlined");function Tx({editor:s,size:t}){const[a,r]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(Le,{onItemSelected:i=>{i==="hr"?(s.commands.focus(),s.commands.setHorizontalRule()):i==="embed"?r("embed"):(s.commands.focus(),s.commands.addInfo({type:i}))},children:[e.jsx(k,{variant:"text",size:t,className:v("flex-shrink-0"),children:e.jsx(mt,{})}),e.jsxs(qe,{children:[e.jsx(g,{value:"hr",startIcon:e.jsx(zx,{}),children:e.jsx(n,{message:"Horizontal rule"})}),e.jsx(g,{value:"embed",startIcon:e.jsx(Px,{}),children:e.jsx(n,{message:"Embed"})}),e.jsx(g,{value:"important",startIcon:e.jsx(Ix,{}),children:e.jsx(n,{message:"Important"})}),e.jsx(g,{value:"warning",startIcon:e.jsx(ti,{}),children:e.jsx(n,{message:"Warning"})}),e.jsx(g,{value:"success",startIcon:e.jsx(Ax,{}),children:e.jsx(n,{message:"Note"})})]})]}),e.jsx(A,{type:"modal",isOpen:!!a,onClose:()=>{r(!1)},children:e.jsx(Ex,{editor:s})})]})}function Ex({editor:s}){const t=s.getAttributes("embed").src,a=I({defaultValues:{src:t}}),{formId:r,close:i}=G();return e.jsxs(X,{children:[e.jsx(se,{children:e.jsx(n,{message:"Insert link"})}),e.jsx(ee,{children:e.jsx(re,{form:a,id:r,onSubmit:l=>{s.commands.setEmbed(l),i()},children:e.jsx(p,{name:"src",label:e.jsx(n,{message:"Embed URL"}),autoFocus:!0,type:"url",required:!0})})}),e.jsxs(ne,{children:[e.jsx(j,{onClick:i,variant:"text",children:e.jsx(n,{message:"Cancel"})}),e.jsx(j,{type:"submit",form:r,disabled:!a.formState.isValid,variant:"flat",color:"primary",children:e.jsx(n,{message:"Add"})})]})]})}function Ie({children:s,modifier:t,separator:a="+"}){const r=ai()?e.jsx("span",{className:"text-base align-middle",children:"⌘"}):"Ctrl";return e.jsxs("kbd",{className:"text-xs text-muted",children:[t&&e.jsxs(e.Fragment,{children:[r,a]}),s]})}function Dx({editor:s,size:t}){return e.jsxs(Le,{floatingMinWidth:"w-256",onItemSelected:a=>{s.commands.focus(),typeof a=="string"&&a.startsWith("h")?s.commands.toggleHeading({level:parseInt(a.replace("h",""))}):a==="code"?s.commands.toggleCode():a==="strike"?s.commands.toggleStrike():a==="super"?s.commands.toggleSuperscript():a==="sub"?s.commands.toggleSubscript():a==="blockquote"?s.commands.toggleBlockquote():a==="paragraph"&&s.commands.setParagraph()},children:[e.jsx(j,{className:v("flex-shrink-0"),variant:"text",size:t,endIcon:e.jsx(Oa,{}),children:e.jsx(n,{message:"Format"})}),e.jsxs(qe,{children:[e.jsx(g,{value:"h1",endSection:e.jsx(Ie,{modifier:!0,children:"Alt+1"}),children:e.jsx(n,{message:"Heading :number",values:{number:1}})}),e.jsx(g,{value:"h2",endSection:e.jsx(Ie,{modifier:!0,children:"Alt+2"}),children:e.jsx(n,{message:"Heading :number",values:{number:2}})}),e.jsx(g,{value:"h3",endSection:e.jsx(Ie,{modifier:!0,children:"Alt+3"}),children:e.jsx(n,{message:"Heading :number",values:{number:3}})}),e.jsx(g,{value:"h4",endSection:e.jsx(Ie,{modifier:!0,children:"Alt+4"}),children:e.jsx(n,{message:"Heading :number",values:{number:4}})}),e.jsx(g,{value:"code",endSection:e.jsx(Ie,{modifier:!0,children:"E"}),children:e.jsx(n,{message:"Code"})}),e.jsx(g,{value:"strike",endSection:e.jsx(Ie,{modifier:!0,children:"Shift+X"}),children:e.jsx(n,{message:"Strikethrough"})}),e.jsx(g,{value:"super",endSection:e.jsx(Ie,{modifier:!0,separator:" ",children:"."}),children:e.jsx(n,{message:"Superscript"})}),e.jsx(g,{value:"sub",endSection:e.jsx(Ie,{modifier:!0,separator:" ",children:","}),children:e.jsx(n,{message:"Subscript"})}),e.jsx(g,{value:"blockquote",endSection:e.jsx(Ie,{modifier:!0,children:"Shift+B"}),children:e.jsx(n,{message:"Blockquote"})}),e.jsx(g,{value:"paragraph",endSection:e.jsx(Ie,{modifier:!0,children:"Alt+0"}),children:e.jsx(n,{message:"Paragraph"})})]})]})}const Mx=E(e.jsx("path",{d:"M2 20h20v4H2v-4zm3.49-3h2.42l1.27-3.58h5.65L16.09 17h2.42L13.25 3h-2.5L5.49 17zm4.42-5.61 2.03-5.79h.12l2.03 5.79H9.91z"}),"FormatColorTextOutlined"),Lx=E(e.jsx("path",{d:"M16.56 8.94 7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10 10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5zM2 20h20v4H2v-4z"}),"FormatColorFillOutlined");function qx({editor:s,size:t}){const[a,r]=d.useState(!1),i=s.getAttributes("textStyle").color,l=s.getAttributes("textStyle").backgroundColor;return e.jsxs(d.Fragment,{children:[e.jsxs("span",{className:v("flex-shrink-0 whitespace-nowrap"),children:[e.jsx(k,{size:t,color:i?"primary":null,onClick:()=>{r("text")},children:e.jsx(Mx,{})}),e.jsx(k,{size:t,color:l?"primary":null,onClick:()=>{r("bg")},children:e.jsx(Lx,{})})]}),e.jsx(A,{defaultValue:a==="text"?"#000000":"#FFFFFF",type:"modal",isOpen:!!a,onClose:o=>{o&&(a==="text"?s.commands.setColor(o):s.commands.setBackgroundColor(o)),r(!1)},children:e.jsx(ea,{})})]})}const $x=E(e.jsx("path",{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"}),"FormatAlignLeftOutlined"),Rx=E(e.jsx("path",{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"}),"FormatAlignCenterOutlined"),Vx=E(e.jsx("path",{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"}),"FormatAlignRightOutlined"),Ox=E(e.jsx("path",{d:"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"}),"FormatAlignJustifyOutlined"),Ks={left:{icon:$x,label:u("Align left")},center:{icon:Rx,label:u("Align center")},right:{icon:Vx,label:u("Align right")},justify:{icon:Ox,label:u("Justify")}};function Ux({editor:s,size:t}){const a=Object.keys(Ks).find(i=>s.isActive({textAlign:i}))||"left",r=a?Ks[a].icon:Ks.left.icon;return e.jsxs(Le,{floatingWidth:"auto",selectionMode:"single",selectedValue:a,onSelectionChange:i=>{s.commands.focus(),s.commands.setTextAlign(i)},children:[e.jsx(k,{size:t,color:a?"primary":null,className:v("flex-shrink-0"),children:e.jsx(r,{})}),e.jsx(qe,{children:Object.entries(Ks).map(([i,l])=>{const o=l.icon;return e.jsx(g,{value:i,startIcon:e.jsx(o,{size:"md"}),capitalizeFirst:!0,children:e.jsx(n,{message:l.label.message})},i)})})]})}const Hx=E(e.jsx("path",{d:"M11 17h10v-2H11v2zm-8-5 4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"}),"FormatIndentDecreaseOutlined"),Bx=E(e.jsx("path",{d:"M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"}),"FormatIndentIncreaseOutlined");function Wx({editor:s,size:t}){return e.jsxs("span",{className:v("flex-shrink-0","whitespace-nowrap"),children:[e.jsx(Q,{label:e.jsx(n,{message:"Decrease indent"}),children:e.jsx(k,{size:t,onClick:()=>{s.commands.focus(),s.commands.outdent()},children:e.jsx(Hx,{})})}),e.jsx(Q,{label:e.jsx(n,{message:"Increase indent"}),children:e.jsx(k,{size:t,onClick:()=>{s.commands.focus(),s.commands.indent()},children:e.jsx(Bx,{})})})]})}function Kx({editor:s,size:t}){const a=s.getAttributes("codeBlock").language||"";return e.jsxs(Le,{selectionMode:"single",selectedValue:a,onSelectionChange:r=>{s.commands.toggleCodeBlock({language:r})},children:[e.jsx(Q,{label:e.jsx(n,{message:"Codeblock"}),children:e.jsx(k,{className:v("flex-shrink-0"),size:t,color:a?"primary":null,children:e.jsx(Bn,{})})}),e.jsxs(qe,{children:[e.jsx(g,{value:"html",children:"HTML"}),e.jsx(g,{value:"javascript",children:"JavaScript"}),e.jsx(g,{value:"css",children:"CSS"}),e.jsx(g,{value:"php",children:"PHP"}),e.jsx(g,{value:"shell",children:"Shell"}),e.jsx(g,{value:"bash",children:"Bash"}),e.jsx(g,{value:"ruby",children:"Ruby"}),e.jsx(g,{value:"python",children:"Python"}),e.jsx(g,{value:"java",children:"Java"}),e.jsx(g,{value:"c++",children:"C++"})]})]})}const ka="flex items-center px-4 h-42 text-muted border-b overflow-hidden";function Gx({editor:s,size:t="md",justify:a="justify-center",hideInsertButton:r=!1,imageDiskPrefix:i}){const l=ss(),[o,c]=d.useState(!1);return e.jsxs("div",{className:v(o?"h-84":"h-42"),children:[e.jsxs("div",{className:v(ka,a,"relative z-20"),children:[e.jsx(Dx,{editor:s,size:t}),e.jsx(ds,{}),e.jsx(jx,{editor:s,size:t}),e.jsx(ds,{}),e.jsx(Ux,{editor:s,size:t}),e.jsx(Wx,{editor:s,size:t}),e.jsx(ds,{}),l?e.jsx(k,{className:"flex-shrink-0",color:o?"primary":null,size:t,onClick:()=>{c(!o)},children:o?e.jsx(ni,{}):e.jsx(ri,{})}):e.jsx(Na,{editor:s,size:t,hideInsertButton:r,imageDiskPrefix:i})]}),e.jsx(Ms,{children:o&&e.jsx(He.div,{className:v(ka,a,"absolute flex h-full w-full"),initial:{y:"-100%"},animate:{y:0},exit:{y:"-100%"},children:e.jsx(Na,{editor:s,size:t,imageDiskPrefix:i})})})]})}function Na({editor:s,size:t="md",hideInsertButton:a,imageDiskPrefix:r}){return e.jsxs(d.Fragment,{children:[e.jsx(vx,{editor:s,size:t}),e.jsx(ds,{}),e.jsx(wx,{editor:s,size:t}),e.jsx(Nx,{editor:s,size:t,diskPrefix:r}),!a&&e.jsx(Tx,{editor:s,size:t}),e.jsx(ds,{}),e.jsx(qx,{editor:s,size:t}),e.jsx(ds,{}),e.jsx(Kx,{editor:s,size:t}),e.jsx(Fx,{editor:s,size:t})]})}function Wn({editor:s,allowSlugEditing:t=!0,onSave:a,saveButton:r,isLoading:i=!1,backLink:l,slugPrefix:o="pages",imageDiskPrefix:c}){const{isSticky:m,sentinelRef:x}=Sn(),h=ss();return e.jsxs(d.Fragment,{children:[e.jsx("div",{ref:x}),e.jsxs("div",{className:v("sticky top-0 z-10 mb-20 bg",m&&"shadow"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-20 border-b px-20 py-10 text-muted sm:justify-start",children:[!h&&e.jsxs(d.Fragment,{children:[e.jsx(j,{variant:"text",size:"sm",elementType:U,to:l,relative:"path",startIcon:e.jsx(Xa,{}),children:e.jsx(n,{message:"Back"})}),e.jsx("div",{className:"mr-auto",children:t&&e.jsx(Yx,{name:"slug",showLinkIcon:!1,prefix:o})})]}),s&&e.jsx(mx,{editor:s}),!h&&e.jsx(xx,{editor:s}),a&&e.jsx(Qx,{onSave:()=>{a(s.getHTML())},isLoading:i}),r]}),e.jsx(Gx,{editor:s,size:"sm",imageDiskPrefix:c})]})]})}function Qx({onSave:s,isLoading:t}){const r=N().watch("title");return e.jsx(j,{variant:"flat",size:"sm",color:"primary",className:"min-w-90",disabled:t||!r,onClick:()=>s(),children:e.jsx(n,{message:"Save"})})}function Yx({name:s,...t}){const{field:{onChange:a,onBlur:r,value:i="",ref:l}}=gs({name:s}),o=d.useRef(!1),{watch:c,setValue:m}=N();return d.useEffect(()=>{const x=c((h,{name:f})=>{f==="title"&&!o.current&&m("slug",h.title)});return()=>x.unsubscribe()},[c,m]),e.jsx(cx,{className:v(!i&&"invisible"),onChange:x=>{o.current=!0,a(x)},onInputBlur:r,value:i,inputRef:l,...t})}const Jx=O.lazy(()=>lt(()=>import("./article-body-editor-5ff40b8a.js"),["./article-body-editor-5ff40b8a.js","./main-5f5fee1d.js","./main-de7137c3.css","./c-90c7cc33.js","./article-body-editor-c0ff5600.css"],import.meta.url));function Xx(){const s=ii();return s.data?e.jsxs(d.Fragment,{children:[e.jsx(li,{query:s}),e.jsx(Zx,{page:s.data.page})]}):e.jsx("div",{className:"relative w-full h-full",children:e.jsx(Ua,{query:s})})}function Zx({page:s}){const t=ce(),a=lx(),r=I({defaultValues:{title:s.title,slug:s.slug,body:s.body}}),i=l=>{a.mutate({...r.getValues(),body:l},{onSuccess:()=>t("../..",{relative:"path"})})};return e.jsx(d.Suspense,{fallback:e.jsx(hs,{}),children:e.jsx(Jx,{initialContent:s.body,children:(l,o)=>e.jsx(ms,{children:e.jsxs(Wa,{...r,children:[e.jsx(Wn,{editor:o,backLink:"../..",isLoading:a.isPending,onSave:i}),e.jsx("div",{className:"mx-20",children:e.jsxs("div",{className:"prose dark:prose-invert mx-auto flex-auto",children:[e.jsx(Hn,{}),l]})})]})})})})}function eg(s){const t=s||"custom-pages";return L({mutationFn:a=>sg(a,t),onError:a=>J(a),onSuccess:async()=>{await M.invalidateQueries({queryKey:["custom-pages"]}),await M.invalidateQueries({queryKey:K(t)}),q(u("Page created"))}})}function sg(s,t){return z.post(`${t}`,s).then(a=>a.data)}const tg=O.lazy(()=>lt(()=>import("./article-body-editor-5ff40b8a.js"),["./article-body-editor-5ff40b8a.js","./main-5f5fee1d.js","./main-de7137c3.css","./c-90c7cc33.js","./article-body-editor-c0ff5600.css"],import.meta.url));function ag(){const s=ce(),t=eg(),a=I(),r=i=>{t.mutate({...a.getValues(),body:i},{onSuccess:()=>s("../",{relative:"path"})})};return e.jsx(d.Suspense,{fallback:e.jsx(hs,{}),children:e.jsx(tg,{children:(i,l)=>e.jsx(ms,{children:e.jsxs(Wa,{...a,children:[e.jsx(Wn,{editor:l,isLoading:t.isPending,onSave:r,backLink:"../"}),e.jsx("div",{className:"mx-20",children:e.jsxs("div",{className:"prose dark:prose-invert mx-auto flex-auto",children:[e.jsx(Hn,{}),i]})})]})})})})}const ng=""+new URL("font-a5a81d1a.svg",import.meta.url).href;function rg({state:{filters:s,setFilters:t}}){const{trans:a}=R();return e.jsxs("div",{className:"mb-24 items-center gap-24 @xs:flex",children:[e.jsx(Ke,{className:"mb-12 flex-auto @xs:mb-0",value:s.query,onChange:r=>{t({...s,query:r.target.value})},startAdornment:e.jsx(Ut,{}),placeholder:a(u("Search fonts"))}),e.jsxs(Ls,{className:"flex-auto",selectionMode:"single",selectedValue:s.category,onSelectionChange:r=>{t({...s,category:r})},children:[e.jsx(g,{value:"",children:e.jsx(n,{message:"All categories"})}),e.jsx(g,{value:"serif",children:e.jsx(n,{message:"Serif"})}),e.jsx(g,{value:"sans-serif",children:e.jsx(n,{message:"Sans serif"})}),e.jsx(g,{value:"display",children:e.jsx(n,{message:"Display"})}),e.jsx(g,{value:"handwriting",children:e.jsx(n,{message:"Handwriting"})}),e.jsx(g,{value:"monospace",children:e.jsx(n,{message:"Monospace"})})]})]})}const ig=[{label:u("System"),family:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',category:"sans-serif"},{family:"Impact, Charcoal, sans-serif",category:"sans-serif"},{family:"Arial, Helvetica Neue, Helvetica, sans-serif",category:"serif"},{family:'"Comic Sans MS", cursive, sans-serif',category:"Handwriting"},{family:"Century Gothic, sans-serif",category:"sans-serif"},{family:'"Courier New", Courier, monospace',category:"monospace"},{family:'"Lucida Sans Unicode", "Lucida Grande", sans-serif',category:"sans-serif"},{family:'"Times New Roman", Times, serif',category:"serif"},{family:'"Lucida Console", Monaco, monospace',category:"monospace"},{family:'"Andele Mono", monospace, sans-serif',category:"sans-serif"},{family:"Verdana, Geneva, sans-serif",category:"sans-serif"},{family:'"Helvetica Neue", Helvetica, Arial, sans-serif',category:"sans-serif"}];function lg(s,t){return s.reduce((a,r,i)=>{const l=Math.floor(i/t);return a[l]||(a[l]=[]),a[l].push(r),a},[])}function og(s){const t=oi({usage:"search",...s});return d.useMemo(()=>({startsWith(a,r){return r.length===0?!0:(a=a.normalize("NFC"),r=r.normalize("NFC"),t.compare(a.slice(0,r.length),r)===0)},endsWith(a,r){return r.length===0?!0:(a=a.normalize("NFC"),r=r.normalize("NFC"),t.compare(a.slice(-r.length),r)===0)},contains(a,r){if(r.length===0)return!0;a=a.normalize("NFC"),r=r.normalize("NFC");let i=0;const l=r.length;for(;i+l<=a.length;i++){const o=a.slice(i,i+l);if(t.compare(r,o)===0)return!0}return!1}}),[t])}function cg({value:s,onChange:t}){const{data:a,isLoading:r}=Se(["googleFonts"]),[i,l]=d.useState(0),[o,c]=d.useState({query:"",category:(s==null?void 0:s.category)??""}),{contains:m}=og({sensitivity:"base"}),x=d.useMemo(()=>ig.concat((a==null?void 0:a.googleFonts)??[]),[a==null?void 0:a.googleFonts]),h=d.useMemo(()=>x.filter(w=>{var S;return m(w.family,o.query)&&(!o.category||((S=w.category)==null?void 0:S.toLowerCase())===o.category.toLowerCase())}),[x,o,m]),f=d.useMemo(()=>lg(h,20),[h]),b=f[i];d.useEffect(()=>{if(a&&(s!=null&&s.family)){const w=h.findIndex(S=>S.family===s.family);w>=0&&l(Math.floor(w/20))}},[a,h,s==null?void 0:s.family]),d.useEffect(()=>{const w="font-selector";b!=null&&b.length&&ci(b,{id:w})},[b,i]);const y=d.useCallback(w=>{c(w),l(0)},[]);return{fonts:b||[],currentPage:i,filteredFonts:h||[],setCurrentPage:l,isLoading:r,filters:o,setFilters:y,value:s,onChange:t,pages:f}}function dg({state:{currentPage:s=0,setCurrentPage:t,filteredFonts:a,pages:r}}){const i=(a==null?void 0:a.length)||0;return e.jsxs("div",{className:"mt-30 flex items-center justify-end gap-24 border-t pt-14 text-sm",children:[i>0&&e.jsx("div",{children:e.jsx(n,{message:":from - :to of :total",values:{from:s*20+1,to:Math.min((s+1)*20,i),total:i}})}),e.jsxs("div",{className:"text-muted",children:[e.jsx(k,{disabled:s<1,onClick:()=>{t(Math.max(0,s-1))},children:e.jsx(Zs,{})}),e.jsx(k,{disabled:s>=r.length-1,onClick:()=>{t(s+1)},children:e.jsx(Ps,{})})]})]})}function ug(s){const t=cg(s);return e.jsxs("div",{className:s.className,children:[e.jsx(rg,{state:t}),e.jsx(Ms,{initial:!1,mode:"wait",children:e.jsx(mg,{state:t})}),e.jsx(dg,{state:t})]})}function mg({state:s}){const{isLoading:t,fonts:a}=s,r="grid gap-24 grid-cols-[repeat(auto-fill,minmax(90px,1fr))] items-start";return t?e.jsx(gg,{className:r}):a!=null&&a.length?e.jsx(He.div,{...us,className:r,children:a==null?void 0:a.map(i=>e.jsx(xg,{font:i,state:s},i.family))},"font-list"):e.jsx(Mt,{className:"mt-60",size:"sm",image:e.jsx(Lt,{src:ng}),title:e.jsx(n,{message:"No matching fonts"}),description:e.jsx(n,{message:"Try another search query or different category"})})}function xg({font:s,state:{value:t,onChange:a}}){const r=(t==null?void 0:t.family)===s.family,i=s.family.split(",")[0].replace(/"/g,"");return e.jsxs(nt,{display:"block",onClick:()=>{a(s)},children:[e.jsx("span",{className:v("flex aspect-square items-center justify-center rounded-panel border text-4xl transition-bg-color hover:bg-hover md:text-5xl",r&&"ring-2 ring-primary ring-offset-2"),children:e.jsx("span",{style:{fontFamily:s.family},children:"Aa"})}),e.jsx("span",{className:v("mt-6 block overflow-hidden overflow-ellipsis whitespace-nowrap text-sm",r&&"text-primary"),children:s.label?e.jsx(n,{...s.label}):i})]},s.family)}function gg({className:s}){const t=Array.from(Array(20).keys());return e.jsx(He.div,{...us,className:s,children:t.map(a=>e.jsxs("div",{children:[e.jsx("div",{className:"aspect-square",children:e.jsx(Z,{display:"block",variant:"rect"})}),e.jsx(Z,{className:"mt-6 text-sm"})]},a))},"font-list-skeleton")}function hg(){const{setValue:s,watch:t}=N(),{themeIndex:a}=ie(),r=`appearance.themes.${a}.font`;return e.jsx(ug,{value:t(r),onChange:i=>{s(r,i,{shouldDirty:!0}),$().preview.setThemeFont(i)}})}const pg={"rounded-none":{label:u("Square"),value:"0px"},rounded:{label:u("Small"),value:"0.25rem"},"rounded-md":{label:u("Medium"),value:"0.375rem"},"rounded-lg":{label:u("Large"),value:"0.5rem"},"rounded-xl":{label:u("Larger"),value:"0.75rem"},"rounded-full":{label:u("Pill"),value:"9999px"}};function jg(){return e.jsxs("div",{className:"space-y-24",children:[e.jsx(kt,{label:e.jsx(n,{message:"Button rounding"}),name:"button-radius"}),e.jsx(kt,{label:e.jsx(n,{message:"Input rounding"}),name:"input-radius"}),e.jsx(kt,{label:e.jsx(n,{message:"Panel rounding"}),name:"panel-radius",hidePill:!0})]})}function kt({label:s,name:t,hidePill:a}){const{themeIndex:r}=ie(),{watch:i,setValue:l}=N(),o=`appearance.themes.${r}.values.--be-${t}`,c=i(o);return e.jsxs("div",{children:[e.jsx("div",{className:"mb-10 text-sm font-semibold",children:s}),e.jsx("div",{className:"grid grid-cols-3 gap-10 text-sm",children:Object.entries(pg).filter(([m])=>!a||!m.includes("full")).map(([m,{label:x,value:h}])=>e.jsx(fg,{radius:m,isActive:h===c,onClick:()=>{l(o,h,{shouldDirty:!0}),$().preview.setThemeValue(`--be-${t}`,h)},children:e.jsx(n,{...x})},m))})]})}function fg({radius:s,children:t,isActive:a,onClick:r}){return e.jsx(nt,{display:"block",className:v("h-36 border-2 hover:bg-hover",s,a&&"border-primary"),onClick:r,children:t})}const Ca=["schedule","error","outgoing-email"];function bg(){const{pathname:s}=Me(),t=s.split("/").pop(),a=Ca.includes(t)?Ca.indexOf(t):0;return e.jsxs(ht,{className:"p-12 md:p-24",selectedTab:a,children:[e.jsxs(pt,{className:"mb-24",children:[e.jsx(Ue,{elementType:U,to:"/admin/logs/schedule",replace:!0,children:e.jsx(n,{message:"Schedule"})}),e.jsx(Ue,{elementType:U,to:"/admin/logs/error",replace:!0,children:e.jsx(n,{message:"Error"})}),e.jsx(Ue,{elementType:U,to:"/admin/logs/outgoing-email",replace:!0,children:e.jsx(n,{message:"Email"})})]}),e.jsx(Be,{})]})}function vg({value:s}){return s?e.jsx(Gs,{className:"text-positive icon-md"}):e.jsx(De,{className:"text-danger icon-md"})}function Kn(){const{trans:s}=R();return L({mutationFn:t=>yg(t),onSuccess:async(t,a)=>{await M.invalidateQueries({queryKey:K("logs/schedule")}),q.positive(s(u("Command reran")))},onError:t=>J(t)})}function yg({id:s}){return z.post(`logs/schedule/rerun/${s}`).then(t=>t.data)}const wg=E(e.jsx("path",{d:"M21 12V6c0-1.1-.9-2-2-2h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h7v-2H5V10h14v2h2zm-2-4H5V6h14v2zm-3.36 12c.43 1.45 1.77 2.5 3.36 2.5 1.93 0 3.5-1.57 3.5-3.5s-1.57-3.5-3.5-3.5c-.95 0-1.82.38-2.45 1H18V18h-4v-4h1.5v1.43c.9-.88 2.14-1.43 3.5-1.43 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.44-1.72-4.9-4h1.54z"}),"EventRepeatOutlined"),_g=[{key:"command",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Name"}),body:s=>e.jsx(Qe,{label:s.command,description:s.output})},{key:"ran_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Last ran at"}),body:s=>e.jsx(Bt,{date:s.ran_at})},{key:"duration",allowsSorting:!0,header:()=>e.jsx(n,{message:"Duration"}),body:s=>`${s.duration}ms`},{key:"exit_code",allowsSorting:!0,header:()=>e.jsx(n,{message:"Completed"}),body:s=>e.jsx(vg,{value:s.exit_code===0})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsx(Sg,{item:s})}];function Sg({item:s}){const t=Kn();return e.jsx(Q,{label:e.jsx(n,{message:"Rerun now"}),children:e.jsx(k,{size:"md",className:"text-muted",disabled:t.isPending,onClick:()=>{t.mutate({id:s.id})},children:e.jsx(wg,{})})})}const kg=""+new URL("timeline-172fbeee.svg",import.meta.url).href,na=E(e.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zm-8 2V5h2v6h1.17L12 13.17 9.83 11H11zm-6 7h14v2H5z"}),"DownloadOutlined");function Ng(){return e.jsx(Ne,{padding:"pt-12 md:pt-24",endpoint:"logs/schedule",title:e.jsx(n,{message:"CRON schedule log"}),columns:_g,actions:e.jsx(Cg,{}),enableSelection:!1,emptyStateMessage:e.jsx(be,{image:kg,title:e.jsx(n,{message:"No scheduled commands have ran yet"}),filteringTitle:e.jsx(n,{message:"No matching scheduled commands"})})})}function Cg(){return e.jsx(Pe,{elementType:"a",href:"api/v1/logs/schedule/download",download:!0,icon:e.jsx(na,{}),children:e.jsx(n,{message:"Download log"})})}const Fg=""+new URL("bug-fixing-bd601a66.svg",import.meta.url).href,zg=[{key:"message",visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Message"}),body:s=>s.message},{key:"datetime",header:()=>e.jsx(n,{message:"Date"}),body:s=>e.jsx(Bt,{date:s.datetime})},{key:"severity",header:()=>e.jsx(n,{message:"Severity"}),body:s=>e.jsxs("span",{className:v("flex items-center gap-6 text-xs capitalize",s.level==="error"?"text-danger":"text-primary"),children:[s.level==="error"?e.jsx(Ta,{size:"sm"}):e.jsx(Ai,{size:"sm"}),s.level]})}];function Ig({error:s}){return e.jsxs(X,{size:"fullscreen",children:[e.jsx(se,{showDivider:!0,padding:"px-24 py-10",actions:e.jsx(j,{variant:"outline",size:"xs",onClick:()=>Ag(s),children:e.jsx(n,{message:"Download"})}),children:e.jsx(n,{message:"Error details"})}),e.jsx(ee,{children:e.jsx("pre",{className:"whitespace-pre-wrap break-words text-xs leading-5",children:s.exception})})]})}function Ag(s){const t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(s.exception)),t.setAttribute("download",`error-${s.id}.log`),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Pg(){const{trans:s}=R();return L({mutationFn:t=>Tg(t),onSuccess:async()=>{await M.invalidateQueries({queryKey:K("logs/error")}),q(s(u("Log file deleted")))},onError:t=>J(t)})}function Tg({identifier:s}){return z.delete(`logs/error/${s}`).then(t=>t.data)}function Eg(){return e.jsx(Ne,{padding:"pt-12 md:pt-24",endpoint:"logs/error",title:e.jsx(n,{message:"Error log"}),onRowAction:s=>{ct(Ig,{error:s})},columns:zg,actions:e.jsx(Dg,{}),enableSelection:!1,emptyStateMessage:e.jsx(be,{image:Fg,title:e.jsx(n,{message:"No errors have been logged yet"}),filteringTitle:e.jsx(n,{message:"No matching error log entries"})})})}function Dg(){var l,o,c;const{query:s,setParams:t}=st(),a=d.useRef(!1),[r,i]=d.useState(null);return d.useEffect(()=>{var m,x;if((x=(m=s.data)==null?void 0:m.files)!=null&&x.length&&!a.current){a.current=!0;const h=s.data.files[0].identifier;i(s.data.files[0].identifier),h!==s.data.selectedFile&&t({file:s.data.files[0].identifier})}},[s.data,t,a]),e.jsxs(d.Fragment,{children:[e.jsx(Mg,{files:((l=s.data)==null?void 0:l.files)??null,selectedFile:r,onSelected:m=>{i(m.identifier),t({file:m.identifier})}}),e.jsx(j,{variant:"outline",color:"danger",disabled:!r,onClick:()=>ct(Lg,{identifier:r}),children:e.jsx(n,{message:"Delete"})}),r&&e.jsx(Pe,{elementType:"a",download:(c=(o=s.data)==null?void 0:o.files.find(m=>m.identifier===r))==null?void 0:c.name,href:`api/v1/logs/error/${r}/download`,icon:e.jsx(na,{}),children:e.jsx(n,{message:"Download log"})})]})}function Mg({files:s,selectedFile:t,onSelected:a}){return s?s.length?e.jsx(Ls,{selectionMode:"single",selectedValue:t,size:"sm",minWidth:"min-w-[210px]",children:s==null?void 0:s.map(r=>e.jsxs(g,{value:r.identifier,onSelected:()=>a(r),children:[r.name," (",e.jsx(Ya,{bytes:r.size}),")"]},r.identifier))}):null:e.jsx(Z,{variant:"rect",className:"max-w-[210px]"})}function Lg({identifier:s}){const t=Pg();return e.jsx(he,{title:e.jsx(n,{message:"Delete log file"}),body:e.jsx(n,{message:"Are you sure you want to delete this log file?"}),confirm:e.jsx(n,{message:"Delete"}),onConfirm:()=>t.mutate({identifier:s},{onSuccess:()=>di()}),isLoading:t.isPending,isDanger:!0})}const qg=""+new URL("opened-4dded9dc.svg",import.meta.url).href;function $g(s){return Ae({queryKey:["logs/outgoing-email",s],queryFn:()=>Rg(s)})}function Rg(s){return z.get(`logs/outgoing-email/${s}`).then(t=>t.data)}function Vg({logItemId:s}){const{data:t}=$g(s),{base_url:a}=de();return e.jsxs(X,{size:"fullscreen",children:[e.jsx(se,{showDivider:!0,padding:"px-24 py-10",actions:e.jsx(j,{variant:"outline",size:"xs",disabled:!t,type:"button",onClick:t?()=>dt(`${a}/api/v1/logs/outgoing-email/${s}/download`):void 0,children:e.jsx(n,{message:"Download"})}),children:e.jsx(n,{message:"Email preview"})}),e.jsx(ee,{children:t?e.jsx("iframe",{srcDoc:t.logItem.parsed_message.body.html,className:"h-max w-full border-none",onLoad:r=>{const i=r.target;i.style.height=i.contentWindow.document.body.scrollHeight+"px"}}):e.jsx("div",{className:"flex min-h-200 items-center justify-center",children:e.jsx(Es,{isIndeterminate:!0})})})]})}const Og=[{key:"message_id",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(n,{message:"Subject"}),body:s=>e.jsx(Qe,{label:s.subject,description:s.message_id})},{key:"status",allowsSorting:!0,header:()=>e.jsx(n,{message:"Status"}),body:s=>{switch(s.status){case"sent":return e.jsx(Nt,{color:"positive",children:e.jsx(n,{message:"Sent"})});case"not-sent":return e.jsx(Nt,{color:void 0,children:e.jsx(n,{message:"Not sent"})});case"error":return e.jsx(Nt,{color:"danger",children:e.jsx(n,{message:"Error"})})}}},{key:"from",allowsSorting:!0,header:()=>e.jsx(n,{message:"From"}),body:s=>s.from},{key:"to",allowsSorting:!0,header:()=>e.jsx(n,{message:"To"}),body:s=>s.to},{key:"created_at",allowsSorting:!0,header:()=>e.jsx(n,{message:"Date"}),body:s=>e.jsx(Bt,{date:s.created_at})},{key:"actions",header:()=>e.jsx(n,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:s=>e.jsx(Ug,{item:s})}];function Ug({item:s}){const t=Kn();return e.jsxs(A,{type:"modal",children:[e.jsx(Q,{label:e.jsx(n,{message:"Preview"}),children:e.jsx(k,{size:"md",className:"text-muted",disabled:t.isPending,onClick:()=>{t.mutate({id:s.id})},children:e.jsx(Ln,{})})}),e.jsx(Vg,{logItemId:s.id})]})}function Nt({color:s,children:t}){return e.jsx(at,{color:s,size:"xs",className:"w-max min-w-50 text-center",children:t})}const Hg=[{key:"status",label:u("Status"),description:u("Status of the outgoing email"),defaultOperator:Y.eq,control:{type:ge.Select,defaultValue:"01",options:[{key:"01",label:u("Not sent"),value:"no-sent"},{key:"02",label:u("Sent"),value:"sent"},{key:"03",label:u("Error"),value:"error"}]}},Ge({description:u("Date email send was attempted")})];function Bg(){return e.jsx(Ne,{padding:"pt-12 md:pt-24",endpoint:"logs/outgoing-email",title:e.jsx(n,{message:"Outgoing email"}),columns:Og,filters:Hg,actions:e.jsx(Wg,{}),enableSelection:!1,emptyStateMessage:e.jsx(be,{image:qg,title:e.jsx(n,{message:"No outgoing emails have been logged yet"}),filteringTitle:e.jsx(n,{message:"No matching emails"})})})}function Wg(){return e.jsx(Pe,{elementType:"a",href:"api/v1/logs/outgoing-email/download",download:!0,icon:e.jsx(na,{}),children:e.jsx(n,{message:"Download log"})})}function Gn({endpoint:s}){const[t,a]=d.useState(""),{data:r}=Ba(s??"normalized-models/role",{query:t}),{hasPermission:i}=et();return e.jsx(Nn,{label:e.jsx(n,{message:"Roles"}),children:e.jsx(rt,{className:"mb-30",name:"roles",suggestions:r==null?void 0:r.results,inputValue:t,onInputValueChange:a,alwaysShowAvatar:!0,readOnly:!i("users.update"),children:l=>e.jsx(g,{value:l.id,startIcon:e.jsx(tt,{label:l.name}),children:l.name},l.id)})})}function Kg(s,t){const a=ce();return L({mutationFn:r=>Gg(s,r),onSuccess:(r,i)=>{q(u("User updated")),M.invalidateQueries({queryKey:["users"]}),a("/admin/users")},onError:r=>ve(r,t)})}function Gg(s,t){return t.roles&&(t.roles=t.roles.map(a=>a.id)),z.put(`users/${s}`,t).then(a=>a.data)}function Qn({form:s,children:t}){const a=ps(),r=Kg(a.id,s);return e.jsxs(re,{onSubmit:i=>{r.mutate(i)},onBeforeSubmit:()=>s.clearErrors(),form:s,children:[t,e.jsx(Cn,{isLoading:r.isPending})]})}function Qg(){const s=ps(),t=I({defaultValues:{first_name:s.first_name??"",last_name:s.last_name??"",roles:s.roles,email_verified_at:!!s.email_verified_at,available_space:s.available_space}});return e.jsxs(Qn,{form:t,children:[e.jsxs("div",{className:"mb-24 flex gap-44",children:[e.jsx(p,{name:"first_name",label:e.jsx(n,{message:"First name"}),className:"flex-auto"}),e.jsx(p,{name:"last_name",label:e.jsx(n,{message:"Last name"}),className:"flex-auto"})]}),e.jsx(Cs,{className:"mb-24",name:"available_space",label:e.jsx(n,{message:"Allowed storage space"}),description:e.jsx(n,{values:{a:a=>e.jsx(U,{className:$t,target:"_blank",to:"/admin/settings/uploading",children:a})},message:"Total storage space all user uploads are allowed to take up. If left empty, this value will be inherited from any roles or subscriptions user has, or from 'Available space' setting in <a>Uploading</a> settings page."})}),e.jsx(Yg,{user:s}),e.jsx(Gn,{})]})}function Yg({user:s}){const t=ui(),{require_email_confirmation:a}=de();return e.jsxs("div",{className:"mb-44",children:[e.jsx(D,{className:"mb-30",disabled:!a,name:"email_verified_at",description:e.jsx(n,{message:"Whether email address has been confirmed. User will not be able to login until address is confirmed, unless confirmation is disabled from settings page."}),children:e.jsx(n,{message:"Email confirmed"})}),e.jsx(j,{size:"xs",variant:"outline",color:"primary",disabled:!a||t.isPending||!!s.email_verified_at,onClick:()=>{t.mutate({email:s.email})},children:e.jsx(n,{message:"Resend email"})})]})}function Jg(){const s=ps(),t=I({defaultValues:{permissions:s.permissions,roles:s.roles}});return e.jsxs(Qn,{form:t,children:[e.jsx(Gn,{}),e.jsx(Nn,{label:e.jsx(n,{message:"Permissions"}),children:e.jsx(Gt,{name:"permissions"})})]})}function Xg(){const s=ps();return e.jsx(mi,{user:s})}function Zg(){const s=ps();return e.jsx(xi,{user:s})}function eh(){const s=ps();return e.jsxs("div",{children:[e.jsx(gi,{}),e.jsx(hi,{user:s}),e.jsx(pi,{user:s}),e.jsx(ji,{})]})}function sh(){const s=qs(),t=I({defaultValues:{appearance:{themes:s.appearance.themes.filter(a=>a.type==="site")}}});return e.jsx($s,{form:t,breadcrumb:e.jsx(th,{form:t}),blockerAllowedPath:"themes",children:e.jsx(Be,{})})}function th({form:s,children:t}){const{pathname:a}=Me(),r=a.split("/").pop(),{themeIndex:i}=ie(),l=Ds({control:s.control,name:"appearance.themes"}),o=i?l[i]:null;return e.jsxs(fs,{children:[t,e.jsx(n,{message:"Themes"}),o&&e.jsx("span",{children:o.name}),r==="font"&&e.jsx(n,{message:"Font"}),r==="radius"&&e.jsx(n,{message:"Rounding"})]})}function ah(){const s=qs(),t=I({defaultValues:{settings:{menus:s.settings.menus}}});return e.jsx($s,{form:t,breadcrumb:e.jsx(nh,{form:t}),blockerAllowedPath:"menus",children:e.jsx(Be,{})})}function nh({form:s}){const{menuIndex:t,menuItemIndex:a}=ie(),r=Ds({control:s.control,name:"settings.menus"}),i=t?r[t]:null,l=a&&i?i.items[a]:null;return e.jsxs(fs,{children:[e.jsx(n,{message:"Menus"}),i&&e.jsx("span",{children:i.name}),l&&e.jsx("span",{children:l.label})]})}function rh(){return e.jsx(je,{title:e.jsx(n,{message:"Drive"}),description:e.jsx(n,{message:"Configure defaults for drive user dashboard."}),children:s=>e.jsx(ih,{data:s})})}function ih({data:s}){var a,r,i;const t=I({defaultValues:{client:{drive:{default_view:((a=s.client.drive)==null?void 0:a.default_view)??"list",send_share_notification:((r=s.client.drive)==null?void 0:r.send_share_notification)??!1},share:{suggest_emails:((i=s.client.share)==null?void 0:i.suggest_emails)??!1}}}});return e.jsxs(pe,{form:t,children:[e.jsxs(Vt,{required:!0,className:"mb-30",size:"md",name:"client.drive.default_view",orientation:"vertical",label:e.jsx(n,{message:"Default view mode"}),description:e.jsx(n,{message:"Which view mode should user drive use by default."}),children:[e.jsx(es,{value:"list",children:e.jsx(n,{message:"List"})}),e.jsx(es,{value:"grid",children:e.jsx(n,{message:"Grid"})})]}),e.jsx(D,{className:"mb-30",name:"client.drive.send_share_notification",description:e.jsx(n,{message:"Send a notification to user when a file or folder is shared with them."}),children:e.jsx(n,{message:"Share notifications"})}),e.jsx(D,{name:"client.share.suggest_emails",description:e.jsx(n,{message:"Suggest email address of existing users when sharing a file or folder."}),children:e.jsx(n,{message:"Suggest emails"})})]})}function lh(){const s=qs(),t=I({defaultValues:{settings:{homepage:{appearance:{headerTitle:s.settings.homepage.appearance.headerTitle??"",headerSubtitle:s.settings.homepage.appearance.headerSubtitle??"",headerImage:s.settings.homepage.appearance.headerImage??"",headerImageOpacity:s.settings.homepage.appearance.headerImageOpacity??"",headerOverlayColor1:s.settings.homepage.appearance.headerOverlayColor1??"",headerOverlayColor2:s.settings.homepage.appearance.headerOverlayColor2??"",footerTitle:s.settings.homepage.appearance.footerTitle??"",footerSubtitle:s.settings.homepage.appearance.footerSubtitle??"",footerImage:s.settings.homepage.appearance.footerImage??"",primaryFeatures:s.settings.homepage.appearance.primaryFeatures??[],secondaryFeatures:s.settings.homepage.appearance.secondaryFeatures??[],actions:s.settings.homepage.appearance.actions??[]}}}}});return e.jsx($s,{form:t,breadcrumb:e.jsx(oh,{}),blockerAllowedPath:"landing-page",children:e.jsx(Be,{})})}function oh(){const{pathname:s}=Me(),t=s.split("/").pop();return e.jsxs(fs,{children:[e.jsx(n,{message:"Landing page"}),t==="action-buttons"&&e.jsx(n,{message:"Action buttons"}),t==="primary-features"&&e.jsx(n,{message:"Primary features"}),t==="secondary-features"&&e.jsx(n,{message:"Secondary features"})]})}function ch(s){const{size:t="md",inline:a,label:r,showValueLabel:i=!!r,className:l,width:o="w-full",slider:c,children:m,trackColor:x="primary",fillColor:h="primary"}=s,{domProps:f,trackRef:b,getThumbPercent:y,getThumbValueLabel:w,labelId:S,groupId:_,thumbIds:F,isDisabled:P,numberFormatter:T,minValue:le,maxValue:H,step:te,values:Ce,getValueLabel:oe}=c;let $e="",Fe=Math.max([...T.format(le)].length,[...T.format(H)].length,[...T.format(te)].length);oe?$e=oe(Ce[0]):Ce.length===1?$e=w(0):Ce.length===2&&($e=`${w(0)} – ${w(1)}`,Fe=3+2*Math.max(Fe,[...T.format(le)].length,[...T.format(H)].length));const ys=Rt({size:t,disabled:P,labelDisplay:"flex"}),Je=v("touch-none",l,o,{"flex items-center":a});return e.jsxs("div",{className:Je,role:"group",id:_,children:[(r||i)&&e.jsxs("div",{className:v(ys.label,"select-none"),children:[r&&e.jsx("label",{onClick:()=>{var Xe;(Xe=document.getElementById(F[0]))==null||Xe.focus()},id:S,htmlFor:_,children:r}),i&&e.jsx("output",{htmlFor:F[0],className:"ml-auto text-right","aria-live":"off",style:Fe?{width:`${Fe}ch`,minWidth:`${Fe}ch`}:void 0,children:$e})]}),e.jsxs("div",{ref:b,className:v("relative",dh(s)),...f,role:"presentation",children:[e.jsx("div",{className:v("absolute inset-0 m-auto rounded",uh(x,P),Fa(t))}),e.jsx("div",{className:v("absolute inset-0 my-auto rounded",mh(h,P),Fa(t)),style:{width:`${Math.max(y(0)*100,0)}%`}}),m]})]})}function dh({size:s,wrapperHeight:t}){if(t)return t;switch(s){case"xs":return"h-14";case"sm":return"h-20";default:return"h-30"}}function Fa(s){switch(s){case"xs":return"h-2";case"sm":return"h-3";default:return"h-4"}}function uh(s,t){switch(t&&(s="disabled"),s){case"disabled":return"bg-slider-disabled/60";case"primary":return"bg-primary-light";case"neutral":return"bg-divider";default:return s}}function mh(s,t){switch(t&&(s="disabled"),s){case"disabled":return"bg-slider-disabled";case"primary":return"bg-primary";default:return s}}function xh({minValue:s=0,maxValue:t=100,isDisabled:a=!1,step:r=1,formatOptions:i,onChangeEnd:l,onPointerDown:o,label:c,getValueLabel:m,showThumbOnHoverOnly:x,thumbSize:h,onPointerMove:f,...b}){const[y,w]=d.useState(!1),S=fi(i),{addGlobalListener:_,removeGlobalListener:F}=Ka(),P=d.useRef(null),[T,le]=it(b.value?b.value:void 0,b.defaultValue??[s],b.onChange),H=d.useRef(null);H.current=T;const[te,Ce]=d.useState(new Array(T.length).fill(!1)),oe=d.useRef(null);oe.current=te;function $e(C){return S.format(C)}const Fe=C=>{var W;return((W=oe.current)==null?void 0:W[C])||!1},ys=C=>$e(T[C]),Je=C=>C===0?s:T[C-1],Xe=C=>C===T.length-1?t:T[C+1],Re=(C,W)=>{if(a||!bt(C)||!H.current)return;const ze=Je(C),Ve=Xe(C);W=Ei(W,ze,Ve,r),H.current=za(H.current,C,W),le(H.current)},Te=(C,W)=>{var Ve;if(a||!bt(C))return;const ze=(Ve=oe.current)==null?void 0:Ve[C];oe.current=za(oe.current||[],C,W),Ce(oe.current),l&&ze&&!oe.current.some(Boolean)&&l(H.current||[])},[Vs,ws]=d.useState(void 0),Os=C=>{const W=Math.min(1,(C-s)/(t-s));return isNaN(W)?0:W},Us=C=>Os(H.current[C]),fe=(C,W)=>{Re(C,ra(W))},Yn=C=>Math.round((C-s)/r)*r+s,ra=C=>{const W=C*(t-s)+s;return Qs(Yn(W),s,t)},ia=d.useRef(new Array(T.length).fill(!0)),bt=C=>ia.current[C],Jn=(C,W)=>{ia.current[C]=W},ye=d.useRef(null),la=d.useRef(void 0),Xn=C=>{if(!(C.pointerType==="mouse"&&(C.button!==0||C.altKey||C.ctrlKey||C.metaKey))&&(o==null||o(),P.current&&!a&&T.every((W,ze)=>!te[ze]))){const W=P.current.offsetWidth,ze=P.current.getBoundingClientRect().left,yt=(C.clientX-ze)/W,Hs=ra(yt);let Ee;const Ze=T.findIndex(wt=>Hs-wt<0);if(Ze===0)Ee=Ze;else if(Ze===-1)Ee=T.length-1;else{const wt=T[Ze-1],nr=T[Ze];Math.abs(wt-Hs)<Math.abs(nr-Hs)?Ee=Ze-1:Ee=Ze}Ee>=0&&bt(Ee)?(C.preventDefault(),ye.current=Ee,ws(Ee),la.current=C.pointerId,Te(ye.current,!0),Re(Ee,Hs),_(window,"pointerup",oa,!1)):ye.current=null}},_s=d.useRef(null),{domProps:Zn}=bi({onPointerDown:Xn,onMoveStart(){_s.current=null},onMove(C,W){var Ve;const ze=((Ve=P.current)==null?void 0:Ve.offsetWidth)||0;if(_s.current==null&&(_s.current=Us(ye.current||0)*ze),_s.current+=W,ye.current!=null&&P.current){const yt=Qs(_s.current/ze,0,1);fe(ye.current,yt)}},onMoveEnd(){ye.current!=null&&(Te(ye.current,!1),ye.current=null)}}),er=rs(Zn,{onPointerEnter:()=>{w(!0)},onPointerLeave:()=>{w(!1)},onPointerMove:C=>{f==null||f(C)}}),oa=C=>{C.pointerId===la.current&&(ye.current!=null&&(Te(ye.current,!1),ye.current=null),F(window,"pointerup",oa,!1))},vt=d.useId(),sr=c?`${vt}-label`:void 0,tr=`${vt}-group`,ar=[...Array(T.length)].map((C,W)=>`${vt}-thumb-${W}`);return{domProps:er,trackRef:P,isDisabled:a,step:r,values:T,minValue:s,maxValue:t,focusedThumb:Vs,labelId:sr,groupId:tr,thumbIds:ar,numberFormatter:S,getThumbPercent:Us,getThumbMinValue:Je,getThumbMaxValue:Xe,getThumbValueLabel:ys,isThumbDragging:Fe,setThumbValue:Re,updateDraggedThumbs:Te,setThumbEditable:Jn,setFocusedThumb:ws,getValueLabel:m,isPointerOver:y,showThumbOnHoverOnly:x,thumbSize:h}}function za(s,t,a){return s[t]===a?s:[...s.slice(0,t),a,...s.slice(t+1)]}function gh({index:s,slider:t,isDisabled:a,ariaLabel:r,inputRef:i,onBlur:l,fillColor:o="primary"}){const c=Va(i),{addGlobalListener:m,removeGlobalListener:x}=Ka(),{step:h,values:f,focusedThumb:b,labelId:y,thumbIds:w,isDisabled:S,getThumbPercent:_,getThumbMinValue:F,getThumbMaxValue:P,getThumbValueLabel:T,setThumbValue:le,updateDraggedThumbs:H,isThumbDragging:te,setThumbEditable:Ce,setFocusedThumb:oe,isPointerOver:$e,showThumbOnHoverOnly:Fe,thumbSize:ys="w-18 h-18"}=t,Je=te(s),Xe=f[s];Ce(s,!a);const Re=a||S,Te=d.useCallback(()=>{c.current&&c.current.focus({preventScroll:!0})},[c]),Vs=b===s;d.useEffect(()=>{Vs&&Te()},[Vs,Te]);const ws=d.useRef(void 0),Os=fe=>{fe.pointerId===ws.current&&(Te(),H(s,!1),x(window,"pointerup",Os,!1))},Us=v("outline-none rounded-full top-1/2 -translate-y-1/2 -translate-x-1/2 absolute inset-0 transition-button duration-200",ys,!Re&&"shadow-md",hh({fillColor:o,isDisabled:Re,isDragging:Je}),!Fe||Fe&&Je||$e?"visible":"invisible");return e.jsx("div",{role:"presentation",className:Us,style:{left:`${Math.max(_(s)*100,0)}%`},onPointerDown:fe=>{fe.button!==0||fe.altKey||fe.ctrlKey||fe.metaKey||(Te(),ws.current=fe.pointerId,H(s,!0),m(window,"pointerup",Os,!1))},children:e.jsx("input",{id:w[s],onKeyDown:ca(()=>{H(s,!0)}),onKeyUp:ca(()=>{H(s,!1)}),ref:c,tabIndex:Re?void 0:0,min:F(s),max:P(s),step:h,value:Xe,disabled:Re,"aria-label":r,"aria-labelledby":y,"aria-orientation":"horizontal","aria-valuetext":T(s),onFocus:()=>{oe(s)},onBlur:fe=>{oe(void 0),H(s,!1),l==null||l(fe)},onChange:fe=>{le(s,parseFloat(fe.target.value))},type:"range",className:"sr-only"})})}function hh({isDisabled:s,isDragging:t,fillColor:a}){return s?"bg-slider-disabled cursor-default":a&&a!=="primary"?a:v("hover:bg-primary-dark",t?"bg-primary-dark":"bg-primary")}function ph({inputRef:s,onBlur:t,...a}){const{onChange:r,onChangeEnd:i,value:l,defaultValue:o,...c}=a,m={...c,value:l!=null?[l]:void 0,defaultValue:o!=null?[o]:void 0,onChange:h=>{r==null||r(h[0])},onChangeEnd:h=>{i==null||i(h[0])}},x=xh(m);return e.jsx(ch,{...m,slider:x,children:e.jsx(gh,{fillColor:a.fillColor,index:0,slider:x,inputRef:s,onBlur:t})})}function jh({name:s,...t}){const{field:{onChange:a,onBlur:r,value:i="",ref:l}}=gs({name:s}),o={onChange:a,onBlur:r,value:i||""};return e.jsx(ph,{inputRef:l,...rs(o,t)})}function fh(){return e.jsxs(d.Fragment,{children:[e.jsx(bh,{}),e.jsxs("div",{className:"my-24 border-y py-24",children:[e.jsx(xe,{to:"action-buttons",elementType:U,className:"mb-20",children:e.jsx(n,{message:"Action buttons"})}),e.jsx(xe,{to:"primary-features",elementType:U,children:e.jsx(n,{message:"Primary features"})}),e.jsx(xe,{to:"secondary-features",elementType:U,children:e.jsx(n,{message:"Secondary features"})})]}),e.jsx(vh,{})]})}function bh(){const s=Ye(t=>{var a,r;return(r=(a=t.defaults)==null?void 0:a.settings.homepage.appearance)==null?void 0:r.headerImage});return e.jsxs(e.Fragment,{children:[e.jsx(p,{label:e.jsx(n,{message:"Header title"}),className:"mb-20",name:"settings.homepage.appearance.headerTitle",onFocus:()=>{$().preview.setHighlight('[data-testid="headerTitle"]')}}),e.jsx(p,{label:e.jsx(n,{message:"Header subtitle"}),className:"mb-30",inputElementType:"textarea",rows:4,name:"settings.homepage.appearance.headerSubtitle",onFocus:()=>{$().preview.setHighlight('[data-testid="headerSubtitle"]')}}),e.jsx(xs,{name:"settings.homepage.appearance.headerImage",className:"mb-30",label:e.jsx(n,{message:"Header image"}),defaultValue:s,diskPrefix:"homepage"}),e.jsx(jh,{name:"settings.homepage.appearance.headerImageOpacity",label:e.jsx(n,{message:"Header image opacity"}),minValue:0,step:.1,maxValue:1,formatOptions:{style:"percent"}}),e.jsx("div",{className:"mb-20 text-xs text-muted",children:e.jsx(n,{message:"In order for overlay colors to appear, header image opacity will need to be less then 100%"})}),e.jsx(Ia,{formKey:"settings.homepage.appearance.headerOverlayColor1",label:e.jsx(n,{message:"Header overlay color 1"})}),e.jsx(Ia,{formKey:"settings.homepage.appearance.headerOverlayColor2",label:e.jsx(n,{message:"Header overlay color 2"})})]})}function vh(){const s=Ye(t=>{var a,r;return(r=(a=t.defaults)==null?void 0:a.settings.homepage.appearance)==null?void 0:r.footerImage});return e.jsxs(d.Fragment,{children:[e.jsx(p,{label:e.jsx(n,{message:"Footer title"}),className:"mb-20",name:"settings.homepage.appearance.footerTitle",onFocus:()=>{$().preview.setHighlight('[data-testid="footerTitle"]')}}),e.jsx(p,{label:e.jsx(n,{message:"Footer subtitle"}),className:"mb-20",name:"settings.homepage.appearance.footerSubtitle",onFocus:()=>{$().preview.setHighlight('[data-testid="footerSubtitle"]')}}),e.jsx(xs,{name:"settings.homepage.appearance.footerImage",className:"mb-30",label:e.jsx(n,{message:"Footer background image"}),defaultValue:s,diskPrefix:"homepage"})]})}function Ia({label:s,formKey:t}){const a=t,{watch:r,setValue:i}=N(),l=r(a),o=c=>{i(t,c,{shouldDirty:!0})};return e.jsxs(A,{type:"popover",value:l,alwaysReturnCurrentValueOnClose:!0,onValueChange:c=>o(c),onClose:c=>o(c),children:[e.jsx(xe,{className:"capitalize",startIcon:e.jsx(Xt,{viewBox:"0 0 48 48",className:"icon-lg",style:{fill:l}}),children:s}),e.jsx(ea,{})]})}function yh(){const[s,t]=d.useState(["cta1"]);return e.jsxs(ns,{variant:"outline",expandedValues:s,onExpandedChange:a=>{t(a),a.length&&$().preview.setHighlight(`[data-testid="${a[0]}"]`)},children:[e.jsx(ke,{value:"cta1",label:e.jsx(n,{message:"Header button 1"}),children:e.jsx(cs,{formPathPrefix:"settings.homepage.appearance.actions.cta1"})}),e.jsx(ke,{value:"ct2",label:e.jsx(n,{message:"Header button 2"}),children:e.jsx(cs,{formPathPrefix:"settings.homepage.appearance.actions.cta2"})}),e.jsx(ke,{value:"cta3",label:e.jsx(n,{message:"Footer button"}),children:e.jsx(cs,{formPathPrefix:"settings.homepage.appearance.actions.cta3"})})]})}function wh(){const{fields:s,remove:t,append:a}=as({name:"settings.homepage.appearance.primaryFeatures"}),[r,i]=d.useState([0]);return e.jsxs("div",{children:[e.jsx(ns,{variant:"outline",expandedValues:r,onExpandedChange:l=>{i(l),l.length&&$().preview.setHighlight(`[data-testid="primary-root-${l[0]}"]`)},children:s.map((l,o)=>e.jsxs(ke,{value:o,label:e.jsx(n,{message:`Primary feature ${o+1}`}),children:[e.jsx(_h,{index:o}),e.jsx("div",{className:"text-right",children:e.jsx(j,{size:"xs",variant:"outline",color:"danger",onClick:()=>{t(o)},children:e.jsx(n,{message:"Remove"})})})]},l.id))}),e.jsx("div",{className:"mt-20 text-right",children:e.jsx(j,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(_e,{}),onClick:()=>{a({}),i([s.length])},children:e.jsx(n,{message:"Add feature"})})})]})}function _h({index:s}){const t=Ye(a=>{var r,i,l;return(l=(i=(r=a.defaults)==null?void 0:r.settings.homepage.appearance)==null?void 0:i.primaryFeatures[s])==null?void 0:l.image});return e.jsxs(e.Fragment,{children:[e.jsx(xs,{name:`settings.homepage.appearance.primaryFeatures.${s}.image`,className:"mb-30",label:e.jsx(n,{message:"Image"}),defaultValue:t,diskPrefix:"homepage"}),e.jsx(p,{name:`settings.homepage.appearance.primaryFeatures.${s}.title`,label:e.jsx(n,{message:"Title"}),className:"mb-20",onFocus:()=>{$().preview.setHighlight(`[data-testid="primary-title-${s}"]`)}}),e.jsx(p,{name:`settings.homepage.appearance.primaryFeatures.${s}.subtitle`,label:e.jsx(n,{message:"Subtitle"}),className:"mb-20",inputElementType:"textarea",rows:4,onFocus:()=>{$().preview.setHighlight(`[data-testid="primary-subtitle-${s}"]`)}})]})}function Sh(){const{fields:s,remove:t,append:a}=as({name:"settings.homepage.appearance.secondaryFeatures"}),[r,i]=d.useState([0]);return e.jsxs("div",{children:[e.jsx(ns,{variant:"outline",expandedValues:r,onExpandedChange:l=>{i(l),l.length&&$().preview.setHighlight(`[data-testid="secondary-root-${l[0]}"]`)},children:s.map((l,o)=>e.jsxs(ke,{value:o,label:e.jsx(n,{message:`Secondary feature ${o+1}`}),children:[e.jsx(kh,{index:o}),e.jsx("div",{className:"text-right",children:e.jsx(j,{size:"xs",variant:"outline",color:"danger",onClick:()=>{t(o)},children:e.jsx(n,{message:"Remove"})})})]},l.id))}),e.jsx("div",{className:"mt-20 text-right",children:e.jsx(j,{size:"xs",variant:"outline",color:"primary",startIcon:e.jsx(_e,{}),onClick:()=>{a({}),i([s.length])},children:e.jsx(n,{message:"Add feature"})})})]})}function kh({index:s}){return e.jsxs(e.Fragment,{children:[e.jsx(xs,{name:`settings.homepage.appearance.secondaryFeatures.${s}.image`,className:"mb-30",label:e.jsx(n,{message:"Image"}),defaultValue:Nh(s),diskPrefix:"homepage"}),e.jsx(p,{name:`settings.homepage.appearance.secondaryFeatures.${s}.title`,label:e.jsx(n,{message:"Title"}),className:"mb-20",onFocus:()=>{$().preview.setHighlight(`[data-testid="secondary-title-${s}"]`)}}),e.jsx(p,{name:`settings.homepage.appearance.secondaryFeatures.${s}.subtitle`,label:e.jsx(n,{message:"Subtitle"}),className:"mb-20",inputElementType:"textarea",rows:4,onFocus:()=>{$().preview.setHighlight(`[data-testid="secondary-subtitle-${s}"]`)}}),e.jsx(p,{name:`settings.homepage.appearance.secondaryFeatures.${s}.description`,label:e.jsx(n,{message:"Description"}),className:"mb-20",inputElementType:"textarea",rows:4,onFocus:()=>{$().preview.setHighlight(`[data-testid="secondary-description-${s}"]`)}})]})}function Nh(s){var t,a;return(a=((t=$().defaults)==null?void 0:t.settings.homepage.appearance).secondaryFeatures[s])==null?void 0:a.image}const Th=Object.freeze(Object.defineProperty({__proto__:null,AdminLayout:Gi,AdminSettingsPage:Po,AdsPage:_u,AppearanceEditorPage:Sl,AppearanceMenuEditor:Ml,AppearanceMenuItemEditor:so,AuthenticationSettings:Pc,CacheSettings:fd,CreateCustomPage:ag,CreatePlanPage:tx,CreateRolePage:Ju,CustomCodeSection:_o,CustomPageDatablePage:Co,DriveSettings:rh,EditCustomPage:Xx,EditPlanPage:Xm,EditRolePage:Wu,ErrorLogDatatable:Eg,FileEntryIndexPage:gm,GdprSettings:ax,GeneralSection:co,GeneralSettings:$o,LandingPageAppearanceForm:lh,LandingPageSecondaryFeatures:Sh,LandingPageSectionActionButtons:yh,LandingPageSectionGeneral:fh,LandingPageSectionPrimaryFeatures:wh,LocalizationIndex:xu,LocalizationSettings:Ic,LoggingSettings:wd,LogsPage:bg,MenuEditorForm:ah,MenuList:Nl,OutgoingEmailLogDatatable:Bg,OutgoingEmailSettings:xd,PlansIndexPage:Rm,QueueSettings:Cd,RecaptchaSettings:Ld,ReportsSettings:Od,RolesIndexPage:zu,ScheduleLogDatatable:Ng,SectionList:Nu,SeoSection:vo,SubscriptionSettings:Nc,SubscriptionsIndexPage:Nm,TagIndexPage:om,ThemeEditor:wc,ThemeEditorForm:sh,ThemeFontPanel:hg,ThemeList:go,ThemeRadiusPanel:jg,TranslationManagementPage:ju,UpdateUserApiTab:Zg,UpdateUserDatetimeTab:Xg,UpdateUserDetailsTab:Qg,UpdateUserPage:eu,UpdateUserPermissionsTab:Jg,UpdateUserSecurityTab:eh,UploadingSettings:Jc,UserDatatable:gl,WebsocketSettings:Pd},Symbol.toStringTag,{value:"Module"}));export{Bn as C,na as D,wg as E,Rx as F,zx as H,Sx as I,Oi as K,Ax as N,_m as P,ux as R,Px as S,tu as T,dx as U,Ln as V,Fl as a,Ox as b,$x as c,Vx as d,gx as e,Cx as f,Lx as g,Mx as h,Hx as i,Bx as j,hx as k,fx as l,bx as m,px as n,sn as o,Sm as p,Ix as q,Go as r,Pm as s,Bo as t,og as u,St as v,Th as w};
//# sourceMappingURL=app-admin-routes.lazy-c774622c.js.map
