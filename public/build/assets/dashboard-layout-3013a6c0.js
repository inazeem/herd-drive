import{bH as R,j as l,r as m,d4 as be,ap as se,R as ae,u as xe,d5 as we,ah as ye,Y as L,o as j,aR as Ee,b as Ie,H as B,T as F,O as oe,n as ie,aE as le,aq as _,a0 as k,bT as Se,S as ce,V as ue,aM as je,bU as Ce,a2 as De,D as de,z as Te,cy as fe,d6 as Me,d7 as W,d8 as Oe,d9 as ze,da as Pe,cm as Re,by as Z,av as Ae,db as ke,bI as Fe,dc as Ne,G as Le,$ as $e,B as Ue,dd as Be,N as _e,am as me,aj as J,de as He}from"./main-5612c9d0.js";import{C as Ve}from"./breadcrumb-6bb72a96.js";const Nt=R(l.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined"),Lt=R(l.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),M=new Map,U=new Map,Ke=new Map,T={status:"inactive"};function K({e:n,rect:s,deltaX:e,deltaY:t}){return{rect:s,x:n.clientX,y:n.clientY,deltaX:e??0,deltaY:t??0,nativeEvent:n}}let he=null;function ee(n){he=n}function Ye(n){return{left:n.left,top:n.top,width:n.width,height:n.height}}function qe(n){const s=new IntersectionObserver(e=>{e.forEach(t=>{const{width:r,height:a,left:o,top:i}=t.boundingClientRect,[c,u]=[...n].find(([,p])=>p.ref.current===t.target)||[];if(c==null||u==null)return;const v={width:r,height:a,left:o,top:i};n.set(c,{...u,rect:v})}),s.disconnect()});[...n.values()].forEach(e=>{e.ref.current&&s.observe(e.ref.current)})}function $t({id:n,disabled:s,ref:e,preview:t,hidePreview:r,...a}){const o=m.useRef(null),{addGlobalListener:i,removeAllGlobalListeners:c}=be(),u=m.useRef({lastPosition:{x:0,y:0}}).current,v=m.useRef(a);v.current=a,m.useLayoutEffect(()=>(s?M.delete(n):M.set(n,{...M.get(n),id:n,ref:e,type:v.current.type,getData:v.current.getData}),()=>{M.delete(n)}),[n,s,v,e]);const p=g=>{Ke.forEach(x=>{var w;x.type===((w=M.get(n))==null?void 0:w.type)&&g(x)})},f=g=>{var I,S;const x=M.get(n),w=e.current,E=!o.current||!u.clickedEl||o.current.contains(u.clickedEl);if(he||!w||!x||!E){g.preventDefault(),g.stopPropagation();return}qe(U),ee("drag"),r&&Ge(g),g.dataTransfer.effectAllowed="move",u.lastPosition={x:g.clientX,y:g.clientY},u.currentRect=Ye(w.getBoundingClientRect());const y=K({rect:u.currentRect,e:g});t!=null&&t.current&&t.current(x,C=>{g.dataTransfer.setDragImage(C,0,0)}),T.status="dragging",T.dragTargetId=n,e.current&&(e.current.dataset.dragging="true"),(S=(I=v.current).onDragStart)==null||S.call(I,y,x),requestAnimationFrame(()=>{p(C=>{var P;return(P=C.onDragStart)==null?void 0:P.call(C,y,x)})}),i(window,"dragover",d,!0)},d=g=>{var S,C;if(g.preventDefault(),!u.currentRect)return;const x=g.clientX-u.lastPosition.x,w=g.clientY-u.lastPosition.y,E={...u.currentRect,left:u.currentRect.left+x,top:u.currentRect.top+w},y=K({rect:E,e:g,deltaX:x,deltaY:w}),I=M.get(n);I&&((C=(S=v.current).onDragMove)==null||C.call(S,y,I),p(P=>{var D;return(D=P.onDragMove)==null?void 0:D.call(P,y,I)})),u.lastPosition={x:g.clientX,y:g.clientY},u.currentRect=E};return{draggableProps:{draggable:!s,onDragStart:f,onDragEnd:g=>{var E,y;if(c(),!u.currentRect)return;ee(null),A&&A.remove();const x=K({rect:u.currentRect,e:g}),w=M.get(n);w&&((y=(E=v.current).onDragEnd)==null||y.call(E,x,w),p(I=>{var S;return(S=I.onDragEnd)==null?void 0:S.call(I,x,w,T.status)})),requestAnimationFrame(()=>{T.dragTargetId=void 0,T.status="inactive",e.current&&delete e.current.dataset.dragging})},onPointerDown:g=>{u.clickedEl=g.target}},dragHandleRef:o}}let A;function Ge(n){A||(A=new Image,document.body.append(A),A.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),n.dataTransfer.setDragImage(A,0,0)}async function*Xe(n){const s=[];for(const e of n.items)if(e.kind==="file"){const t=e.webkitGetAsEntry();t&&s.push(t)}for(const e of s)if(e.isFile){if(e.name===".DS_Store")continue;const t=await ge(e);yield new se(t,e.fullPath)}else e.isDirectory&&(yield*ve(e))}async function*ve(n){const s=n.createReader();let e;do{e=await new Promise((t,r)=>{s.readEntries(t,r)});for(const t of e)if(t.isFile){if(t.name===".DS_Store")continue;const r=await ge(t);yield new se(r,t.fullPath)}else t.isDirectory&&(yield*ve(t))}while(e.length>0)}function ge(n){return new Promise((s,e)=>n.file(s,e))}async function Qe(n){const s=[];for await(const e of n)s.push(e);return s}const We=400;function Ut({id:n,disabled:s,ref:e,...t}){const r=m.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,a=m.useRef(t);a.current=t,m.useLayoutEffect(()=>(U.set(n,{...U.get(n),disabled:s,id:n,ref:e}),()=>{U.delete(n)}),[n,a,s,e]);const o=f=>{var b;const d=a.current,h=d.allowDragEventsFromItself||e.current!==((b=f.ref)==null?void 0:b.current);return!!(f!=null&&f.type&&h&&d.types.includes(f.type)&&(!d.acceptsDrop||d.acceptsDrop(f)))},i=f=>{var h,b;const d=$(f);d&&((b=(h=a.current).onDragLeave)==null||b.call(h,d))};return{droppableProps:s?{}:{onDragOver:f=>{var h,b;f.preventDefault(),f.stopPropagation();const d=$(f);d&&o(d)&&((b=(h=a.current).onDragOver)==null||b.call(h,d,f))},onDragEnter:f=>{var h,b;if(f.stopPropagation(),r.dragOverElements.add(f.target),r.dragOverElements.size>1)return;const d=$(f);d&&o(d)&&((b=(h=a.current).onDragEnter)==null||b.call(h,d),clearTimeout(r.dropActivateTimer),typeof a.current.onDropActivate=="function"&&(r.dropActivateTimer=setTimeout(()=>{var g,x;d&&((x=(g=a.current).onDropActivate)==null||x.call(g,d))},We)))},onDragLeave:f=>{f.stopPropagation(),r.dragOverElements.delete(f.target);for(const h of r.dragOverElements)f.currentTarget.contains(h)||r.dragOverElements.delete(h);if(r.dragOverElements.size>0)return;const d=$(f);d&&o(d)&&(i(f),clearTimeout(r.dropActivateTimer))},onDrop:async f=>{var h,b,g,x;f.preventDefault(),f.stopPropagation(),r.dragOverElements.clear(),i(f),clearTimeout(r.dropActivateTimer);const d=$(f);if(d)if((b=(h=a.current).onDragLeave)==null||b.call(h,d),!o(d))T.status!=="inactive"&&(T.status="dropFail");else{const w=(x=(g=a.current).onDrop)==null?void 0:x.call(g,d);T.status!=="inactive"&&(T.status=w===!1?"dropFail":"dropSuccess")}}}}}function $(n){if(T.dragTargetId!=null)return M.get(T.dragTargetId);if(n.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Qe(Xe(n.dataTransfer))}}const Bt=R(l.jsx("path",{d:"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z"}),"LinkOutlined"),te=R(l.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined"),Ze=ae.createContext(null);function z(n,s){const{base_url:e}=xe(),t=m.useContext(Ze);return m.useMemo(()=>{if(!n)return{};const a={previewUrl:Je(n,(s==null?void 0:s.preferThumbnail)||!1),downloadUrl:`${e}/api/v1/file-entries/download/${(s==null?void 0:s.downloadHashes)||n.hash}`};return t&&(a.previewUrl&&(a.previewUrl=ne(a.previewUrl,{...t,thumbnail:s!=null&&s.preferThumbnail?"true":""},e)),a.downloadUrl=ne(a.downloadUrl,t,e)),a},[e,n,s==null?void 0:s.downloadHashes,s==null?void 0:s.preferThumbnail,t])}function Je(n,s){if(n.url){if(we(n.url))if(s&&n.thumbnail){const e=n.extension==="png"?"png":"jpg";return n.url.replace(new RegExp(n.file_name+"$"),`thumbnail.${e}`)}else return n.url;return`${ye().settings.base_url}/${n.url}`}}function ne(n,s,e){const t=new URL(n,e);return Object.entries(s).forEach(([r,a])=>{t.searchParams.append(r,a)}),t.toString()}function G(n,s){const e=document.createElement("a");e.href=n,s&&(e.download=s),document.body.appendChild(e),e.click(),document.body.removeChild(e)}const _t=R(l.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined"),et=2*1024*1024;function tt({file:n,className:s,iconClassName:e,showImage:t=!0}){const{trans:r}=L(),{previewUrl:a}=z(n,{preferThumbnail:!0});if(n.file_size&&n.file_size>et&&!n.thumbnail&&(t=!1),t&&n.type==="image"&&a){const o=r({message:":fileName thumbnail",values:{fileName:n.name}});return l.jsx("img",{className:j(s,"object-cover"),src:a,alt:o,draggable:!1})}return l.jsx(Ee,{className:e,type:n.type})}const X=m.createContext(null);/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function H(){return H=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n},H.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function V(){return V=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n},V.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N(n,s,e){var t,r=(t=e.initialDeps)!=null?t:[],a;return function(){var o;e.key&&e.debug!=null&&e.debug()&&(o=Date.now());var i=n(),c=i.length!==r.length||i.some(function(h,b){return r[b]!==h});if(!c)return a;r=i;var u;if(e.key&&e.debug!=null&&e.debug()&&(u=Date.now()),a=s.apply(void 0,i),e.key&&e.debug!=null&&e.debug()){var v=Math.round((Date.now()-o)*100)/100,p=Math.round((Date.now()-u)*100)/100,f=p/16,d=function(b,g){for(b=String(b);b.length<g;)b=" "+b;return b};console.info("%c⏱ "+d(p,5)+" /"+d(v,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*f,120))+"deg 100% 31%);",e==null?void 0:e.key)}return e==null||e.onChange==null||e.onChange(a),a}}function Y(n,s){if(n===void 0)throw new Error("Unexpected undefined"+(s?": "+s:""));return n}var nt=function(s,e){return Math.abs(s-e)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var rt=function(s){return s},st=function(s){for(var e=Math.max(s.startIndex-s.overscan,0),t=Math.min(s.endIndex+s.overscan,s.count-1),r=[],a=e;a<=t;a++)r.push(a);return r},at=function(s,e){var t=s.scrollElement;if(t){var r=function(i){var c=i.width,u=i.height;e({width:Math.round(c),height:Math.round(u)})};r(t.getBoundingClientRect());var a=new ResizeObserver(function(o){var i=o[0];if(i!=null&&i.borderBoxSize){var c=i.borderBoxSize[0];if(c){r({width:c.inlineSize,height:c.blockSize});return}}r(t.getBoundingClientRect())});return a.observe(t,{box:"border-box"}),function(){a.unobserve(t)}}},ot=function(s,e){var t=s.scrollElement;if(t){var r=function(){e(t[s.options.horizontal?"scrollLeft":"scrollTop"])};return r(),t.addEventListener("scroll",r,{passive:!0}),function(){t.removeEventListener("scroll",r)}}},it=function(s,e,t){if(e!=null&&e.borderBoxSize){var r=e.borderBoxSize[0];if(r){var a=Math.round(r[t.options.horizontal?"inlineSize":"blockSize"]);return a}}return Math.round(s.getBoundingClientRect()[t.options.horizontal?"width":"height"])},lt=function(s,e,t){var r,a,o=e.adjustments,i=o===void 0?0:o,c=e.behavior,u=s+i;(r=t.scrollElement)==null||r.scrollTo==null||r.scrollTo((a={},a[t.options.horizontal?"left":"top"]=u,a.behavior=c,a))},ct=function(s){var e=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var t=null,r=function(){return t||(typeof ResizeObserver<"u"?t=new ResizeObserver(function(o){o.forEach(function(i){e._measureElement(i.target,i)})}):null)};return{disconnect:function(){var o;return(o=r())==null?void 0:o.disconnect()},observe:function(o){var i;return(i=r())==null?void 0:i.observe(o,{box:"border-box"})},unobserve:function(o){var i;return(i=r())==null?void 0:i.unobserve(o)}}}(),this.range=null,this.setOptions=function(t){Object.entries(t).forEach(function(r){var a=r[0],o=r[1];typeof o>"u"&&delete t[a]}),e.options=V({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:rt,rangeExtractor:st,onChange:function(){},measureElement:it,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},t)},this.notify=function(t){e.options.onChange==null||e.options.onChange(e,t)},this.maybeNotify=N(function(){return e.calculateRange(),[e.isScrolling,e.range?e.range.startIndex:null,e.range?e.range.endIndex:null]},function(t){e.notify(t)},{key:!1,debug:function(){return e.options.debug},initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=function(){e.unsubs.filter(Boolean).forEach(function(t){return t()}),e.unsubs=[],e.scrollElement=null},this._didMount=function(){return e.measureElementCache.forEach(e.observer.observe),function(){e.observer.disconnect(),e.cleanup()}},this._willUpdate=function(){var t=e.options.getScrollElement();e.scrollElement!==t&&(e.cleanup(),e.scrollElement=t,e._scrollToOffset(e.scrollOffset,{adjustments:void 0,behavior:void 0}),e.unsubs.push(e.options.observeElementRect(e,function(r){e.scrollRect=r,e.maybeNotify()})),e.unsubs.push(e.options.observeElementOffset(e,function(r){e.scrollAdjustments=0,e.scrollOffset!==r&&(e.isScrollingTimeoutId!==null&&(clearTimeout(e.isScrollingTimeoutId),e.isScrollingTimeoutId=null),e.isScrolling=!0,e.scrollDirection=e.scrollOffset<r?"forward":"backward",e.scrollOffset=r,e.maybeNotify(),e.isScrollingTimeoutId=setTimeout(function(){e.isScrollingTimeoutId=null,e.isScrolling=!1,e.scrollDirection=null,e.maybeNotify()},e.options.scrollingDelay))})))},this.getSize=function(){return e.scrollRect[e.options.horizontal?"width":"height"]},this.memoOptions=N(function(){return[e.options.count,e.options.paddingStart,e.options.scrollMargin,e.options.getItemKey]},function(t,r,a,o){return e.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:r,scrollMargin:a,getItemKey:o}},{key:!1}),this.getFurthestMeasurement=function(t,r){for(var a=new Map,o=new Map,i=r-1;i>=0;i--){var c=t[i];if(!a.has(c.lane)){var u=o.get(c.lane);if(u==null||c.end>u.end?o.set(c.lane,c):c.end<u.end&&a.set(c.lane,!0),a.size===e.options.lanes)break}}return o.size===e.options.lanes?Array.from(o.values()).sort(function(v,p){return v.end-p.end})[0]:void 0},this.getMeasurements=N(function(){return[e.memoOptions(),e.itemSizeCache]},function(t,r){var a=t.count,o=t.paddingStart,i=t.scrollMargin,c=t.getItemKey,u=e.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,e.pendingMeasuredCacheIndexes):0;e.pendingMeasuredCacheIndexes=[];for(var v=e.measurementsCache.slice(0,u),p=u;p<a;p++){var f=c(p),d=e.options.lanes===1?v[p-1]:e.getFurthestMeasurement(v,p),h=d?d.end:o+i,b=r.get(f),g=typeof b=="number"?b:e.options.estimateSize(p),x=h+g,w=d?d.lane:p%e.options.lanes;v[p]={index:p,start:h,size:g,end:x,key:f,lane:w}}return e.measurementsCache=v,v},{key:!1,debug:function(){return e.options.debug}}),this.calculateRange=N(function(){return[e.getMeasurements(),e.getSize(),e.scrollOffset]},function(t,r,a){return e.range=t.length>0&&r>0?ut({measurements:t,outerSize:r,scrollOffset:a}):null},{key:!1,debug:function(){return e.options.debug}}),this.getIndexes=N(function(){return[e.options.rangeExtractor,e.calculateRange(),e.options.overscan,e.options.count]},function(t,r,a,o){return r===null?[]:t(V({},r,{overscan:a,count:o}))},{key:!1,debug:function(){return e.options.debug}}),this.indexFromElement=function(t){var r=e.options.indexAttribute,a=t.getAttribute(r);return a?parseInt(a,10):(console.warn("Missing attribute name '"+r+"={index}' on measured element."),-1)},this._measureElement=function(t,r){var a=e.measurementsCache[e.indexFromElement(t)];if(!a||!t.isConnected){e.measureElementCache.forEach(function(c,u){c===t&&(e.observer.unobserve(t),e.measureElementCache.delete(u))});return}var o=e.measureElementCache.get(a.key);o!==t&&(o&&e.observer.unobserve(o),e.observer.observe(t),e.measureElementCache.set(a.key,t));var i=e.options.measureElement(t,r,e);e.resizeItem(a,i)},this.resizeItem=function(t,r){var a,o=(a=e.itemSizeCache.get(t.key))!=null?a:t.size,i=r-o;i!==0&&(t.start<e.scrollOffset&&e._scrollToOffset(e.scrollOffset,{adjustments:e.scrollAdjustments+=i,behavior:void 0}),e.pendingMeasuredCacheIndexes.push(t.index),e.itemSizeCache=new Map(e.itemSizeCache.set(t.key,r)),e.notify(!1))},this.measureElement=function(t){t&&e._measureElement(t,void 0)},this.getVirtualItems=N(function(){return[e.getIndexes(),e.getMeasurements()]},function(t,r){for(var a=[],o=0,i=t.length;o<i;o++){var c=t[o],u=r[c];a.push(u)}return a},{key:!1,debug:function(){return e.options.debug}}),this.getVirtualItemForOffset=function(t){var r=e.getMeasurements();return Y(r[pe(0,r.length-1,function(a){return Y(r[a]).start},t)])},this.getOffsetForAlignment=function(t,r){var a=e.getSize();r==="auto"&&(t<=e.scrollOffset?r="start":t>=e.scrollOffset+a?r="end":r="start"),r==="start"?t=t:r==="end"?t=t-a:r==="center"&&(t=t-a/2);var o=e.options.horizontal?"scrollWidth":"scrollHeight",i=e.scrollElement?"document"in e.scrollElement?e.scrollElement.document.documentElement[o]:e.scrollElement[o]:0,c=i-e.getSize();return Math.max(Math.min(c,t),0)},this.getOffsetForIndex=function(t,r){r===void 0&&(r="auto"),t=Math.max(0,Math.min(t,e.options.count-1));var a=Y(e.getMeasurements()[t]);if(r==="auto")if(a.end>=e.scrollOffset+e.getSize()-e.options.scrollPaddingEnd)r="end";else if(a.start<=e.scrollOffset+e.options.scrollPaddingStart)r="start";else return[e.scrollOffset,r];var o=r==="end"?a.end+e.options.scrollPaddingEnd:a.start-e.options.scrollPaddingStart;return[e.getOffsetForAlignment(o,r),r]},this.isDynamicMode=function(){return e.measureElementCache.size>0},this.cancelScrollToIndex=function(){e.scrollToIndexTimeoutId!==null&&(clearTimeout(e.scrollToIndexTimeoutId),e.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(t,r){var a=r===void 0?{}:r,o=a.align,i=o===void 0?"start":o,c=a.behavior;e.cancelScrollToIndex(),c==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e._scrollToOffset(e.getOffsetForAlignment(t,i),{adjustments:void 0,behavior:c})},this.scrollToIndex=function(t,r){var a=r===void 0?{}:r,o=a.align,i=o===void 0?"auto":o,c=a.behavior;t=Math.max(0,Math.min(t,e.options.count-1)),e.cancelScrollToIndex(),c==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var u=e.getOffsetForIndex(t,i),v=u[0],p=u[1];e._scrollToOffset(v,{adjustments:void 0,behavior:c}),c!=="smooth"&&e.isDynamicMode()&&(e.scrollToIndexTimeoutId=setTimeout(function(){e.scrollToIndexTimeoutId=null;var f=e.measureElementCache.has(e.options.getItemKey(t));if(f){var d=e.getOffsetForIndex(t,p),h=d[0];nt(h,e.scrollOffset)||e.scrollToIndex(t,{align:p,behavior:c})}else e.scrollToIndex(t,{align:p,behavior:c})}))},this.scrollBy=function(t,r){var a=r===void 0?{}:r,o=a.behavior;e.cancelScrollToIndex(),o==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e._scrollToOffset(e.scrollOffset+t,{adjustments:void 0,behavior:o})},this.getTotalSize=function(){var t;return(((t=e.getMeasurements()[e.options.count-1])==null?void 0:t.end)||e.options.paddingStart)-e.options.scrollMargin+e.options.paddingEnd},this._scrollToOffset=function(t,r){var a=r.adjustments,o=r.behavior;e.options.scrollToFn(t,{behavior:o,adjustments:a},e)},this.measure=function(){e.itemSizeCache=new Map,e.notify(!1)},this.setOptions(s),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(t){e.itemSizeCache.set(t.key,t.size)}),this.maybeNotify()},pe=function(s,e,t,r){for(;s<=e;){var a=(s+e)/2|0,o=t(a);if(o<r)s=a+1;else if(o>r)e=a-1;else return a}return s>0?s-1:0};function ut(n){for(var s=n.measurements,e=n.outerSize,t=n.scrollOffset,r=s.length-1,a=function(u){return s[u].start},o=pe(0,r,a,t),i=o;i<r&&s[i].end<t+e;)i++;return{startIndex:o,endIndex:i}}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var dt=typeof document<"u"?m.useLayoutEffect:m.useEffect;function ft(n){var s=m.useReducer(function(){return{}},{})[1],e=H({},n,{onChange:function(o,i){i?Ie.flushSync(s):s(),n.onChange==null||n.onChange(o,i)}}),t=m.useState(function(){return new ct(e)}),r=t[0];return r.setOptions(e),m.useEffect(function(){return r._didMount()},[]),dt(function(){return r._willUpdate()}),r}function Ht(n){return ft(H({observeElementRect:at,observeElementOffset:ot,scrollToFn:lt},n))}const Q=ae.createContext(null);function O({message:n,className:s,allowDownload:e}){const{entries:t,activeIndex:r}=m.useContext(Q),a=t[r],o=n||l.jsx(F,{message:"No file preview available"}),{downloadUrl:i}=z(a);return l.jsxs("div",{className:j(s,"w-[calc(100%-40px)] max-w-400 rounded bg-paper p-40 text-center shadow"),children:[l.jsx("div",{className:"text-lg",children:o}),e&&l.jsx("div",{className:"mt-20 block text-center",children:l.jsx(B,{variant:"flat",color:"primary",onClick:()=>{i&&G(i)},children:l.jsx(F,{message:"Download"})})})]})}function mt(n){const{entry:s,className:e}=n,{trans:t}=L(),{previewUrl:r}=z(s);return r?l.jsx("img",{className:j(e,"shadow"),src:r,alt:t({message:"Preview for :name",values:{name:s.name}})}):l.jsx(O,{...n})}const ht=5242880;function vt(n){const{entry:s,className:e}=n,{trans:t}=L(),[r,a]=m.useState(!1),[o,i]=m.useState(!0),[c,u]=m.useState(!1),[v,p]=m.useState(null),{previewUrl:f}=z(s);return m.useEffect(()=>{s&&(f?s.file_size>=ht?(a(!0),i(!1)):gt(f).then(d=>{p(d.data)}).catch(()=>{u(!0)}).finally(()=>{i(!1)}):u(!0))},[s,f]),o?l.jsx(oe,{isIndeterminate:!0,"aria-label":t({message:"Loading file contents"})}):r?l.jsx(O,{...n,message:l.jsx(F,{message:"This file is too large to preview."})}):c?l.jsx(O,{...n,message:l.jsx(F,{message:"There was an issue previewing this file"})}):l.jsx("pre",{className:j("h-full w-full overflow-y-auto whitespace-pre-wrap break-words rounded bg-paper p-20 text-sm",e),children:l.jsx("div",{className:"container mx-auto",children:`${v}`})})}function gt(n){return ie.get(n,{responseType:"text",withCredentials:!1,headers:{Accept:"text/plain"}})}function pt(n){const{entry:s,className:e}=n,{previewUrl:t}=z(s),r=m.useRef(null),[a,o]=m.useState(!1);return m.useEffect(()=>{var i;o(!((i=r.current)!=null&&i.canPlayType(s.mime)))},[s]),a||!t?l.jsx(O,{...n}):l.jsx("video",{className:e,ref:r,controls:!0,controlsList:"nodownload noremoteplayback",playsInline:!0,autoPlay:!0,children:l.jsx("source",{src:t,type:s.mime,onError:()=>{o(!0)}})})}function bt(n){const{entry:s,className:e}=n,{previewUrl:t}=z(s),r=m.useRef(null),[a,o]=m.useState(!1);return m.useEffect(()=>{var i;o(!((i=r.current)!=null&&i.canPlayType(s.mime)))},[s]),a||!t?l.jsx(O,{...n}):l.jsx("audio",{className:e,ref:r,controls:!0,controlsList:"nodownload noremoteplayback",autoPlay:!0,children:l.jsx("source",{src:t,type:s.mime,onError:()=>{o(!0)}})})}function xt(n){const{entry:s,className:e}=n,{trans:t}=L(),{previewUrl:r}=z(s);return r?l.jsx("iframe",{title:t({message:"Preview for :name",values:{name:s.name}}),className:j(e,"h-full w-full"),src:`${r}#toolbar=0`}):l.jsx(O,{...n})}function q(n){const{entry:s,className:e}=n,{trans:t}=L(),r=m.useRef(null),[a,o]=m.useState(!1),i=m.useRef(),[c,u]=m.useState(!1),{previewUrl:v}=z(s);return m.useEffect(()=>{v?s.file_size&&s.file_size>25e6?o(!0):r.current&&(r.current.onload=()=>{clearTimeout(i.current),u(!1)},wt(v,s).then(p=>{r.current&&(r.current.src=p)}),i.current=setTimeout(()=>{o(!0)},5e3)):o(!0)},[s,v]),a?l.jsx(O,{...n}):l.jsxs("div",{className:j(e,"h-full w-full"),children:[c&&l.jsx(oe,{}),l.jsx("iframe",{ref:r,title:t({message:"Preview for :name",values:{name:s.name}}),className:j("h-full w-full",c&&"hidden")})]})}async function wt(n,s){const e=new URL(n);if(!e.searchParams.has("shareable_link")){const{data:t}=await ie.post(`file-entries/${s.id}/add-preview-token`);e.searchParams.append("preview_token",t.preview_token)}return yt(e)}function yt(n){return`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(n.toString())}`}const re={text:vt,video:pt,audio:bt,image:mt,pdf:xt,spreadsheet:q,powerPoint:q,word:q,"text/rtf":O};function Et(n){const s=n==null?void 0:n.mime,e=n==null?void 0:n.type;return re[s]||re[e]||O}const It=R(l.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"}),"ChevronLeftOutlined");function St({entries:n,onClose:s,showHeader:e=!0,className:t,headerActionsLeft:r,allowDownload:a=!0,...o}){const i=le("(max-width: 1024px)"),[c,u]=_(o.activeIndex,o.defaultActiveIndex||0,o.onActiveIndexChange),v=n[c],p=m.useMemo(()=>({entries:n,activeIndex:c}),[n,c]),f=Et(v);if(!v)return s==null||s(),null;const d=n.length-1>c,h=()=>{u(c+1)},b=c>0,g=()=>{u(c-1)};return l.jsxs(Q.Provider,{value:p,children:[e&&l.jsx(jt,{actionsLeft:r,isMobile:i,onClose:s,onNext:d?h:void 0,onPrevious:b?g:void 0,allowDownload:a}),l.jsxs("div",{className:j("relative flex-auto overflow-hidden",t),children:[i&&l.jsx(k,{size:"lg",className:"absolute left-0 top-1/2 z-10 -translate-y-1/2 transform text-muted",disabled:!b,onClick:g,children:l.jsx(Se,{})}),l.jsx(ce,{initial:!1,children:l.jsx(ue.div,{className:"absolute inset-0 flex items-center justify-center",...je,children:l.jsx(f,{className:"max-h-[calc(100%-30px)]",entry:v,allowDownload:a})},v.id)}),i&&l.jsx(k,{size:"lg",className:"absolute right-0 top-1/2 z-10 -translate-y-1/2 transform text-muted",disabled:!d,onClick:h,children:l.jsx(Ce,{})})]})]})}function jt({onNext:n,onPrevious:s,onClose:e,isMobile:t,actionsLeft:r,allowDownload:a}){const{entries:o,activeIndex:i}=m.useContext(Q),c=o[i],{downloadUrl:u}=z(c),f=t?l.jsx(k,{onClick:()=>{u&&G(u)},children:l.jsx(te,{})}):l.jsx(B,{startIcon:l.jsx(te,{}),variant:"text",onClick:()=>{u&&G(u)},children:l.jsx(F,{message:"Download"})});return l.jsxs("div",{className:"flex min-h-50 flex-shrink-0 items-center justify-between gap-20 border-b bg-paper px-10 text-sm text-muted",children:[l.jsxs("div",{className:"flex w-1/3 items-center justify-start gap-4",children:[r,a?f:void 0]}),l.jsxs("div",{className:"flex w-1/3 flex-nowrap items-center justify-center gap-10 text-main",children:[l.jsx(tt,{file:c,iconClassName:"w-16 h-16",showImage:!1}),l.jsx("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:c.name})]}),l.jsxs("div",{className:"flex w-1/3 items-center justify-end gap-10 whitespace-nowrap",children:[!t&&l.jsxs(m.Fragment,{children:[l.jsx(k,{disabled:!s,onClick:s,children:l.jsx(It,{})}),l.jsx("div",{children:i+1}),l.jsx("div",{children:"/"}),l.jsx("div",{children:o.length}),l.jsx(k,{disabled:!n,onClick:n,children:l.jsx(Ve,{})}),l.jsx("div",{className:"mx-20 h-24 w-1 bg-divider"})]}),l.jsx(k,{radius:"rounded-none",onClick:e,children:l.jsx(De,{})})]})]})}function Vt(n){return l.jsx(de,{size:"fullscreenTakeover",background:"bg-alt",className:"flex flex-col",children:l.jsx(Ct,{...n})})}function Ct(n){const{close:s}=Te();return l.jsx(St,{onClose:s,...n})}function Dt(n){const s=fe(),[e,t]=m.useState(!n.value&&!n.defaultValue),r=n.onChange,[a,o]=_(n.value||s,n.defaultValue||s,y=>{t(!1),r==null||r(y)}),{min:i,max:c,granularity:u,timezone:v,calendarIsOpen:p,setCalendarIsOpen:f,closeDialogOnSelection:d}=Me(a,n),h=m.useCallback(()=>{t(!0),o(s),r==null||r(null),f(!1)},[s,o,r,f]),[b,g]=m.useState(()=>[W(a)]),x=m.useCallback(y=>{i&&y.compare(i)<0?y=i:c&&y.compare(c)>0&&(y=c);const I=a?a.set(y):Oe(y,v);o(I),g([W(I)]),t(!1)},[o,i,c,a,v]),w=m.useCallback(y=>!e&&ze(a,y),[a,e]),E=m.useCallback(y=>({onClick:()=>{x==null||x(y),d&&(f==null||f(!1))}}),[x,f,d]);return{selectedValue:a,setSelectedValue:o,calendarIsOpen:p,setCalendarIsOpen:f,dayIsActive:w,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:E,calendarDates:b,setCalendarDates:g,isPlaceholder:e,clear:h,setIsPlaceholder:t,min:i,max:c,granularity:u,timezone:v,closeDialogOnSelection:d}}function Tt({showCalendarFooter:n,...s}){const e=Dt(s),t=m.useRef(null),r=fe(),a=n&&l.jsx(Le,{padding:"px-14 pb-14",startAction:l.jsx(B,{disabled:e.isPlaceholder,variant:"text",color:"primary",onClick:()=>{e.clear()},children:l.jsx(F,{message:"Clear"})}),children:l.jsx(B,{variant:"text",color:"primary",onClick:()=>{e.setSelectedValue(r),e.setCalendarIsOpen(!1)},children:l.jsx(F,{message:"Today"})})}),o=l.jsx($e,{offset:8,placement:"bottom-start",isOpen:e.calendarIsOpen,onOpenChange:e.setCalendarIsOpen,type:"popover",triggerRef:t,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:l.jsxs(de,{size:"auto",children:[l.jsx(Ue,{className:"flex items-start gap-40",padding:n?"px-24 pt-20 pb-10":null,children:l.jsx(Be,{state:e,visibleMonths:1})}),a]})}),i={onClick:c=>{c.stopPropagation(),c.preventDefault(),Mt(c)?e.setCalendarIsOpen(!1):e.setCalendarIsOpen(!0)}};return l.jsxs(m.Fragment,{children:[l.jsx(ke,{ref:t,wrapperProps:i,endAdornment:l.jsx(Fe,{className:j(s.disabled&&"text-disabled")}),...s,children:l.jsx(Ne,{segmentProps:i,state:e,value:e.selectedValue,onChange:e.setSelectedValue,isPlaceholder:e.isPlaceholder})}),o]})}function Kt(n){const{min:s,max:e}=n,{trans:t}=L(),{format:r}=Pe(),{field:{onChange:a,onBlur:o,value:i=null,ref:c},fieldState:{invalid:u,error:v}}=Re({name:n.name,rules:{validate:d=>{if(!d)return;const h=Z(d);if(s&&h.compare(s)<0)return t({message:"Enter a date after :date",values:{date:r(d)}});if(e&&h.compare(e)>0)return t({message:"Enter a date before :date",values:{date:r(d)}})}}}),p=i?Z(i):null,f={onChange:d=>{a(d&&d.toAbsoluteString())},onBlur:o,value:p,invalid:u,errorMessage:v==null?void 0:v.message,inputRef:c};return l.jsx(Tt,{...Ae(f,n)})}function Mt(n){return["hour","minute","dayPeriod"].includes(n.currentTarget.ariaLabel||"")}const Yt=R(l.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");function qt({className:n,position:s,children:e,size:t="md",mode:r,overlayPosition:a="fixed",display:o="flex",overflow:i="overflow-hidden",forceClosed:c=!1}){const{isMobileMode:u,leftSidenavStatus:v,setLeftSidenavStatus:p,rightSidenavStatus:f,setRightSidenavStatus:d}=m.useContext(X),h=u||r==="overlay";let b=s==="left"?v:f;h&&b==="compact"&&(b="open");const g={open:{display:o,width:zt(b==="compact"?"compact":t)},closed:{width:0,transitionEnd:{display:"none"}}},x=Ot(b==="compact"?"compact":t);return l.jsx(ue.div,{variants:g,initial:!1,animate:c||b==="closed"?"closed":"open",transition:{type:"tween",duration:.15},onClick:w=>{const E=w.target;u&&(E.closest("button")||E.closest("a"))&&(p("closed"),d("closed"))},className:j(n,s==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right",i,x,h&&`${a} bottom-0 top-0 z-20 shadow-2xl`,h&&s==="left"&&"left-0",h&&s==="right"&&"right-0"),children:m.cloneElement(e,{className:j(e.props.className,"w-full h-full overflow-y-auto compact-scrollbar",b==="compact"&&"hidden-scrollbar"),isCompactMode:b==="compact",isOverlayMode:h})})}function Ot(n){switch(n){case"compact":return"w-60";case"sm":return"w-224";case"md":return"w-240";case"lg":return"w-288";default:return n||""}}function zt(n){switch(n){case"compact":return 60;case"sm":return 224;case"md":return 240;case"lg":return 288;default:return null}}function Gt({children:n,isScrollable:s=!0,stableScrollbar:e=!0}){return m.cloneElement(n,{className:j(n.props.className,s&&"overflow-y-auto",s&&e&&"stable-scrollbar","dashboard-grid-content","has-[.dashboard-stable-scrollbar]:stable-scrollbar")})}const Pt=R(l.jsx("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpenOutlined");function Xt({children:n,className:s,hideToggleButton:e,...t}){const{isMobileMode:r,leftSidenavStatus:a,setLeftSidenavStatus:o,name:i,leftSidenavCanBeCompact:c}=m.useContext(X),u=c&&!r,v=!e&&(r||c),p=()=>{o(a==="open"?"closed":"open")},f=()=>{const d=a==="compact"?"open":"compact";me(`${i}.sidenav.compact`,d==="compact"),o(d)};return l.jsx(_e,{className:j("dashboard-grid-navbar",s),border:"border-b",size:"sm",toggleButton:v?l.jsx(k,{size:"md",onClick:()=>{u?f():p()},children:l.jsx(Pt,{})}):void 0,...t,children:n})}function Rt(n=!1){m.useEffect(()=>(n?document.documentElement.classList.remove("no-page-overflow"):document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[n])}function At(n){const s=m.useRef();return m.useEffect(()=>{s.current=n},[n]),s.current}function Qt({children:n,leftSidenavStatus:s,onLeftSidenavChange:e,rightSidenavStatus:t,compactByDefault:r,initialRightSidenavStatus:a,onRightSidenavChange:o,name:i,leftSidenavCanBeCompact:c,height:u="h-screen",className:v,gridClassName:p="dashboard-grid",blockBodyOverflow:f=!0,...d}){Rt(!f);const h=le("(max-width: 1024px)"),g=m.useMemo(()=>{if(!i)return r??!1;const D=J(`${i}.sidenav.compact`);return D??r??!1},[i,r])?"compact":"open",[x,w]=_(s,h?"closed":g,e),E=m.useMemo(()=>{if(h)return"closed";if(a!=null)return a;const D=J(`${i}.sidenav.right.position`,"open");return D??(a||"closed")},[h,i,a]),[y,I]=_(t,E,o),S=m.useCallback(D=>{I(D),me(`${i}.sidenav.right.position`,D)},[I,i]),C=At(h);m.useEffect(()=>{h!==C&&(h?(w("closed"),S("closed")):(w(g),S(E)))},[h,g,E,C,w,S]);const P=h&&(x==="open"||y==="open");return l.jsx(X.Provider,{value:{leftSidenavStatus:x,setLeftSidenavStatus:w,rightSidenavStatus:y,setRightSidenavStatus:S,leftSidenavCanBeCompact:c,name:i,isMobileMode:h},children:l.jsxs("div",{...d,className:j("relative isolate",p,v,u),children:[n,l.jsx(ce,{children:P&&l.jsx(He,{position:"fixed",onClick:()=>{w("closed"),S("closed")}},"dashboard-underlay")})]})})}export{Nt as A,It as C,Lt as D,te as F,Yt as I,Bt as L,_t as M,$t as a,he as b,qe as c,U as d,z as e,G as f,tt as g,X as h,Ht as i,Vt as j,Kt as k,Ke as l,Ze as m,Qt as n,qt as o,Gt as p,Xt as q,St as r,At as s,Pt as t,Ut as u};
//# sourceMappingURL=dashboard-layout-3013a6c0.js.map
