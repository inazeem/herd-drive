{"version":3,"file":"dashboard-layout-63937ce3.js","sources":["../../../common/foundation/resources/client/ui/library/icons/material/Add.tsx","../../../common/foundation/resources/client/ui/library/icons/material/Delete.tsx","../../../common/foundation/resources/client/ui/library/interactions/dnd/drag-state.ts","../../../common/foundation/resources/client/ui/library/interactions/interactable-event.ts","../../../common/foundation/resources/client/ui/library/interactions/active-interaction.ts","../../../common/foundation/resources/client/ui/library/interactions/utils/dom-rect-to-obj.ts","../../../common/foundation/resources/client/ui/library/interactions/dnd/update-rects.ts","../../../common/foundation/resources/client/ui/library/interactions/dnd/use-draggable.ts","../../../common/foundation/resources/client/ui/library/interactions/dnd/read-files-from-data-transfer.ts","../../../common/foundation/resources/client/ui/library/utils/array/async-iterable-to-array.ts","../../../common/foundation/resources/client/ui/library/interactions/dnd/use-droppable.ts","../../../common/foundation/resources/client/ui/library/icons/material/Link.tsx","../../../common/foundation/resources/client/ui/library/icons/material/FileDownload.tsx","../../../common/foundation/resources/client/uploads/file-entry-urls.ts","../../../common/foundation/resources/client/ui/library/utils/files/download-file-from-url.ts","../../../common/foundation/resources/client/ui/library/icons/material/MoreVert.tsx","../../../common/foundation/resources/client/uploads/components/file-type-icon/file-thumbnail.tsx","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-layout-context.ts","../../../node_modules/@tanstack/react-virtual/build/lib/_virtual/_rollupPluginBabelHelpers.mjs","../../../node_modules/@tanstack/virtual-core/build/lib/_virtual/_rollupPluginBabelHelpers.mjs","../../../node_modules/@tanstack/virtual-core/build/lib/utils.mjs","../../../node_modules/@tanstack/virtual-core/build/lib/index.mjs","../../../node_modules/@tanstack/react-virtual/build/lib/index.mjs","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview-context.ts","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/default-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/image-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/text-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/video-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/audio-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/pdf-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview/word-document-file-preview.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/available-previews.ts","../../../common/foundation/resources/client/ui/library/icons/material/ChevronLeft.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview-container.tsx","../../../common/foundation/resources/client/uploads/components/file-preview/file-preview-dialog.tsx","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-picker/use-date-picker-state.ts","../../../common/foundation/resources/client/ui/library/forms/input-field/date/date-picker/date-picker.tsx","../../../common/foundation/resources/client/ui/library/icons/material/Info.tsx","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-sidenav.tsx","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-content.tsx","../../../common/foundation/resources/client/ui/library/icons/material/MenuOpen.tsx","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-navbar.tsx","../../../common/foundation/resources/client/ui/library/utils/hooks/use-block-body-overflow.ts","../../../common/foundation/resources/client/ui/library/utils/hooks/use-previous.ts","../../../common/foundation/resources/client/ui/dashboard-layout/dashboard-layout.tsx"],"sourcesContent":["import {createSvgIcon} from '../create-svg-icon';\n\nexport const AddIcon = createSvgIcon(\n  <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\n, 'AddOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DeleteIcon = createSvgIcon(\n  <path d=\"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z\" />\n, 'DeleteOutlined');\n","import {DragMonitor} from './use-drag-monitor';\nimport {ConnectedDraggable, DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport type DragSessionStatus =\n  | 'dropSuccess'\n  | 'dropFail'\n  | 'dragging'\n  | 'inactive';\n\nexport interface DragSession {\n  dragTargetId?: DraggableId;\n  status: DragSessionStatus;\n}\n\nexport const draggables = new Map<DraggableId, ConnectedDraggable>();\nexport const droppables = new Map<DraggableId, ConnectedDroppable>();\nexport const dragMonitors = new Map<DraggableId, DragMonitor>();\nexport const dragSession: DragSession = {\n  status: 'inactive',\n};\n","import React from 'react';\n\ntype NativeEvent =\n  | React.PointerEvent\n  | PointerEvent\n  | React.DragEvent<HTMLElement>\n  | DragEvent;\n\nexport interface InteractableEvent {\n  x: number;\n  y: number;\n  deltaX: number;\n  deltaY: number;\n  rect: InteractableRect;\n  nativeEvent: NativeEvent;\n}\n\nexport interface InteractableRect {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n  angle?: number;\n}\n\nexport function interactableEvent({\n  e,\n  rect,\n  deltaX,\n  deltaY,\n}: {\n  e: NativeEvent;\n  rect: InteractableRect;\n  deltaX?: number;\n  deltaY?: number;\n}): InteractableEvent {\n  return {\n    rect,\n    x: e.clientX,\n    y: e.clientY,\n    deltaX: deltaX ?? 0,\n    deltaY: deltaY ?? 0,\n    nativeEvent: e,\n  };\n}\n","type InteractionName = null | 'resize' | 'rotate' | 'drag' | 'move';\n\nexport let activeInteraction: InteractionName = null;\n\nexport function setActiveInteraction(name: InteractionName) {\n  activeInteraction = name;\n}\n","import {InteractableRect} from '../interactable-event';\n\nexport function domRectToObj(rect: DOMRect): InteractableRect {\n  return {\n    left: rect.left,\n    top: rect.top,\n    width: rect.width,\n    height: rect.height,\n  };\n}\n","// use intersection observer instead of getBoundingClientRect for better performance as this will be called in onPointerMove event\nimport {InteractableRect} from '../interactable-event';\nimport {ConnectedMouseSelectable} from './mouse-selection/use-mouse-selectable';\nimport {DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport function updateRects(\n  targets: Map<DraggableId, ConnectedDroppable | ConnectedMouseSelectable>\n) {\n  const observer = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      const {width, height, left, top} = entry.boundingClientRect;\n      const [id, target] =\n        [...targets].find(\n          ([, target]) => target.ref.current === entry.target\n        ) || [];\n      if (id == null || target == null) return;\n\n      const rect: InteractableRect = {\n        width,\n        height,\n        left,\n        top,\n      };\n      targets.set(id, {...target, rect});\n    });\n    observer.disconnect();\n  });\n\n  [...targets.values()].forEach(target => {\n    if (target.ref.current) {\n      observer.observe(target.ref.current);\n    }\n  });\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragMonitors, dragSession, droppables} from './drag-state';\nimport {\n  InteractableEvent,\n  interactableEvent,\n  InteractableRect,\n} from '../interactable-event';\nimport {activeInteraction, setActiveInteraction} from '../active-interaction';\nimport {domRectToObj} from '../utils/dom-rect-to-obj';\nimport {updateRects} from './update-rects';\nimport {useGlobalListeners} from '@react-aria/utils';\nimport {DragMonitor} from './use-drag-monitor';\nimport {NativeFileDraggable} from './use-droppable';\n\ninterface DragState {\n  currentRect?: InteractableRect;\n  lastPosition: {x: number; y: number};\n  clickedEl?: HTMLElement;\n}\n\nexport type DragPreviewRenderer = (\n  draggable: ConnectedDraggable,\n  callback: (node: HTMLElement) => void\n) => void;\n\nexport type DraggableId = string | number | object;\n\nexport interface ConnectedDraggable<T = any> {\n  type: string;\n  id: DraggableId;\n  getData: () => T;\n  ref: RefObject<HTMLElement>;\n}\n\n// Either draggable from within the app, or file dragged in from the desktop\nexport type MixedDraggable = ConnectedDraggable | NativeFileDraggable;\n\ninterface UseDragProps extends ConnectedDraggable {\n  disabled?: boolean;\n  onDragStart?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragMove?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragEnd?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  preview?: RefObject<DragPreviewRenderer>;\n  hidePreview?: boolean;\n}\nexport function useDraggable({\n  id,\n  disabled,\n  ref,\n  preview,\n  hidePreview,\n  ...options\n}: UseDragProps) {\n  const dragHandleRef = useRef<HTMLButtonElement>(null);\n  const {addGlobalListener, removeAllGlobalListeners} = useGlobalListeners();\n\n  const state = useRef<DragState>({\n    lastPosition: {x: 0, y: 0},\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    if (!disabled) {\n      draggables.set(id, {\n        ...draggables.get(id),\n        id,\n        ref,\n        type: optionsRef.current.type,\n        getData: optionsRef.current.getData,\n      });\n    } else {\n      draggables.delete(id);\n    }\n    return () => {\n      draggables.delete(id);\n    };\n  }, [id, disabled, optionsRef, ref]);\n\n  // notify monitors connected to the same drag type as this draggable\n  const notifyMonitors = (callback: (m: DragMonitor) => void) => {\n    dragMonitors.forEach(monitor => {\n      if (monitor.type === draggables.get(id)?.type) {\n        callback(monitor);\n      }\n    });\n  };\n\n  const onDragStart = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = draggables.get(id);\n    const el = ref.current;\n    const clickedOnHandle =\n      !dragHandleRef.current ||\n      !state.clickedEl ||\n      dragHandleRef.current.contains(state.clickedEl);\n\n    // if another interaction is in progress (rotate, resize, drag etc.), bail\n    if (activeInteraction || !el || !draggable || !clickedOnHandle) {\n      e.preventDefault();\n      e.stopPropagation();\n      return;\n    }\n\n    updateRects(droppables);\n    setActiveInteraction('drag');\n\n    // hide default browser ghost image\n    if (hidePreview) {\n      hideNativeGhostImage(e);\n    }\n    // this will hide default browser cursor icon, if \"dropEffect\" is not set in dragOver/dragEnter\n    e.dataTransfer.effectAllowed = 'move';\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = domRectToObj(el.getBoundingClientRect());\n    const ie = interactableEvent({rect: state.currentRect!, e});\n\n    // If there is a preview option, use it to render a custom preview image that will\n    // appear under the pointer while dragging. If not, the element itself is dragged by the browser.\n    if (preview?.current) {\n      preview.current(draggable, node => {\n        e.dataTransfer.setDragImage(node, 0, 0);\n      });\n    }\n\n    dragSession.status = 'dragging';\n    dragSession.dragTargetId = id;\n    if (ref.current) {\n      ref.current.dataset.dragging = 'true';\n    }\n\n    optionsRef.current.onDragStart?.(ie, draggable);\n\n    // wait until next frame so changes made in \"onDragStart\" are reflected in drag monitors\n    requestAnimationFrame(() => {\n      notifyMonitors(m => m.onDragStart?.(ie, draggable));\n    });\n\n    // firefox does not provide clientX/clientY in \"onDrag\", need to listen for dragOver on window instead\n    addGlobalListener(window, 'dragover', onDragOver, true);\n  };\n\n  const onDragOver = (e: React.DragEvent<HTMLElement> | DragEvent) => {\n    e.preventDefault();\n\n    if (!state.currentRect) return;\n\n    const deltaX = e.clientX - state.lastPosition.x;\n    const deltaY = e.clientY - state.lastPosition.y;\n\n    const newRect = {\n      ...state.currentRect,\n      left: state.currentRect.left + deltaX,\n      top: state.currentRect.top + deltaY,\n    };\n\n    const ie = interactableEvent({rect: newRect, e, deltaX, deltaY});\n\n    const target = draggables.get(id);\n    if (target) {\n      optionsRef.current.onDragMove?.(ie, target);\n      notifyMonitors(m => m.onDragMove?.(ie, target));\n    }\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = newRect;\n  };\n\n  const onDragEnd = (e: React.DragEvent<HTMLElement>) => {\n    removeAllGlobalListeners();\n    if (!state.currentRect) return;\n\n    setActiveInteraction(null);\n    if (emptyImage) {\n      emptyImage.remove();\n    }\n\n    const ie = interactableEvent({rect: state.currentRect, e});\n\n    const draggable = draggables.get(id);\n    if (draggable) {\n      optionsRef.current.onDragEnd?.(ie, draggable);\n      notifyMonitors(m => m.onDragEnd?.(ie, draggable, dragSession!.status));\n    }\n\n    // wait a frame before clearing so monitors have a chance to use drag session status\n    requestAnimationFrame(() => {\n      dragSession.dragTargetId = undefined;\n      dragSession.status = 'inactive';\n      if (ref.current) {\n        delete ref.current.dataset.dragging;\n      }\n    });\n  };\n\n  const draggableProps = {\n    draggable: !disabled,\n    onDragStart,\n    onDragEnd,\n    onPointerDown: (e: React.PointerEvent) => {\n      state.clickedEl = e.target as HTMLElement;\n    },\n  };\n\n  return {draggableProps, dragHandleRef};\n}\n\nlet emptyImage: HTMLImageElement | undefined;\nfunction hideNativeGhostImage(e: React.DragEvent) {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    // image needs to be in the dom to prevent \"globe\" icon in chrome\n    document.body.append(emptyImage);\n    emptyImage.src =\n      'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  e.dataTransfer.setDragImage(emptyImage, 0, 0);\n}\n","import {UploadedFile} from '@ui/utils/files/uploaded-file';\n\nexport async function* readFilesFromDataTransfer(dataTransfer: DataTransfer) {\n  const entries: FileSystemEntry[] = [];\n\n  // Pull out all entries before reading them, otherwise\n  // some entries will be lost due to recursion with promises\n  for (const item of dataTransfer.items) {\n    if (item.kind === 'file') {\n      const entry = item.webkitGetAsEntry();\n      if (entry) {\n        entries.push(entry);\n      }\n    }\n  }\n\n  for (const entry of entries) {\n    if (entry.isFile) {\n      if (entry.name === '.DS_Store') continue;\n      const file = await getEntryFile(entry as FileSystemFileEntry);\n      yield new UploadedFile(file, entry.fullPath);\n    } else if (entry.isDirectory) {\n      yield* getEntriesFromDirectory(entry as FileSystemDirectoryEntry);\n    }\n  }\n}\n\nasync function* getEntriesFromDirectory(\n  item: FileSystemDirectoryEntry,\n): AsyncIterable<any> {\n  const reader = item.createReader();\n\n  // We must call readEntries repeatedly because there may be a limit to the\n  // number of entries that are returned at once.\n  let entries: FileSystemEntry[];\n  do {\n    entries = await new Promise((resolve, reject) => {\n      reader.readEntries(resolve, reject);\n    });\n\n    for (const entry of entries) {\n      if (entry.isFile) {\n        if (entry.name === '.DS_Store') continue;\n        const file = await getEntryFile(entry as FileSystemFileEntry);\n        yield new UploadedFile(file, entry.fullPath);\n      } else if (entry.isDirectory) {\n        yield* getEntriesFromDirectory(entry as FileSystemDirectoryEntry);\n      }\n    }\n  } while (entries.length > 0);\n}\n\nfunction getEntryFile(entry: FileSystemFileEntry): Promise<File> {\n  return new Promise((resolve, reject) => entry.file(resolve, reject));\n}\n","export async function asyncIterableToArray<T>(\n  iterator: AsyncIterable<T>\n): Promise<T[]> {\n  const items: T[] = [];\n  for await (const item of iterator) {\n    items.push(item);\n  }\n  return items;\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragSession, droppables} from './drag-state';\nimport {readFilesFromDataTransfer} from './read-files-from-data-transfer';\nimport {asyncIterableToArray} from '@ui/utils/array/async-iterable-to-array';\nimport {InteractableRect} from '../interactable-event';\nimport {DraggableId, MixedDraggable} from './use-draggable';\nimport {UploadedFile} from '@ui/utils/files/uploaded-file';\n\nexport interface ConnectedDroppable {\n  id: DraggableId;\n  rect?: InteractableRect;\n  disabled?: boolean;\n  ref: RefObject<HTMLElement>;\n}\n\n// File dragged in from desktop\nexport interface NativeFileDraggable {\n  type: 'nativeFile';\n  el: null;\n  ref: null;\n  getData: () => Promise<UploadedFile[]>;\n}\n\ninterface UseDroppableProps<T extends HTMLElement> {\n  id: DraggableId;\n  disabled?: boolean;\n  types: ('nativeFile' | string)[];\n  ref: RefObject<T>;\n  // this will fire dragEnter/dragLeave/dragOver events when same element is both draggable and drop target and dragging target over itself. Used for showing line previews before/after element during sort.\n  allowDragEventsFromItself?: boolean;\n  onDragEnter?: (target: MixedDraggable) => void;\n  onDragLeave?: (target: MixedDraggable) => void;\n  onDragOver?: (\n    target: MixedDraggable,\n    e: React.DragEvent<HTMLElement>,\n  ) => void;\n  // Handler that is called after draggable is held over droppable for a period of time.\n  // This typically opens the item so that the user can drop within it.\n  onDropActivate?: (e: MixedDraggable) => void;\n  onDrop?: (target: MixedDraggable) => void | Promise<void> | false;\n  acceptsDrop?: (target: MixedDraggable) => boolean;\n}\n\ninterface DroppableState {\n  dragOverElements: Set<Element>;\n  dropActivateTimer: ReturnType<typeof setTimeout> | undefined;\n}\n\nconst DROP_ACTIVATE_TIMEOUT = 400;\n\nexport function useDroppable<T extends HTMLElement>({\n  id,\n  disabled,\n  ref,\n  ...options\n}: UseDroppableProps<T>) {\n  const state = useRef<DroppableState>({\n    dragOverElements: new Set<Element>(),\n    dropActivateTimer: undefined,\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    droppables.set(id, {\n      ...droppables.get(id),\n      disabled,\n      id,\n      ref,\n    });\n    return () => {\n      droppables.delete(id);\n    };\n  }, [id, optionsRef, disabled, ref]);\n\n  // check if drop target accepts drag target\n  const canDrop = (draggable: MixedDraggable): boolean => {\n    const options = optionsRef.current;\n\n    const allowEventsOnSelf =\n      options.allowDragEventsFromItself ||\n      ref.current !== draggable.ref?.current;\n\n    return !!(\n      draggable?.type &&\n      allowEventsOnSelf &&\n      options.types.includes(draggable.type) &&\n      (!options.acceptsDrop || options.acceptsDrop(draggable))\n    );\n  };\n\n  const fireDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n    }\n  };\n\n  const onDragEnter = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    state.dragOverElements.add(e.target as Element);\n    if (state.dragOverElements.size > 1) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      optionsRef.current.onDragEnter?.(draggable);\n\n      clearTimeout(state.dropActivateTimer);\n      if (typeof optionsRef.current.onDropActivate === 'function') {\n        state.dropActivateTimer = setTimeout(() => {\n          if (draggable) {\n            optionsRef.current.onDropActivate?.(draggable);\n          }\n        }, DROP_ACTIVATE_TIMEOUT);\n      }\n    }\n  };\n\n  const onDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    // Track all the targets of dragenter events in a set, and remove them\n    // in dragleave. When the set becomes empty, we've left the drop target completely.\n    // We must also remove any elements that are no longer in the DOM, because dragleave\n    // events will never be fired for these. This can happen, for example, with drop\n    // indicators between items, which disappear when the drop target changes.\n    state.dragOverElements.delete(e.target as Element);\n    for (const element of state.dragOverElements) {\n      if (!e.currentTarget.contains(element)) {\n        state.dragOverElements.delete(element);\n      }\n    }\n\n    if (state.dragOverElements.size > 0) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      fireDragLeave(e);\n      clearTimeout(state.dropActivateTimer);\n    }\n  };\n\n  const onDrop = async (e: React.DragEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    state.dragOverElements.clear();\n\n    fireDragLeave(e);\n    clearTimeout(state.dropActivateTimer);\n\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n\n      // drop target does not accept this type of droppable\n      if (!canDrop(draggable)) {\n        if (dragSession.status !== 'inactive') {\n          dragSession.status = 'dropFail';\n        }\n        // drop target accepts this type, but it might still reject the drop in callback\n      } else {\n        // allow callback to mark drop as failed\n        const dropResult = optionsRef.current.onDrop?.(draggable);\n\n        // drag session will only be active for draggables within the app, never for files dragged in from desktop\n        if (dragSession.status !== 'inactive') {\n          dragSession.status =\n            dropResult === false ? 'dropFail' : 'dropSuccess';\n        }\n      }\n    }\n  };\n\n  const droppableProps = {\n    onDragOver: (e: React.DragEvent<HTMLElement>) => {\n      e.preventDefault();\n      e.stopPropagation();\n      const draggable = getDraggable(e);\n      if (draggable && canDrop(draggable)) {\n        optionsRef.current.onDragOver?.(draggable, e);\n      }\n    },\n    onDragEnter,\n    onDragLeave,\n    onDrop,\n  };\n\n  return {\n    droppableProps: disabled ? {} : droppableProps,\n  };\n}\n\nfunction getDraggable(\n  e: React.DragEvent<HTMLElement>,\n): MixedDraggable | undefined {\n  if (dragSession.dragTargetId != null) {\n    return draggables.get(dragSession.dragTargetId);\n  } else if (e.dataTransfer.types.includes('Files')) {\n    return {\n      type: 'nativeFile',\n      el: null,\n      ref: null,\n      getData: () => {\n        return asyncIterableToArray(readFilesFromDataTransfer(e.dataTransfer));\n      },\n    };\n  }\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const LinkIcon = createSvgIcon(\n  <path d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z\" />\n, 'LinkOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FileDownloadIcon = createSvgIcon(\n  <path d=\"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z\" />\n, 'FileDownloadOutlined');\n","import React, {useContext, useMemo} from 'react';\nimport {useSettings} from '@ui/settings/use-settings';\nimport {isAbsoluteUrl} from '@ui/utils/urls/is-absolute-url';\nimport {getBootstrapData} from '@ui/bootstrap-data/bootstrap-data-store';\n\nexport const FileEntryUrlsContext = React.createContext<\n  Record<string, string | number | null | undefined>\n>(null!);\n\ninterface PartialEntry {\n  url?: string;\n  hash: string;\n  file_name: string;\n  extension?: string;\n  thumbnail?: boolean;\n}\n\nexport function useFileEntryUrls(\n  entry?: PartialEntry,\n  options?: {preferThumbnail?: boolean; downloadHashes?: string[]},\n): {previewUrl?: string; downloadUrl?: string} {\n  const {base_url} = useSettings();\n  const urlSearchParams = useContext(FileEntryUrlsContext);\n\n  return useMemo(() => {\n    if (!entry) {\n      return {};\n    }\n\n    const previewUrl = buildPreviewUrl(\n      entry,\n      options?.preferThumbnail || false,\n    );\n\n    const urls = {\n      previewUrl,\n      downloadUrl: `${base_url}/api/v1/file-entries/download/${\n        options?.downloadHashes || entry.hash\n      }`,\n    };\n\n    if (urlSearchParams) {\n      // preview url\n      if (urls.previewUrl) {\n        urls.previewUrl = addParams(\n          urls.previewUrl,\n          {\n            ...urlSearchParams,\n            thumbnail: options?.preferThumbnail ? 'true' : '',\n          },\n          base_url,\n        );\n      }\n\n      // download url\n      urls.downloadUrl = addParams(urls.downloadUrl, urlSearchParams, base_url);\n    }\n\n    return urls;\n  }, [\n    base_url,\n    entry,\n    options?.downloadHashes,\n    options?.preferThumbnail,\n    urlSearchParams,\n  ]);\n}\n\nfunction buildPreviewUrl(\n  entry: PartialEntry,\n  preferThumbnail: boolean,\n): string | undefined {\n  if (!entry.url) return;\n\n  if (isAbsoluteUrl(entry.url)) {\n    if (preferThumbnail && entry.thumbnail) {\n      // replace last instance of entry.file_name in entry.url with 'thumbnail'\n      const extension = entry.extension === 'png' ? 'png' : 'jpg';\n      return entry.url.replace(\n        new RegExp(entry.file_name + '$'),\n        `thumbnail.${extension}`,\n      );\n    } else {\n      return entry.url;\n    }\n  }\n\n  return `${getBootstrapData().settings.base_url}/${entry.url}`;\n}\n\nfunction addParams(urlString: string, params: object, baseUrl: string): string {\n  const url = new URL(urlString, baseUrl);\n  Object.entries(params).forEach(([key, value]) => {\n    url.searchParams.append(key, value as string);\n  });\n  return url.toString();\n}\n","export function downloadFileFromUrl(url: string, name?: string) {\n  const link = document.createElement('a');\n  link.href = url;\n  if (name) link.download = name;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MoreVertIcon = createSvgIcon(\n  <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\n, 'MoreVertOutlined');\n","import clsx from 'clsx';\r\nimport {FileTypeIcon} from './file-type-icon';\r\nimport {useFileEntryUrls} from '../../file-entry-urls';\r\nimport {useTrans} from '@ui/i18n/use-trans';\r\n\r\nconst TwoMB = 2 * 1024 * 1024;\r\n\r\ninterface Props {\r\n  file: {\r\n    name: string;\r\n    type: string;\r\n    thumbnail?: boolean;\r\n    file_size?: number;\r\n    hash: string;\r\n    file_name: string;\r\n    url?: string;\r\n  };\r\n  className?: string;\r\n  iconClassName?: string;\r\n  showImage?: boolean;\r\n}\r\nexport function FileThumbnail({\r\n  file,\r\n  className,\r\n  iconClassName,\r\n  showImage = true,\r\n}: Props) {\r\n  const {trans} = useTrans();\r\n  const {previewUrl} = useFileEntryUrls(file, {preferThumbnail: true});\r\n\r\n  // don't show images for files larger than 2MB, if thumbnail was not generated to avoid ui lag\r\n  if (file.file_size && file.file_size > TwoMB && !file.thumbnail) {\r\n    showImage = false;\r\n  }\r\n\r\n  if (showImage && file.type === 'image' && previewUrl) {\r\n    const alt = trans({\r\n      message: ':fileName thumbnail',\r\n      values: {fileName: file.name},\r\n    });\r\n    return (\r\n      <img\r\n        className={clsx(className, 'object-cover')}\r\n        src={previewUrl}\r\n        alt={alt}\r\n        draggable={false}\r\n      />\r\n    );\r\n  }\r\n  return <FileTypeIcon className={iconClassName} type={file.type} />;\r\n}\r\n","import {createContext} from 'react';\n\nexport type DashboardSidenavStatus = 'open' | 'closed' | 'compact';\n\nexport interface DashboardContextValue {\n  leftSidenavStatus: DashboardSidenavStatus;\n  setLeftSidenavStatus: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus: DashboardSidenavStatus;\n  setRightSidenavStatus: (status: DashboardSidenavStatus) => void;\n  isMobileMode: boolean | null;\n  leftSidenavCanBeCompact?: boolean;\n  name: string;\n}\n\nexport const DashboardLayoutContext = createContext<DashboardContextValue>(\n  null!\n);\n","/**\n * react-virtual\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nexport { _extends as extends };\n//# sourceMappingURL=_rollupPluginBabelHelpers.mjs.map\n","/**\n * virtual-core\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nexport { _extends as extends };\n//# sourceMappingURL=_rollupPluginBabelHelpers.mjs.map\n","/**\n * virtual-core\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction memo(getDeps, fn, opts) {\n  var _opts$initialDeps;\n  var deps = (_opts$initialDeps = opts.initialDeps) != null ? _opts$initialDeps : [];\n  var result;\n  return function () {\n    var depTime;\n    if (opts.key && opts.debug != null && opts.debug()) depTime = Date.now();\n    var newDeps = getDeps();\n    var depsChanged = newDeps.length !== deps.length || newDeps.some(function (dep, index) {\n      return deps[index] !== dep;\n    });\n    if (!depsChanged) {\n      return result;\n    }\n    deps = newDeps;\n    var resultTime;\n    if (opts.key && opts.debug != null && opts.debug()) resultTime = Date.now();\n    result = fn.apply(void 0, newDeps);\n    if (opts.key && opts.debug != null && opts.debug()) {\n      var depEndTime = Math.round((Date.now() - depTime) * 100) / 100;\n      var resultEndTime = Math.round((Date.now() - resultTime) * 100) / 100;\n      var resultFpsPercentage = resultEndTime / 16;\n      var pad = function pad(str, num) {\n        str = String(str);\n        while (str.length < num) {\n          str = ' ' + str;\n        }\n        return str;\n      };\n      console.info(\"%c\\u23F1 \" + pad(resultEndTime, 5) + \" /\" + pad(depEndTime, 5) + \" ms\", \"\\n            font-size: .6rem;\\n            font-weight: bold;\\n            color: hsl(\" + Math.max(0, Math.min(120 - 120 * resultFpsPercentage, 120)) + \"deg 100% 31%);\", opts == null ? void 0 : opts.key);\n    }\n    opts == null ? void 0 : opts.onChange == null ? void 0 : opts.onChange(result);\n    return result;\n  };\n}\nfunction notUndefined(value, msg) {\n  if (value === undefined) {\n    throw new Error(\"Unexpected undefined\" + (msg ? \": \" + msg : ''));\n  } else {\n    return value;\n  }\n}\nvar approxEqual = function approxEqual(a, b) {\n  return Math.abs(a - b) < 1;\n};\n\nexport { approxEqual, memo, notUndefined };\n//# sourceMappingURL=utils.mjs.map\n","/**\n * virtual-core\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport { extends as _extends } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport { memo, notUndefined, approxEqual } from './utils.mjs';\nexport { approxEqual, memo, notUndefined } from './utils.mjs';\n\n//\n\n//\n\nvar defaultKeyExtractor = function defaultKeyExtractor(index) {\n  return index;\n};\nvar defaultRangeExtractor = function defaultRangeExtractor(range) {\n  var start = Math.max(range.startIndex - range.overscan, 0);\n  var end = Math.min(range.endIndex + range.overscan, range.count - 1);\n  var arr = [];\n  for (var _i = start; _i <= end; _i++) {\n    arr.push(_i);\n  }\n  return arr;\n};\nvar observeElementRect = function observeElementRect(instance, cb) {\n  var element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  var handler = function handler(rect) {\n    var width = rect.width,\n      height = rect.height;\n    cb({\n      width: Math.round(width),\n      height: Math.round(height)\n    });\n  };\n  handler(element.getBoundingClientRect());\n  var observer = new ResizeObserver(function (entries) {\n    var entry = entries[0];\n    if (entry != null && entry.borderBoxSize) {\n      var box = entry.borderBoxSize[0];\n      if (box) {\n        handler({\n          width: box.inlineSize,\n          height: box.blockSize\n        });\n        return;\n      }\n    }\n    handler(element.getBoundingClientRect());\n  });\n  observer.observe(element, {\n    box: 'border-box'\n  });\n  return function () {\n    observer.unobserve(element);\n  };\n};\nvar observeWindowRect = function observeWindowRect(instance, cb) {\n  var element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  var handler = function handler() {\n    cb({\n      width: element.innerWidth,\n      height: element.innerHeight\n    });\n  };\n  handler();\n  element.addEventListener('resize', handler, {\n    passive: true\n  });\n  return function () {\n    element.removeEventListener('resize', handler);\n  };\n};\nvar observeElementOffset = function observeElementOffset(instance, cb) {\n  var element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  var handler = function handler() {\n    cb(element[instance.options.horizontal ? 'scrollLeft' : 'scrollTop']);\n  };\n  handler();\n  element.addEventListener('scroll', handler, {\n    passive: true\n  });\n  return function () {\n    element.removeEventListener('scroll', handler);\n  };\n};\nvar observeWindowOffset = function observeWindowOffset(instance, cb) {\n  var element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  var handler = function handler() {\n    cb(element[instance.options.horizontal ? 'scrollX' : 'scrollY']);\n  };\n  handler();\n  element.addEventListener('scroll', handler, {\n    passive: true\n  });\n  return function () {\n    element.removeEventListener('scroll', handler);\n  };\n};\nvar measureElement = function measureElement(element, entry, instance) {\n  if (entry != null && entry.borderBoxSize) {\n    var box = entry.borderBoxSize[0];\n    if (box) {\n      var size = Math.round(box[instance.options.horizontal ? 'inlineSize' : 'blockSize']);\n      return size;\n    }\n  }\n  return Math.round(element.getBoundingClientRect()[instance.options.horizontal ? 'width' : 'height']);\n};\nvar windowScroll = function windowScroll(offset, _ref, instance) {\n  var _instance$scrollEleme, _instance$scrollEleme2;\n  var _ref$adjustments = _ref.adjustments,\n    adjustments = _ref$adjustments === void 0 ? 0 : _ref$adjustments,\n    behavior = _ref.behavior;\n  var toOffset = offset + adjustments;\n  (_instance$scrollEleme = instance.scrollElement) == null ? void 0 : _instance$scrollEleme.scrollTo == null ? void 0 : _instance$scrollEleme.scrollTo((_instance$scrollEleme2 = {}, _instance$scrollEleme2[instance.options.horizontal ? 'left' : 'top'] = toOffset, _instance$scrollEleme2.behavior = behavior, _instance$scrollEleme2));\n};\nvar elementScroll = function elementScroll(offset, _ref2, instance) {\n  var _instance$scrollEleme3, _instance$scrollEleme4;\n  var _ref2$adjustments = _ref2.adjustments,\n    adjustments = _ref2$adjustments === void 0 ? 0 : _ref2$adjustments,\n    behavior = _ref2.behavior;\n  var toOffset = offset + adjustments;\n  (_instance$scrollEleme3 = instance.scrollElement) == null ? void 0 : _instance$scrollEleme3.scrollTo == null ? void 0 : _instance$scrollEleme3.scrollTo((_instance$scrollEleme4 = {}, _instance$scrollEleme4[instance.options.horizontal ? 'left' : 'top'] = toOffset, _instance$scrollEleme4.behavior = behavior, _instance$scrollEleme4));\n};\nvar Virtualizer = function Virtualizer(_opts) {\n  var _this = this;\n  this.unsubs = [];\n  this.scrollElement = null;\n  this.isScrolling = false;\n  this.isScrollingTimeoutId = null;\n  this.scrollToIndexTimeoutId = null;\n  this.measurementsCache = [];\n  this.itemSizeCache = new Map();\n  this.pendingMeasuredCacheIndexes = [];\n  this.scrollDirection = null;\n  this.scrollAdjustments = 0;\n  this.measureElementCache = new Map();\n  this.observer = function () {\n    var _ro = null;\n    var get = function get() {\n      if (_ro) {\n        return _ro;\n      } else if (typeof ResizeObserver !== 'undefined') {\n        return _ro = new ResizeObserver(function (entries) {\n          entries.forEach(function (entry) {\n            _this._measureElement(entry.target, entry);\n          });\n        });\n      } else {\n        return null;\n      }\n    };\n    return {\n      disconnect: function disconnect() {\n        var _get;\n        return (_get = get()) == null ? void 0 : _get.disconnect();\n      },\n      observe: function observe(target) {\n        var _get2;\n        return (_get2 = get()) == null ? void 0 : _get2.observe(target, {\n          box: 'border-box'\n        });\n      },\n      unobserve: function unobserve(target) {\n        var _get3;\n        return (_get3 = get()) == null ? void 0 : _get3.unobserve(target);\n      }\n    };\n  }();\n  this.range = null;\n  this.setOptions = function (opts) {\n    Object.entries(opts).forEach(function (_ref3) {\n      var key = _ref3[0],\n        value = _ref3[1];\n      if (typeof value === 'undefined') delete opts[key];\n    });\n    _this.options = _extends({\n      debug: false,\n      initialOffset: 0,\n      overscan: 1,\n      paddingStart: 0,\n      paddingEnd: 0,\n      scrollPaddingStart: 0,\n      scrollPaddingEnd: 0,\n      horizontal: false,\n      getItemKey: defaultKeyExtractor,\n      rangeExtractor: defaultRangeExtractor,\n      onChange: function onChange() {},\n      measureElement: measureElement,\n      initialRect: {\n        width: 0,\n        height: 0\n      },\n      scrollMargin: 0,\n      scrollingDelay: 150,\n      indexAttribute: 'data-index',\n      initialMeasurementsCache: [],\n      lanes: 1\n    }, opts);\n  };\n  this.notify = function (sync) {\n    _this.options.onChange == null ? void 0 : _this.options.onChange(_this, sync);\n  };\n  this.maybeNotify = memo(function () {\n    _this.calculateRange();\n    return [_this.isScrolling, _this.range ? _this.range.startIndex : null, _this.range ? _this.range.endIndex : null];\n  }, function (isScrolling) {\n    _this.notify(isScrolling);\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'maybeNotify',\n    debug: function debug() {\n      return _this.options.debug;\n    },\n    initialDeps: [this.isScrolling, this.range ? this.range.startIndex : null, this.range ? this.range.endIndex : null]\n  });\n  this.cleanup = function () {\n    _this.unsubs.filter(Boolean).forEach(function (d) {\n      return d();\n    });\n    _this.unsubs = [];\n    _this.scrollElement = null;\n  };\n  this._didMount = function () {\n    _this.measureElementCache.forEach(_this.observer.observe);\n    return function () {\n      _this.observer.disconnect();\n      _this.cleanup();\n    };\n  };\n  this._willUpdate = function () {\n    var scrollElement = _this.options.getScrollElement();\n    if (_this.scrollElement !== scrollElement) {\n      _this.cleanup();\n      _this.scrollElement = scrollElement;\n      _this._scrollToOffset(_this.scrollOffset, {\n        adjustments: undefined,\n        behavior: undefined\n      });\n      _this.unsubs.push(_this.options.observeElementRect(_this, function (rect) {\n        _this.scrollRect = rect;\n        _this.maybeNotify();\n      }));\n      _this.unsubs.push(_this.options.observeElementOffset(_this, function (offset) {\n        _this.scrollAdjustments = 0;\n        if (_this.scrollOffset === offset) {\n          return;\n        }\n        if (_this.isScrollingTimeoutId !== null) {\n          clearTimeout(_this.isScrollingTimeoutId);\n          _this.isScrollingTimeoutId = null;\n        }\n        _this.isScrolling = true;\n        _this.scrollDirection = _this.scrollOffset < offset ? 'forward' : 'backward';\n        _this.scrollOffset = offset;\n        _this.maybeNotify();\n        _this.isScrollingTimeoutId = setTimeout(function () {\n          _this.isScrollingTimeoutId = null;\n          _this.isScrolling = false;\n          _this.scrollDirection = null;\n          _this.maybeNotify();\n        }, _this.options.scrollingDelay);\n      }));\n    }\n  };\n  this.getSize = function () {\n    return _this.scrollRect[_this.options.horizontal ? 'width' : 'height'];\n  };\n  this.memoOptions = memo(function () {\n    return [_this.options.count, _this.options.paddingStart, _this.options.scrollMargin, _this.options.getItemKey];\n  }, function (count, paddingStart, scrollMargin, getItemKey) {\n    _this.pendingMeasuredCacheIndexes = [];\n    return {\n      count: count,\n      paddingStart: paddingStart,\n      scrollMargin: scrollMargin,\n      getItemKey: getItemKey\n    };\n  }, {\n    key: false\n  });\n  this.getFurthestMeasurement = function (measurements, index) {\n    var furthestMeasurementsFound = new Map();\n    var furthestMeasurements = new Map();\n    for (var m = index - 1; m >= 0; m--) {\n      var measurement = measurements[m];\n      if (furthestMeasurementsFound.has(measurement.lane)) {\n        continue;\n      }\n      var previousFurthestMeasurement = furthestMeasurements.get(measurement.lane);\n      if (previousFurthestMeasurement == null || measurement.end > previousFurthestMeasurement.end) {\n        furthestMeasurements.set(measurement.lane, measurement);\n      } else if (measurement.end < previousFurthestMeasurement.end) {\n        furthestMeasurementsFound.set(measurement.lane, true);\n      }\n      if (furthestMeasurementsFound.size === _this.options.lanes) {\n        break;\n      }\n    }\n    return furthestMeasurements.size === _this.options.lanes ? Array.from(furthestMeasurements.values()).sort(function (a, b) {\n      return a.end - b.end;\n    })[0] : undefined;\n  };\n  this.getMeasurements = memo(function () {\n    return [_this.memoOptions(), _this.itemSizeCache];\n  }, function (_ref4, itemSizeCache) {\n    var count = _ref4.count,\n      paddingStart = _ref4.paddingStart,\n      scrollMargin = _ref4.scrollMargin,\n      getItemKey = _ref4.getItemKey;\n    var min = _this.pendingMeasuredCacheIndexes.length > 0 ? Math.min.apply(Math, _this.pendingMeasuredCacheIndexes) : 0;\n    _this.pendingMeasuredCacheIndexes = [];\n    var measurements = _this.measurementsCache.slice(0, min);\n    for (var _i2 = min; _i2 < count; _i2++) {\n      var key = getItemKey(_i2);\n      var furthestMeasurement = _this.options.lanes === 1 ? measurements[_i2 - 1] : _this.getFurthestMeasurement(measurements, _i2);\n      var start = furthestMeasurement ? furthestMeasurement.end : paddingStart + scrollMargin;\n      var measuredSize = itemSizeCache.get(key);\n      var size = typeof measuredSize === 'number' ? measuredSize : _this.options.estimateSize(_i2);\n      var end = start + size;\n      var lane = furthestMeasurement ? furthestMeasurement.lane : _i2 % _this.options.lanes;\n      measurements[_i2] = {\n        index: _i2,\n        start: start,\n        size: size,\n        end: end,\n        key: key,\n        lane: lane\n      };\n    }\n    _this.measurementsCache = measurements;\n    return measurements;\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'getMeasurements',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.calculateRange = memo(function () {\n    return [_this.getMeasurements(), _this.getSize(), _this.scrollOffset];\n  }, function (measurements, outerSize, scrollOffset) {\n    return _this.range = measurements.length > 0 && outerSize > 0 ? calculateRange({\n      measurements: measurements,\n      outerSize: outerSize,\n      scrollOffset: scrollOffset\n    }) : null;\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'calculateRange',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.getIndexes = memo(function () {\n    return [_this.options.rangeExtractor, _this.calculateRange(), _this.options.overscan, _this.options.count];\n  }, function (rangeExtractor, range, overscan, count) {\n    return range === null ? [] : rangeExtractor(_extends({}, range, {\n      overscan: overscan,\n      count: count\n    }));\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'getIndexes',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.indexFromElement = function (node) {\n    var attributeName = _this.options.indexAttribute;\n    var indexStr = node.getAttribute(attributeName);\n    if (!indexStr) {\n      console.warn(\"Missing attribute name '\" + attributeName + \"={index}' on measured element.\");\n      return -1;\n    }\n    return parseInt(indexStr, 10);\n  };\n  this._measureElement = function (node, entry) {\n    var item = _this.measurementsCache[_this.indexFromElement(node)];\n    if (!item || !node.isConnected) {\n      _this.measureElementCache.forEach(function (cached, key) {\n        if (cached === node) {\n          _this.observer.unobserve(node);\n          _this.measureElementCache[\"delete\"](key);\n        }\n      });\n      return;\n    }\n    var prevNode = _this.measureElementCache.get(item.key);\n    if (prevNode !== node) {\n      if (prevNode) {\n        _this.observer.unobserve(prevNode);\n      }\n      _this.observer.observe(node);\n      _this.measureElementCache.set(item.key, node);\n    }\n    var measuredItemSize = _this.options.measureElement(node, entry, _this);\n    _this.resizeItem(item, measuredItemSize);\n  };\n  this.resizeItem = function (item, size) {\n    var _this$itemSizeCache$g;\n    var itemSize = (_this$itemSizeCache$g = _this.itemSizeCache.get(item.key)) != null ? _this$itemSizeCache$g : item.size;\n    var delta = size - itemSize;\n    if (delta !== 0) {\n      if (item.start < _this.scrollOffset) {\n        if (process.env.NODE_ENV !== 'production' && _this.options.debug) {\n          console.info('correction', delta);\n        }\n        _this._scrollToOffset(_this.scrollOffset, {\n          adjustments: _this.scrollAdjustments += delta,\n          behavior: undefined\n        });\n      }\n      _this.pendingMeasuredCacheIndexes.push(item.index);\n      _this.itemSizeCache = new Map(_this.itemSizeCache.set(item.key, size));\n      _this.notify(false);\n    }\n  };\n  this.measureElement = function (node) {\n    if (!node) {\n      return;\n    }\n    _this._measureElement(node, undefined);\n  };\n  this.getVirtualItems = memo(function () {\n    return [_this.getIndexes(), _this.getMeasurements()];\n  }, function (indexes, measurements) {\n    var virtualItems = [];\n    for (var k = 0, len = indexes.length; k < len; k++) {\n      var _i3 = indexes[k];\n      var measurement = measurements[_i3];\n      virtualItems.push(measurement);\n    }\n    return virtualItems;\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'getIndexes',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.getVirtualItemForOffset = function (offset) {\n    var measurements = _this.getMeasurements();\n    return notUndefined(measurements[findNearestBinarySearch(0, measurements.length - 1, function (index) {\n      return notUndefined(measurements[index]).start;\n    }, offset)]);\n  };\n  this.getOffsetForAlignment = function (toOffset, align) {\n    var size = _this.getSize();\n    if (align === 'auto') {\n      if (toOffset <= _this.scrollOffset) {\n        align = 'start';\n      } else if (toOffset >= _this.scrollOffset + size) {\n        align = 'end';\n      } else {\n        align = 'start';\n      }\n    }\n    if (align === 'start') {\n      toOffset = toOffset;\n    } else if (align === 'end') {\n      toOffset = toOffset - size;\n    } else if (align === 'center') {\n      toOffset = toOffset - size / 2;\n    }\n    var scrollSizeProp = _this.options.horizontal ? 'scrollWidth' : 'scrollHeight';\n    var scrollSize = _this.scrollElement ? 'document' in _this.scrollElement ? _this.scrollElement.document.documentElement[scrollSizeProp] : _this.scrollElement[scrollSizeProp] : 0;\n    var maxOffset = scrollSize - _this.getSize();\n    return Math.max(Math.min(maxOffset, toOffset), 0);\n  };\n  this.getOffsetForIndex = function (index, align) {\n    if (align === void 0) {\n      align = 'auto';\n    }\n    index = Math.max(0, Math.min(index, _this.options.count - 1));\n    var measurement = notUndefined(_this.getMeasurements()[index]);\n    if (align === 'auto') {\n      if (measurement.end >= _this.scrollOffset + _this.getSize() - _this.options.scrollPaddingEnd) {\n        align = 'end';\n      } else if (measurement.start <= _this.scrollOffset + _this.options.scrollPaddingStart) {\n        align = 'start';\n      } else {\n        return [_this.scrollOffset, align];\n      }\n    }\n    var toOffset = align === 'end' ? measurement.end + _this.options.scrollPaddingEnd : measurement.start - _this.options.scrollPaddingStart;\n    return [_this.getOffsetForAlignment(toOffset, align), align];\n  };\n  this.isDynamicMode = function () {\n    return _this.measureElementCache.size > 0;\n  };\n  this.cancelScrollToIndex = function () {\n    if (_this.scrollToIndexTimeoutId !== null) {\n      clearTimeout(_this.scrollToIndexTimeoutId);\n      _this.scrollToIndexTimeoutId = null;\n    }\n  };\n  this.scrollToOffset = function (toOffset, _temp) {\n    var _ref5 = _temp === void 0 ? {} : _temp,\n      _ref5$align = _ref5.align,\n      align = _ref5$align === void 0 ? 'start' : _ref5$align,\n      behavior = _ref5.behavior;\n    _this.cancelScrollToIndex();\n    if (behavior === 'smooth' && _this.isDynamicMode()) {\n      console.warn('The `smooth` scroll behavior is not fully supported with dynamic size.');\n    }\n    _this._scrollToOffset(_this.getOffsetForAlignment(toOffset, align), {\n      adjustments: undefined,\n      behavior: behavior\n    });\n  };\n  this.scrollToIndex = function (index, _temp2) {\n    var _ref6 = _temp2 === void 0 ? {} : _temp2,\n      _ref6$align = _ref6.align,\n      initialAlign = _ref6$align === void 0 ? 'auto' : _ref6$align,\n      behavior = _ref6.behavior;\n    index = Math.max(0, Math.min(index, _this.options.count - 1));\n    _this.cancelScrollToIndex();\n    if (behavior === 'smooth' && _this.isDynamicMode()) {\n      console.warn('The `smooth` scroll behavior is not fully supported with dynamic size.');\n    }\n    var _this$getOffsetForInd = _this.getOffsetForIndex(index, initialAlign),\n      toOffset = _this$getOffsetForInd[0],\n      align = _this$getOffsetForInd[1];\n    _this._scrollToOffset(toOffset, {\n      adjustments: undefined,\n      behavior: behavior\n    });\n    if (behavior !== 'smooth' && _this.isDynamicMode()) {\n      _this.scrollToIndexTimeoutId = setTimeout(function () {\n        _this.scrollToIndexTimeoutId = null;\n        var elementInDOM = _this.measureElementCache.has(_this.options.getItemKey(index));\n        if (elementInDOM) {\n          var _this$getOffsetForInd2 = _this.getOffsetForIndex(index, align),\n            _toOffset = _this$getOffsetForInd2[0];\n          if (!approxEqual(_toOffset, _this.scrollOffset)) {\n            _this.scrollToIndex(index, {\n              align: align,\n              behavior: behavior\n            });\n          }\n        } else {\n          _this.scrollToIndex(index, {\n            align: align,\n            behavior: behavior\n          });\n        }\n      });\n    }\n  };\n  this.scrollBy = function (delta, _temp3) {\n    var _ref7 = _temp3 === void 0 ? {} : _temp3,\n      behavior = _ref7.behavior;\n    _this.cancelScrollToIndex();\n    if (behavior === 'smooth' && _this.isDynamicMode()) {\n      console.warn('The `smooth` scroll behavior is not fully supported with dynamic size.');\n    }\n    _this._scrollToOffset(_this.scrollOffset + delta, {\n      adjustments: undefined,\n      behavior: behavior\n    });\n  };\n  this.getTotalSize = function () {\n    var _this$getMeasurements;\n    return (((_this$getMeasurements = _this.getMeasurements()[_this.options.count - 1]) == null ? void 0 : _this$getMeasurements.end) || _this.options.paddingStart) - _this.options.scrollMargin + _this.options.paddingEnd;\n  };\n  this._scrollToOffset = function (offset, _ref8) {\n    var adjustments = _ref8.adjustments,\n      behavior = _ref8.behavior;\n    _this.options.scrollToFn(offset, {\n      behavior: behavior,\n      adjustments: adjustments\n    }, _this);\n  };\n  this.measure = function () {\n    _this.itemSizeCache = new Map();\n    _this.notify(false);\n  };\n  this.setOptions(_opts);\n  this.scrollRect = this.options.initialRect;\n  this.scrollOffset = this.options.initialOffset;\n  this.measurementsCache = this.options.initialMeasurementsCache;\n  this.measurementsCache.forEach(function (item) {\n    _this.itemSizeCache.set(item.key, item.size);\n  });\n  this.maybeNotify();\n};\nvar findNearestBinarySearch = function findNearestBinarySearch(low, high, getCurrentValue, value) {\n  while (low <= high) {\n    var middle = (low + high) / 2 | 0;\n    var currentValue = getCurrentValue(middle);\n    if (currentValue < value) {\n      low = middle + 1;\n    } else if (currentValue > value) {\n      high = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\nfunction calculateRange(_ref9) {\n  var measurements = _ref9.measurements,\n    outerSize = _ref9.outerSize,\n    scrollOffset = _ref9.scrollOffset;\n  var count = measurements.length - 1;\n  var getOffset = function getOffset(index) {\n    return measurements[index].start;\n  };\n  var startIndex = findNearestBinarySearch(0, count, getOffset, scrollOffset);\n  var endIndex = startIndex;\n  while (endIndex < count && measurements[endIndex].end < scrollOffset + outerSize) {\n    endIndex++;\n  }\n  return {\n    startIndex: startIndex,\n    endIndex: endIndex\n  };\n}\n\nexport { Virtualizer, defaultKeyExtractor, defaultRangeExtractor, elementScroll, measureElement, observeElementOffset, observeElementRect, observeWindowOffset, observeWindowRect, windowScroll };\n//# sourceMappingURL=index.mjs.map\n","/**\n * react-virtual\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport { extends as _extends } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport * as React from 'react';\nimport { flushSync } from 'react-dom';\nimport { observeElementRect, observeElementOffset, elementScroll, observeWindowRect, observeWindowOffset, windowScroll, Virtualizer } from '@tanstack/virtual-core';\nexport * from '@tanstack/virtual-core';\n\n//\n\nvar useIsomorphicLayoutEffect = typeof document !== 'undefined' ? React.useLayoutEffect : React.useEffect;\nfunction useVirtualizerBase(options) {\n  var rerender = React.useReducer(function () {\n    return {};\n  }, {})[1];\n  var resolvedOptions = _extends({}, options, {\n    onChange: function onChange(instance, sync) {\n      if (sync) {\n        flushSync(rerender);\n      } else {\n        rerender();\n      }\n      options.onChange == null ? void 0 : options.onChange(instance, sync);\n    }\n  });\n  var _React$useState = React.useState(function () {\n      return new Virtualizer(resolvedOptions);\n    }),\n    instance = _React$useState[0];\n  instance.setOptions(resolvedOptions);\n  React.useEffect(function () {\n    return instance._didMount();\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    return instance._willUpdate();\n  });\n  return instance;\n}\nfunction useVirtualizer(options) {\n  return useVirtualizerBase(_extends({\n    observeElementRect: observeElementRect,\n    observeElementOffset: observeElementOffset,\n    scrollToFn: elementScroll\n  }, options));\n}\nfunction useWindowVirtualizer(options) {\n  return useVirtualizerBase(_extends({\n    getScrollElement: function getScrollElement() {\n      return typeof document !== 'undefined' ? window : null;\n    },\n    observeElementRect: observeWindowRect,\n    observeElementOffset: observeWindowOffset,\n    scrollToFn: windowScroll,\n    initialOffset: typeof document !== 'undefined' ? window.scrollY : undefined\n  }, options));\n}\n\nexport { useVirtualizer, useWindowVirtualizer };\n//# sourceMappingURL=index.mjs.map\n","import React from 'react';\nimport {FileEntry} from '../../file-entry';\n\nexport interface FilePreviewContextValue {\n  entries: FileEntry[];\n  activeIndex: number;\n}\n\nexport const FilePreviewContext = React.createContext<FilePreviewContextValue>(\n  null!,\n);\n","import {ReactNode, useContext} from 'react';\nimport clsx from 'clsx';\nimport {Button} from '@ui/buttons/button';\nimport {downloadFileFromUrl} from '@ui/utils/files/download-file-from-url';\nimport {FilePreviewContext} from '../file-preview-context';\nimport {Trans} from '@ui/i18n/trans';\nimport {FilePreviewProps} from './file-preview-props';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\n\ninterface Props extends FilePreviewProps {\n  message?: ReactNode;\n}\nexport function DefaultFilePreview({message, className, allowDownload}: Props) {\n  const {entries, activeIndex} = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const content = message || <Trans message=\"No file preview available\" />;\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\n  return (\n    <div\n      className={clsx(\n        className,\n        'w-[calc(100%-40px)] max-w-400 rounded bg-paper p-40 text-center shadow',\n      )}\n    >\n      <div className=\"text-lg\">{content}</div>\n      {allowDownload && (\n        <div className=\"mt-20 block text-center\">\n          <Button\n            variant=\"flat\"\n            color=\"primary\"\n            onClick={() => {\n              if (downloadUrl) {\n                downloadFileFromUrl(downloadUrl);\n              }\n            }}\n          >\n            <Trans message=\"Download\" />\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}\n","import clsx from 'clsx';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\n\nexport function ImageFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <img\n      className={clsx(className, 'shadow')}\n      src={previewUrl}\n      alt={trans({\n        message: 'Preview for :name',\n        values: {name: entry.name},\n      })}\n    />\n  );\n}\n","import {useEffect, useState} from 'react';\nimport clsx from 'clsx';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {ProgressCircle} from '@ui/progress/progress-circle';\nimport {useFileEntryUrls} from '@common/uploads/file-entry-urls';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {Trans} from '@ui/i18n/trans';\nimport {apiClient} from '@common/http/query-client';\n\nconst FIVE_MB = 5242880;\n\nexport function TextFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const [tooLarge, setTooLarge] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isFailed, setIsFailed] = useState(false);\n  const [contents, setContents] = useState<string | null>(null);\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  useEffect(() => {\n    if (!entry) return;\n    if (!previewUrl) {\n      setIsFailed(true);\n    } else if (entry.file_size! >= FIVE_MB) {\n      setTooLarge(true);\n      setIsLoading(false);\n    } else {\n      getFileContents(previewUrl)\n        .then(response => {\n          setContents(response.data);\n        })\n        .catch(() => {\n          setIsFailed(true);\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [entry, previewUrl]);\n\n  if (isLoading) {\n    return (\n      <ProgressCircle\n        isIndeterminate\n        aria-label={trans({message: 'Loading file contents'})}\n      />\n    );\n  }\n\n  if (tooLarge) {\n    return (\n      <DefaultFilePreview\n        {...props}\n        message={<Trans message=\"This file is too large to preview.\" />}\n      />\n    );\n  }\n\n  if (isFailed) {\n    return (\n      <DefaultFilePreview\n        {...props}\n        message={<Trans message=\"There was an issue previewing this file\" />}\n      />\n    );\n  }\n\n  return (\n    <pre\n      className={clsx(\n        'h-full w-full overflow-y-auto whitespace-pre-wrap break-words rounded bg-paper p-20 text-sm',\n        className,\n      )}\n    >\n      <div className=\"container mx-auto\">{`${contents}`}</div>\n    </pre>\n  );\n}\n\nfunction getFileContents(src: string) {\n  return apiClient.get(src, {\n    responseType: 'text',\n    // required for s3 presigned url to work\n    withCredentials: false,\n    headers: {\n      Accept: 'text/plain',\n    },\n  });\n}\n","import {useEffect, useRef, useState} from 'react';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\n\nexport function VideoFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {previewUrl} = useFileEntryUrls(entry);\n  const ref = useRef<HTMLVideoElement>(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <video\n      className={className}\n      ref={ref}\n      controls\n      controlsList=\"nodownload noremoteplayback\"\n      playsInline\n      autoPlay\n    >\n      <source\n        src={previewUrl}\n        type={entry.mime}\n        onError={() => {\n          setMediaInvalid(true);\n        }}\n      />\n    </video>\n  );\n}\n","import {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\nimport {useEffect, useRef, useState} from 'react';\n\nexport function AudioFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {previewUrl} = useFileEntryUrls(entry);\n  const ref = useRef<HTMLAudioElement>(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <audio\n      className={className}\n      ref={ref}\n      controls\n      controlsList=\"nodownload noremoteplayback\"\n      autoPlay\n    >\n      <source\n        src={previewUrl}\n        type={entry.mime}\n        onError={() => {\n          setMediaInvalid(true);\n        }}\n      />\n    </audio>\n  );\n}\n","import clsx from 'clsx';\nimport {FilePreviewProps} from '@common/uploads/components/file-preview/file-preview/file-preview-props';\nimport {useFileEntryUrls} from '@common/uploads/file-entry-urls';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {DefaultFilePreview} from '@common/uploads/components/file-preview/file-preview/default-file-preview';\n\nexport function PdfFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <iframe\n      title={trans({\n        message: 'Preview for :name',\n        values: {name: entry.name},\n      })}\n      className={clsx(className, 'h-full w-full')}\n      src={`${previewUrl}#toolbar=0`}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport {useEffect, useRef, useState} from 'react';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {ProgressCircle} from '@ui/progress/progress-circle';\nimport {FileEntry} from '../../../file-entry';\nimport {useFileEntryUrls} from '../../../file-entry-urls';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport {apiClient} from '@common/http/query-client';\n\nexport function WordDocumentFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const ref = useRef<HTMLIFrameElement>(null);\n  const [showDefault, setShowDefault] = useState(false);\n  const timeoutId = useRef<any>();\n  const [isLoading, setIsLoading] = useState(false);\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  useEffect(() => {\n    // Google Docs viewer only supports files up to 25MB\n    if (!previewUrl) {\n      setShowDefault(true);\n    } else if (entry.file_size && entry.file_size > 25000000) {\n      setShowDefault(true);\n    } else if (ref.current) {\n      ref.current.onload = () => {\n        clearTimeout(timeoutId.current);\n        setIsLoading(false);\n      };\n\n      buildPreviewUrl(previewUrl, entry).then(url => {\n        if (ref.current) {\n          ref.current.src = url;\n        }\n      });\n\n      // if preview iframe is not loaded\n      // after 5 seconds, bail and show default preview\n      timeoutId.current = setTimeout(() => {\n        setShowDefault(true);\n      }, 5000);\n    }\n  }, [entry, previewUrl]);\n\n  if (showDefault) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <div className={clsx(className, 'h-full w-full')}>\n      {isLoading && <ProgressCircle />}\n      <iframe\n        ref={ref}\n        title={trans({\n          message: 'Preview for :name',\n          values: {name: entry.name},\n        })}\n        className={clsx('h-full w-full', isLoading && 'hidden')}\n      />\n    </div>\n  );\n}\n\nasync function buildPreviewUrl(\n  urlString: string,\n  entry: FileEntry,\n): Promise<string> {\n  const url = new URL(urlString);\n  // if we're not trying to preview shareable link we will need to generate\n  // preview token, otherwise it won't be publicly accessible\n  if (!url.searchParams.has('shareable_link')) {\n    const {data} = await apiClient.post(\n      `file-entries/${entry.id}/add-preview-token`,\n    );\n    url.searchParams.append('preview_token', data.preview_token);\n  }\n\n  return buildOfficeLivePreviewUrl(url);\n}\n\nfunction buildOfficeLivePreviewUrl(url: URL) {\n  // https://docs.google.com/gview?embedded=true&url=\n  return `https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(\n    url.toString(),\n  )}`;\n}\n","import {ImageFilePreview} from './file-preview/image-file-preview';\nimport {FileEntry} from '../../file-entry';\nimport {DefaultFilePreview} from './file-preview/default-file-preview';\nimport {TextFilePreview} from './file-preview/text-file-preview';\nimport {VideoFilePreview} from './file-preview/video-file-preview';\nimport {AudioFilePreview} from './file-preview/audio-file-preview';\nimport {PdfFilePreview} from './file-preview/pdf-file-preview';\nimport {WordDocumentFilePreview} from './file-preview/word-document-file-preview';\n\nexport const AvailablePreviews = {\n  text: TextFilePreview,\n  video: VideoFilePreview,\n  audio: AudioFilePreview,\n  image: ImageFilePreview,\n  pdf: PdfFilePreview,\n  spreadsheet: WordDocumentFilePreview,\n  powerPoint: WordDocumentFilePreview,\n  word: WordDocumentFilePreview,\n  'text/rtf': DefaultFilePreview,\n} as const;\n\nexport function getPreviewForEntry(entry: FileEntry) {\n  const mime = entry?.mime as keyof typeof AvailablePreviews;\n  const type = entry?.type as keyof typeof AvailablePreviews;\n  return (\n    AvailablePreviews[mime] || AvailablePreviews[type] || DefaultFilePreview\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ChevronLeftIcon = createSvgIcon(\n  <path d=\"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z\" />\n, 'ChevronLeftOutlined');\n","import {AnimatePresence, m} from 'framer-motion';\nimport {Fragment, ReactNode, useContext, useMemo} from 'react';\nimport clsx from 'clsx';\nimport {getPreviewForEntry} from './available-previews';\nimport {FileEntry} from '../../file-entry';\nimport {FilePreviewContext} from './file-preview-context';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport {ChevronLeftIcon} from '@ui/icons/material/ChevronLeft';\nimport {ChevronRightIcon} from '@ui/icons/material/ChevronRight';\nimport {FileDownloadIcon} from '@ui/icons/material/FileDownload';\nimport {downloadFileFromUrl} from '@ui/utils/files/download-file-from-url';\nimport {useFileEntryUrls} from '../../file-entry-urls';\nimport {Trans} from '@ui/i18n/trans';\nimport {Button} from '@ui/buttons/button';\nimport {CloseIcon} from '@ui/icons/material/Close';\nimport {FileThumbnail} from '@common/uploads/components/file-type-icon/file-thumbnail';\nimport {useMediaQuery} from '@ui/utils/hooks/use-media-query';\nimport {KeyboardArrowLeftIcon} from '@ui/icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '@ui/icons/material/KeyboardArrowRight';\nimport {useControlledState} from '@react-stately/utils';\nimport {opacityAnimation} from '@ui/animation/opacity-animation';\n\nexport interface FilePreviewContainerProps {\n  entries: FileEntry[];\n  activeIndex?: number;\n  defaultActiveIndex?: number;\n  onActiveIndexChange?: (index: number) => void;\n  onClose?: () => void;\n  showHeader?: boolean;\n  headerActionsLeft?: ReactNode;\n  className?: string;\n  allowDownload?: boolean;\n}\nexport function FilePreviewContainer({\n  entries,\n  onClose,\n  showHeader = true,\n  className,\n  headerActionsLeft,\n  allowDownload = true,\n  ...props\n}: FilePreviewContainerProps) {\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n\n  const [activeIndex, setActiveIndex] = useControlledState(\n    props.activeIndex,\n    props.defaultActiveIndex || 0,\n    props.onActiveIndexChange,\n  );\n\n  const activeEntry = entries[activeIndex];\n  const contextValue = useMemo(() => {\n    return {entries, activeIndex};\n  }, [entries, activeIndex]);\n  const Preview = getPreviewForEntry(activeEntry);\n\n  if (!activeEntry) {\n    onClose?.();\n    return null;\n  }\n\n  const canOpenNext = entries.length - 1 > activeIndex;\n  const openNext = () => {\n    setActiveIndex(activeIndex + 1);\n  };\n  const canOpenPrevious = activeIndex > 0;\n  const openPrevious = () => {\n    setActiveIndex(activeIndex - 1);\n  };\n\n  return (\n    <FilePreviewContext.Provider value={contextValue}>\n      {showHeader && (\n        <Header\n          actionsLeft={headerActionsLeft}\n          isMobile={isMobile}\n          onClose={onClose}\n          onNext={canOpenNext ? openNext : undefined}\n          onPrevious={canOpenPrevious ? openPrevious : undefined}\n          allowDownload={allowDownload}\n        />\n      )}\n      <div className={clsx('relative flex-auto overflow-hidden', className)}>\n        {isMobile && (\n          <IconButton\n            size=\"lg\"\n            className=\"absolute left-0 top-1/2 z-10 -translate-y-1/2 transform text-muted\"\n            disabled={!canOpenPrevious}\n            onClick={openPrevious}\n          >\n            <KeyboardArrowLeftIcon />\n          </IconButton>\n        )}\n        <AnimatePresence initial={false}>\n          <m.div\n            className=\"absolute inset-0 flex items-center justify-center\"\n            key={activeEntry.id}\n            {...opacityAnimation}\n          >\n            <Preview\n              className=\"max-h-[calc(100%-30px)]\"\n              entry={activeEntry}\n              allowDownload={allowDownload}\n            />\n          </m.div>\n        </AnimatePresence>\n        {isMobile && (\n          <IconButton\n            size=\"lg\"\n            className=\"absolute right-0 top-1/2 z-10 -translate-y-1/2 transform text-muted\"\n            disabled={!canOpenNext}\n            onClick={openNext}\n          >\n            <KeyboardArrowRightIcon />\n          </IconButton>\n        )}\n      </div>\n    </FilePreviewContext.Provider>\n  );\n}\n\ninterface HeaderProps {\n  onNext?: () => void;\n  onPrevious?: () => void;\n  onClose?: () => void;\n  isMobile: boolean | null;\n  actionsLeft?: ReactNode;\n  allowDownload?: boolean;\n}\nfunction Header({\n  onNext,\n  onPrevious,\n  onClose,\n  isMobile,\n  actionsLeft,\n  allowDownload,\n}: HeaderProps) {\n  const {entries, activeIndex} = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\n\n  const desktopDownloadButton = (\n    <Button\n      startIcon={<FileDownloadIcon />}\n      variant=\"text\"\n      onClick={() => {\n        if (downloadUrl) {\n          downloadFileFromUrl(downloadUrl);\n        }\n      }}\n    >\n      <Trans message=\"Download\" />\n    </Button>\n  );\n\n  const mobileDownloadButton = (\n    <IconButton\n      onClick={() => {\n        if (downloadUrl) {\n          downloadFileFromUrl(downloadUrl);\n        }\n      }}\n    >\n      <FileDownloadIcon />\n    </IconButton>\n  );\n\n  const downloadButton = isMobile\n    ? mobileDownloadButton\n    : desktopDownloadButton;\n\n  return (\n    <div className=\"flex min-h-50 flex-shrink-0 items-center justify-between gap-20 border-b bg-paper px-10 text-sm text-muted\">\n      <div className=\"flex w-1/3 items-center justify-start gap-4\">\n        {actionsLeft}\n        {allowDownload ? downloadButton : undefined}\n      </div>\n      <div className=\"flex w-1/3 flex-nowrap items-center justify-center gap-10 text-main\">\n        <FileThumbnail\n          file={activeEntry}\n          iconClassName=\"w-16 h-16\"\n          showImage={false}\n        />\n        <div className=\"overflow-hidden overflow-ellipsis whitespace-nowrap\">\n          {activeEntry.name}\n        </div>\n      </div>\n      <div className=\"flex w-1/3 items-center justify-end gap-10 whitespace-nowrap\">\n        {!isMobile && (\n          <Fragment>\n            <IconButton disabled={!onPrevious} onClick={onPrevious}>\n              <ChevronLeftIcon />\n            </IconButton>\n            <div>{activeIndex + 1}</div>\n            <div>/</div>\n            <div>{entries.length}</div>\n            <IconButton disabled={!onNext} onClick={onNext}>\n              <ChevronRightIcon />\n            </IconButton>\n            <div className=\"mx-20 h-24 w-1 bg-divider\" />\n          </Fragment>\n        )}\n        <IconButton radius=\"rounded-none\" onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n","import {\n  FilePreviewContainer,\n  FilePreviewContainerProps,\n} from './file-preview-container';\nimport {useDialogContext} from '@ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\n\ninterface Props extends Omit<FilePreviewContainerProps, 'onClose'> {}\nexport function FilePreviewDialog(props: Props) {\n  return (\n    <Dialog\n      size=\"fullscreenTakeover\"\n      background=\"bg-alt\"\n      className=\"flex flex-col\"\n    >\n      <Content {...props} />\n    </Dialog>\n  );\n}\n\nfunction Content(props: Props) {\n  const {close} = useDialogContext();\n  return <FilePreviewContainer onClose={close} {...props} />;\n}\n","import {useControlledState} from '@react-stately/utils';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  CalendarDate,\n  DateValue,\n  isSameDay,\n  toCalendarDate,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\nimport {useCurrentDateTime} from '@ui/i18n/use-current-date-time';\nimport {toSafeZoned} from '@ui/i18n/to-safe-zoned';\n\nexport type Granularity = 'day' | 'minute';\n\nexport type DatePickerState = BaseDatePickerState;\n\nexport interface BaseDatePickerState<T = ZonedDateTime, P = boolean> {\n  timezone: string;\n  granularity: Granularity;\n  selectedValue: T;\n  setSelectedValue: (value: T) => void;\n  calendarIsOpen: boolean;\n  setCalendarIsOpen: (isOpen: boolean) => void;\n  calendarDates: CalendarDate[];\n  setCalendarDates: (dates: CalendarDate[]) => void;\n  dayIsActive: (day: CalendarDate) => boolean;\n  dayIsHighlighted: (day: CalendarDate) => boolean;\n  dayIsRangeStart: (day: CalendarDate) => boolean;\n  dayIsRangeEnd: (day: CalendarDate) => boolean;\n  isPlaceholder: P;\n  setIsPlaceholder: (value: P) => void;\n  clear: () => void;\n  min?: ZonedDateTime;\n  max?: ZonedDateTime;\n  closeDialogOnSelection: boolean;\n  getCellProps: (\n    date: CalendarDate,\n    isSameMonth: boolean,\n  ) => HTMLAttributes<HTMLElement>;\n}\n\nexport interface DatePickerValueProps<V, CV = V> {\n  value?: V | null | '';\n  defaultValue?: V | null;\n  onChange?: (value: CV | null) => void;\n  min?: DateValue;\n  max?: DateValue;\n  granularity?: Granularity;\n  closeDialogOnSelection?: boolean;\n}\nexport function useDatePickerState(\n  props: DatePickerValueProps<ZonedDateTime>,\n): BaseDatePickerState {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState(\n    !props.value && !props.defaultValue,\n  );\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(\n    props.value || now,\n    props.defaultValue || now,\n    value => {\n      setIsPlaceholder(false);\n      setStateValue?.(value);\n    },\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(internalValue, props);\n\n  const clear = useCallback(() => {\n    setIsPlaceholder(true);\n    setInternalValue(now);\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return [toCalendarDate(internalValue)];\n  });\n\n  const setSelectedValue = useCallback(\n    (newValue: DateValue) => {\n      if (min && newValue.compare(min) < 0) {\n        newValue = min;\n      } else if (max && newValue.compare(max) > 0) {\n        newValue = max;\n      }\n\n      // preserve time\n      const value = internalValue\n        ? internalValue.set(newValue)\n        : toSafeZoned(newValue, timezone);\n      setInternalValue(value);\n      setCalendarDates([toCalendarDate(value)]);\n      setIsPlaceholder(false);\n    },\n    [setInternalValue, min, max, internalValue, timezone],\n  );\n\n  const dayIsActive = useCallback(\n    (day: DateValue) => !isPlaceholder && isSameDay(internalValue, day),\n    [internalValue, isPlaceholder],\n  );\n\n  const getCellProps = useCallback(\n    (date: DateValue): HTMLAttributes<HTMLElement> => {\n      return {\n        onClick: () => {\n          setSelectedValue?.(date);\n          if (closeDialogOnSelection) {\n            setCalendarIsOpen?.(false);\n          }\n        },\n      };\n    },\n    [setSelectedValue, setCalendarIsOpen, closeDialogOnSelection],\n  );\n\n  return {\n    selectedValue: internalValue,\n    setSelectedValue: setInternalValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted: () => false,\n    dayIsRangeStart: () => false,\n    dayIsRangeEnd: () => false,\n    getCellProps,\n    calendarDates,\n    setCalendarDates,\n    isPlaceholder,\n    clear,\n    setIsPlaceholder,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection,\n  };\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  Fragment,\n  MouseEvent,\n  useRef,\n} from 'react';\nimport {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport {\n  DatePickerValueProps,\n  useDatePickerState,\n} from './use-date-picker-state';\nimport {DialogTrigger} from '@ui/overlays/dialog/dialog-trigger';\nimport {DateRangeIcon} from '@ui/icons/material/DateRange';\nimport {Dialog} from '@ui/overlays/dialog/dialog';\nimport {DialogBody} from '@ui/overlays/dialog/dialog-body';\nimport {Calendar} from '../calendar/calendar';\nimport {\n  DatePickerField,\n  DatePickerFieldProps,\n} from '../date-range-picker/date-picker-field';\nimport {DateSegmentList} from '../segments/date-segment-list';\nimport {useDateFormatter} from '@ui/i18n/use-date-formatter';\nimport {useTrans} from '@ui/i18n/use-trans';\nimport clsx from 'clsx';\nimport {DialogFooter} from '@ui/overlays/dialog/dialog-footer';\nimport {Button} from '@ui/buttons/button';\nimport {Trans} from '@ui/i18n/trans';\nimport {useCurrentDateTime} from '@ui/i18n/use-current-date-time';\n\nexport interface DatePickerProps\n  extends Omit<DatePickerFieldProps, 'children'>,\n    DatePickerValueProps<ZonedDateTime> {}\nexport function DatePicker({showCalendarFooter, ...props}: DatePickerProps) {\n  const state = useDatePickerState(props);\n  const inputRef = useRef<HTMLDivElement>(null);\n  const now = useCurrentDateTime();\n\n  const footer = showCalendarFooter && (\n    <DialogFooter\n      padding=\"px-14 pb-14\"\n      startAction={\n        <Button\n          disabled={state.isPlaceholder}\n          variant=\"text\"\n          color=\"primary\"\n          onClick={() => {\n            state.clear();\n          }}\n        >\n          <Trans message=\"Clear\" />\n        </Button>\n      }\n    >\n      <Button\n        variant=\"text\"\n        color=\"primary\"\n        onClick={() => {\n          state.setSelectedValue(now);\n          state.setCalendarIsOpen(false);\n        }}\n      >\n        <Trans message=\"Today\" />\n      </Button>\n    </DialogFooter>\n  );\n\n  const dialog = (\n    <DialogTrigger\n      offset={8}\n      placement=\"bottom-start\"\n      isOpen={state.calendarIsOpen}\n      onOpenChange={state.setCalendarIsOpen}\n      type=\"popover\"\n      triggerRef={inputRef}\n      returnFocusToTrigger={false}\n      moveFocusToDialog={false}\n    >\n      <Dialog size=\"auto\">\n        <DialogBody\n          className=\"flex items-start gap-40\"\n          padding={showCalendarFooter ? 'px-24 pt-20 pb-10' : null}\n        >\n          <Calendar state={state} visibleMonths={1} />\n        </DialogBody>\n        {footer}\n      </Dialog>\n    </DialogTrigger>\n  );\n\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    },\n  };\n\n  return (\n    <Fragment>\n      <DatePickerField\n        ref={inputRef}\n        wrapperProps={openOnClick}\n        endAdornment={\n          <DateRangeIcon className={clsx(props.disabled && 'text-disabled')} />\n        }\n        {...props}\n      >\n        <DateSegmentList\n          segmentProps={openOnClick}\n          state={state}\n          value={state.selectedValue}\n          onChange={state.setSelectedValue}\n          isPlaceholder={state.isPlaceholder}\n        />\n      </DatePickerField>\n      {dialog}\n    </Fragment>\n  );\n}\n\ninterface FormDatePickerProps extends DatePickerProps {\n  name: string;\n}\nexport function FormDatePicker(props: FormDatePickerProps) {\n  const {min, max} = props;\n  const {trans} = useTrans();\n  const {format} = useDateFormatter();\n  const {\n    field: {onChange, onBlur, value = null, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n    rules: {\n      validate: v => {\n        if (!v) return;\n        const date = parseAbsoluteToLocal(v);\n        if (min && date.compare(min) < 0) {\n          return trans({\n            message: 'Enter a date after :date',\n            values: {date: format(v)},\n          });\n        }\n        if (max && date.compare(max) > 0) {\n          return trans({\n            message: 'Enter a date before :date',\n            values: {date: format(v)},\n          });\n        }\n      },\n    },\n  });\n\n  const parsedValue: null | ZonedDateTime = value\n    ? parseAbsoluteToLocal(value)\n    : null;\n\n  const formProps: Partial<DatePickerProps> = {\n    onChange: e => {\n      onChange(e ? e.toAbsoluteString() : e);\n    },\n    onBlur,\n    value: parsedValue,\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref,\n  };\n\n  return <DatePicker {...mergeProps(formProps, props)} />;\n}\n\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\n  return ['hour', 'minute', 'dayPeriod'].includes(\n    (e.currentTarget as HTMLElement).ariaLabel || '',\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const InfoIcon = createSvgIcon(\n  <path d=\"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n, 'InfoOutlined');\n","import clsx from 'clsx';\nimport {m} from 'framer-motion';\nimport {cloneElement, ReactElement, useContext} from 'react';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\n\nexport interface DashboardSidenavChildrenProps {\n  className?: string;\n  isCompactMode?: boolean;\n  isOverlayMode?: boolean;\n}\n\nexport interface SidenavProps {\n  className?: string;\n  children: ReactElement<DashboardSidenavChildrenProps>;\n  position?: 'left' | 'right';\n  size?: 'sm' | 'md' | 'lg' | string;\n  mode?: 'overlay';\n  // absolute will place sidenav between navbar/footer, fixed will overlay it over nav/footer.\n  overlayPosition?: 'absolute' | 'fixed';\n  display?: 'flex' | 'block';\n  overflow?: string;\n  forceClosed?: boolean;\n}\nexport function DashboardSidenav({\n  className,\n  position,\n  children,\n  size = 'md',\n  mode,\n  overlayPosition = 'fixed',\n  display = 'flex',\n  overflow = 'overflow-hidden',\n  forceClosed = false,\n}: SidenavProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    rightSidenavStatus,\n    setRightSidenavStatus,\n  } = useContext(DashboardLayoutContext);\n  const isOverlayMode = isMobileMode || mode === 'overlay';\n  let status = position === 'left' ? leftSidenavStatus : rightSidenavStatus;\n  // on mobile always overlay full size sidebar, instead of compact\n  if (isOverlayMode && status === 'compact') {\n    status = 'open';\n  }\n\n  const variants = {\n    open: {\n      display,\n      width: getAnimateSize(status === 'compact' ? 'compact' : size) as any,\n    },\n    closed: {\n      width: 0,\n      transitionEnd: {\n        display: 'none',\n      },\n    },\n  };\n\n  const sizeClassName = getSizeClassName(\n    status === 'compact' ? 'compact' : size,\n  );\n\n  return (\n    <m.div\n      variants={variants}\n      initial={false}\n      animate={forceClosed || status === 'closed' ? 'closed' : 'open'}\n      transition={{type: 'tween', duration: 0.15}}\n      onClick={e => {\n        // close sidenav when user clicks a link or button on mobile\n        const target = e.target as HTMLElement;\n        if (isMobileMode && (target.closest('button') || target.closest('a'))) {\n          setLeftSidenavStatus('closed');\n          setRightSidenavStatus('closed');\n        }\n      }}\n      className={clsx(\n        className,\n        position === 'left'\n          ? 'dashboard-grid-sidenav-left'\n          : 'dashboard-grid-sidenav-right',\n        overflow,\n        sizeClassName,\n        isOverlayMode && `${overlayPosition} bottom-0 top-0 z-20 shadow-2xl`,\n        isOverlayMode && position === 'left' && 'left-0',\n        isOverlayMode && position === 'right' && 'right-0',\n      )}\n    >\n      {cloneElement<DashboardSidenavChildrenProps>(children, {\n        className: clsx(\n          children.props.className,\n          'w-full h-full overflow-y-auto compact-scrollbar',\n          status === 'compact' && 'hidden-scrollbar',\n        ),\n        isCompactMode: status === 'compact',\n        isOverlayMode,\n      })}\n    </m.div>\n  );\n}\n\nfunction getSizeClassName(size: SidenavProps['size'] | 'compact'): string {\n  switch (size) {\n    case 'compact':\n      return 'w-60';\n    case 'sm':\n      return 'w-224';\n    case 'md':\n      return 'w-240';\n    case 'lg':\n      return 'w-288';\n    default:\n      return size || '';\n  }\n}\n\nfunction getAnimateSize(size: SidenavProps['size'] | 'compact') {\n  switch (size) {\n    case 'compact':\n      return 60;\n    case 'sm':\n      return 224;\n    case 'md':\n      return 240;\n    case 'lg':\n      return 288;\n    default:\n      return null;\n  }\n}\n","import {cloneElement, ReactElement} from 'react';\nimport clsx from 'clsx';\n\ninterface DashboardContentProps {\n  children: ReactElement<{className: string}>;\n  isScrollable?: boolean;\n  stableScrollbar?: boolean;\n}\nexport function DashboardContent({\n  children,\n  isScrollable = true,\n  stableScrollbar = true,\n}: DashboardContentProps) {\n  return cloneElement(children, {\n    className: clsx(\n      children.props.className,\n      isScrollable && 'overflow-y-auto',\n      isScrollable && stableScrollbar && 'stable-scrollbar',\n      'dashboard-grid-content',\n      'has-[.dashboard-stable-scrollbar]:stable-scrollbar',\n    ),\n  });\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MenuOpenIcon = createSvgIcon(\n  <path d=\"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z\" />\n, 'MenuOpenOutlined');\n","import {Navbar, NavbarProps} from '../navigation/navbar/navbar';\nimport {IconButton} from '@ui/buttons/icon-button';\nimport React, {useContext} from 'react';\nimport clsx from 'clsx';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\nimport {setInLocalStorage} from '@ui/utils/hooks/local-storage';\nimport {MenuOpenIcon} from '@ui/icons/material/MenuOpen';\n\nexport interface DashboardNavbarProps\n  extends Omit<NavbarProps, 'toggleButton'> {\n  hideToggleButton?: boolean;\n}\nexport function DashboardNavbar({\n  children,\n  className,\n  hideToggleButton,\n  ...props\n}: DashboardNavbarProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    name,\n    leftSidenavCanBeCompact,\n  } = useContext(DashboardLayoutContext);\n\n  const shouldToggleCompactMode = leftSidenavCanBeCompact && !isMobileMode;\n  const shouldShowToggle =\n    !hideToggleButton && (isMobileMode || leftSidenavCanBeCompact);\n\n  const handleToggle = () => {\n    setLeftSidenavStatus(leftSidenavStatus === 'open' ? 'closed' : 'open');\n  };\n\n  const handleCompactModeToggle = () => {\n    const newStatus = leftSidenavStatus === 'compact' ? 'open' : 'compact';\n    setInLocalStorage(`${name}.sidenav.compact`, newStatus === 'compact');\n    setLeftSidenavStatus(newStatus);\n  };\n\n  return (\n    <Navbar\n      className={clsx('dashboard-grid-navbar', className)}\n      border=\"border-b\"\n      size=\"sm\"\n      toggleButton={\n        shouldShowToggle ? (\n          <IconButton\n            size=\"md\"\n            onClick={() => {\n              if (shouldToggleCompactMode) {\n                handleCompactModeToggle();\n              } else {\n                handleToggle();\n              }\n            }}\n          >\n            <MenuOpenIcon />\n          </IconButton>\n        ) : undefined\n      }\n      {...props}\n    >\n      {children}\n    </Navbar>\n  );\n}\n","import {useEffect} from 'react';\n\nexport function useBlockBodyOverflow(disable: boolean = false) {\n  useEffect(() => {\n    if (disable) {\n      document.documentElement.classList.remove('no-page-overflow');\n    } else {\n      document.documentElement.classList.add('no-page-overflow');\n    }\n    return () => {\n      document.documentElement.classList.remove('no-page-overflow');\n    };\n  }, [disable]);\n}\n","import {useEffect, useRef} from 'react';\n\nexport function usePrevious<T>(value: T) {\n  const ref = useRef<T>();\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value;\n  }, [value]); // Only re-run if value changes\n  // Return previous value (happens before update in useEffect above)\n  return ref.current;\n}\n","import {ComponentPropsWithoutRef, useCallback, useEffect, useMemo} from 'react';\r\nimport {\r\n  DashboardLayoutContext,\r\n  DashboardSidenavStatus,\r\n} from './dashboard-layout-context';\r\nimport {AnimatePresence} from 'framer-motion';\r\nimport {useControlledState} from '@react-stately/utils';\r\nimport {useMediaQuery} from '@ui/utils/hooks/use-media-query';\r\nimport {\r\n  getFromLocalStorage,\r\n  setInLocalStorage,\r\n} from '@ui/utils/hooks/local-storage';\r\nimport {useBlockBodyOverflow} from '@ui/utils/hooks/use-block-body-overflow';\r\nimport clsx from 'clsx';\r\nimport {Underlay} from '@ui/overlays/underlay';\r\nimport {usePrevious} from '@ui/utils/hooks/use-previous';\r\n\r\ninterface DashboardLayoutProps extends ComponentPropsWithoutRef<'div'> {\r\n  name: string;\r\n  leftSidenavCanBeCompact?: boolean;\r\n  leftSidenavStatus?: DashboardSidenavStatus;\r\n  onLeftSidenavChange?: (status: DashboardSidenavStatus) => void;\r\n  rightSidenavStatus?: DashboardSidenavStatus;\r\n  compactByDefault?: boolean;\r\n  initialRightSidenavStatus?: DashboardSidenavStatus;\r\n  onRightSidenavChange?: (status: DashboardSidenavStatus) => void;\r\n  height?: string;\r\n  gridClassName?: string;\r\n  blockBodyOverflow?: boolean;\r\n}\r\nexport function DashboardLayout({\r\n  children,\r\n  leftSidenavStatus: leftSidenav,\r\n  onLeftSidenavChange,\r\n  rightSidenavStatus: rightSidenav,\r\n  compactByDefault,\r\n  initialRightSidenavStatus,\r\n  onRightSidenavChange,\r\n  name,\r\n  leftSidenavCanBeCompact,\r\n  height = 'h-screen',\r\n  className,\r\n  gridClassName = 'dashboard-grid',\r\n  blockBodyOverflow = true,\r\n  ...domProps\r\n}: DashboardLayoutProps) {\r\n  useBlockBodyOverflow(!blockBodyOverflow);\r\n  const isMobile = useMediaQuery('(max-width: 1024px)');\r\n\r\n  const isCompactModeInitially = useMemo(() => {\r\n    if (!name) return compactByDefault ?? false;\r\n\r\n    const stored = getFromLocalStorage(`${name}.sidenav.compact`);\r\n    if (stored != null) {\r\n      return stored;\r\n    }\r\n\r\n    return compactByDefault ?? false;\r\n  }, [name, compactByDefault]);\r\n\r\n  const defaultLeftSidenavStatus = isCompactModeInitially ? 'compact' : 'open';\r\n  const [leftSidenavStatus, setLeftSidenavStatus] = useControlledState(\r\n    leftSidenav,\r\n    isMobile ? 'closed' : defaultLeftSidenavStatus,\r\n    onLeftSidenavChange,\r\n  );\r\n\r\n  const rightSidenavStatusDefault = useMemo(() => {\r\n    if (isMobile) {\r\n      return 'closed';\r\n    }\r\n    if (initialRightSidenavStatus != null) {\r\n      return initialRightSidenavStatus;\r\n    }\r\n    const userSelected = getFromLocalStorage(\r\n      `${name}.sidenav.right.position`,\r\n      'open',\r\n    );\r\n    if (userSelected != null) {\r\n      return userSelected;\r\n    }\r\n    return initialRightSidenavStatus || 'closed';\r\n  }, [isMobile, name, initialRightSidenavStatus]);\r\n  const [rightSidenavStatus, _setRightSidenavStatus] = useControlledState(\r\n    rightSidenav,\r\n    rightSidenavStatusDefault,\r\n    onRightSidenavChange,\r\n  );\r\n  const setRightSidenavStatus = useCallback(\r\n    (status: DashboardSidenavStatus) => {\r\n      _setRightSidenavStatus(status);\r\n      setInLocalStorage(`${name}.sidenav.right.position`, status);\r\n    },\r\n    [_setRightSidenavStatus, name],\r\n  );\r\n\r\n  const previousIsMobile = usePrevious(isMobile);\r\n  useEffect(() => {\r\n    if (isMobile === previousIsMobile) return;\r\n\r\n    if (!isMobile) {\r\n      setLeftSidenavStatus(defaultLeftSidenavStatus);\r\n      setRightSidenavStatus(rightSidenavStatusDefault);\r\n    } else {\r\n      setLeftSidenavStatus('closed');\r\n      setRightSidenavStatus('closed');\r\n    }\r\n  }, [\r\n    isMobile,\r\n    defaultLeftSidenavStatus,\r\n    rightSidenavStatusDefault,\r\n    previousIsMobile,\r\n    setLeftSidenavStatus,\r\n    setRightSidenavStatus,\r\n  ]);\r\n\r\n  const shouldShowUnderlay =\r\n    isMobile && (leftSidenavStatus === 'open' || rightSidenavStatus === 'open');\r\n\r\n  return (\r\n    <DashboardLayoutContext.Provider\r\n      value={{\r\n        leftSidenavStatus,\r\n        setLeftSidenavStatus,\r\n        rightSidenavStatus,\r\n        setRightSidenavStatus,\r\n        leftSidenavCanBeCompact,\r\n        name,\r\n        isMobileMode: isMobile,\r\n      }}\r\n    >\r\n      <div\r\n        {...domProps}\r\n        className={clsx('relative isolate', gridClassName, className, height)}\r\n      >\r\n        {children}\r\n        <AnimatePresence>\r\n          {shouldShowUnderlay && (\r\n            <Underlay\r\n              position=\"fixed\"\r\n              key=\"dashboard-underlay\"\r\n              onClick={() => {\r\n                setLeftSidenavStatus('closed');\r\n                setRightSidenavStatus('closed');\r\n              }}\r\n            />\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n    </DashboardLayoutContext.Provider>\r\n  );\r\n}\r\n"],"names":["AddIcon","createSvgIcon","jsx","DeleteIcon","draggables","droppables","dragMonitors","dragSession","interactableEvent","e","rect","deltaX","deltaY","activeInteraction","setActiveInteraction","name","domRectToObj","updateRects","targets","observer","entries","entry","width","height","left","top","id","target","useDraggable","disabled","ref","preview","hidePreview","options","dragHandleRef","useRef","addGlobalListener","removeAllGlobalListeners","useGlobalListeners","state","optionsRef","useLayoutEffect","notifyMonitors","callback","monitor","_a","onDragStart","draggable","el","clickedOnHandle","hideNativeGhostImage","ie","node","_b","m","onDragOver","newRect","emptyImage","readFilesFromDataTransfer","dataTransfer","item","file","getEntryFile","UploadedFile","getEntriesFromDirectory","reader","resolve","reject","asyncIterableToArray","iterator","items","DROP_ACTIVATE_TIMEOUT","useDroppable","canDrop","allowEventsOnSelf","fireDragLeave","getDraggable","element","dropResult","_d","_c","LinkIcon","FileDownloadIcon","FileEntryUrlsContext","React","useFileEntryUrls","base_url","useSettings","urlSearchParams","useContext","useMemo","urls","buildPreviewUrl","addParams","preferThumbnail","isAbsoluteUrl","extension","getBootstrapData","urlString","params","baseUrl","url","key","value","downloadFileFromUrl","link","MoreVertIcon","TwoMB","FileThumbnail","className","iconClassName","showImage","trans","useTrans","previewUrl","alt","clsx","FileTypeIcon","DashboardLayoutContext","createContext","_extends","i","source","memo","getDeps","fn","opts","_opts$initialDeps","deps","result","depTime","newDeps","depsChanged","dep","index","resultTime","depEndTime","resultEndTime","resultFpsPercentage","pad","str","num","notUndefined","msg","approxEqual","a","b","defaultKeyExtractor","defaultRangeExtractor","range","start","end","arr","_i","observeElementRect","instance","cb","handler","box","observeElementOffset","measureElement","size","elementScroll","offset","_ref2","_instance$scrollEleme3","_instance$scrollEleme4","_ref2$adjustments","adjustments","behavior","toOffset","Virtualizer","_opts","_this","_ro","get","_get","_get2","_get3","_ref3","sync","isScrolling","d","scrollElement","count","paddingStart","scrollMargin","getItemKey","measurements","furthestMeasurementsFound","furthestMeasurements","measurement","previousFurthestMeasurement","_ref4","itemSizeCache","min","_i2","furthestMeasurement","measuredSize","lane","outerSize","scrollOffset","calculateRange","rangeExtractor","overscan","attributeName","indexStr","cached","prevNode","measuredItemSize","_this$itemSizeCache$g","itemSize","delta","indexes","virtualItems","k","len","_i3","findNearestBinarySearch","align","scrollSizeProp","scrollSize","maxOffset","_temp","_ref5","_ref5$align","_temp2","_ref6","_ref6$align","initialAlign","_this$getOffsetForInd","elementInDOM","_this$getOffsetForInd2","_toOffset","_temp3","_ref7","_this$getMeasurements","_ref8","low","high","getCurrentValue","middle","currentValue","_ref9","getOffset","startIndex","endIndex","useIsomorphicLayoutEffect","React.useLayoutEffect","React.useEffect","useVirtualizerBase","rerender","React.useReducer","resolvedOptions","flushSync","_React$useState","React.useState","useVirtualizer","FilePreviewContext","DefaultFilePreview","message","allowDownload","activeIndex","activeEntry","content","Trans","downloadUrl","jsxs","Button","ImageFilePreview","props","FIVE_MB","TextFilePreview","tooLarge","setTooLarge","useState","isLoading","setIsLoading","isFailed","setIsFailed","contents","setContents","useEffect","getFileContents","response","ProgressCircle","src","apiClient","VideoFilePreview","mediaInvalid","setMediaInvalid","AudioFilePreview","PdfFilePreview","WordDocumentFilePreview","showDefault","setShowDefault","timeoutId","data","buildOfficeLivePreviewUrl","AvailablePreviews","getPreviewForEntry","mime","type","ChevronLeftIcon","FilePreviewContainer","onClose","showHeader","headerActionsLeft","isMobile","useMediaQuery","setActiveIndex","useControlledState","contextValue","Preview","canOpenNext","openNext","canOpenPrevious","openPrevious","Header","IconButton","KeyboardArrowLeftIcon","AnimatePresence","opacityAnimation","KeyboardArrowRightIcon","onNext","onPrevious","actionsLeft","downloadButton","Fragment","ChevronRightIcon","CloseIcon","FilePreviewDialog","Dialog","Content","close","useDialogContext","useDatePickerState","now","useCurrentDateTime","isPlaceholder","setIsPlaceholder","setStateValue","internalValue","setInternalValue","max","granularity","timezone","calendarIsOpen","setCalendarIsOpen","closeDialogOnSelection","useBaseDatePickerState","clear","useCallback","calendarDates","setCalendarDates","toCalendarDate","setSelectedValue","newValue","toSafeZoned","dayIsActive","day","isSameDay","getCellProps","date","DatePicker","showCalendarFooter","inputRef","footer","DialogFooter","dialog","DialogTrigger","DialogBody","Calendar","openOnClick","isHourSegment","DatePickerField","DateRangeIcon","DateSegmentList","FormDatePicker","format","useDateFormatter","onChange","onBlur","invalid","error","useController","v","parseAbsoluteToLocal","parsedValue","formProps","mergeProps","InfoIcon","DashboardSidenav","position","children","mode","overlayPosition","display","overflow","forceClosed","isMobileMode","leftSidenavStatus","setLeftSidenavStatus","rightSidenavStatus","setRightSidenavStatus","isOverlayMode","status","variants","getAnimateSize","sizeClassName","getSizeClassName","DashboardContent","isScrollable","stableScrollbar","cloneElement","MenuOpenIcon","DashboardNavbar","hideToggleButton","leftSidenavCanBeCompact","shouldToggleCompactMode","shouldShowToggle","handleToggle","handleCompactModeToggle","newStatus","setInLocalStorage","Navbar","useBlockBodyOverflow","disable","usePrevious","DashboardLayout","leftSidenav","onLeftSidenavChange","rightSidenav","compactByDefault","initialRightSidenavStatus","onRightSidenavChange","gridClassName","blockBodyOverflow","domProps","defaultLeftSidenavStatus","stored","getFromLocalStorage","rightSidenavStatusDefault","userSelected","_setRightSidenavStatus","previousIsMobile","shouldShowUnderlay","Underlay"],"mappings":"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","x_google_ignoreList":[18,19,20,21,22]}